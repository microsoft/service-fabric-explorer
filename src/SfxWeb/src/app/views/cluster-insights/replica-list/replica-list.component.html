<app-navbar type="Cluster Recovery Insights" [showCopy]="false"></app-navbar>

<!-- Recovery Progress Bar -->
<app-recovery-progress></app-recovery-progress>

<!-- FMM Nodes -->
<div class="app-fmm-nodes">
    <app-fmm-nodes></app-fmm-nodes>
</div>

<!-- Replicas -->
<div class="essen-pane detail-pane nav-wrapper">
    <h4>System Services</h4>
    <div class="nav-wrapper">
        <ul ngbNav #nav="ngbNav" class="nav-wrapper" [(activeId)]="activeTab">
            <li [ngbNavItem]="'failover-manager'">
                <a ngbNavLink class="nav-link">Failover Manager</a>
                <ng-template ngbNavContent>
                    <!-- Replica Set Information - Four horizontal boxes -->
                    <div class="replica-stats-container">
                        <div class="stat-box">
                            <div class="stat-label">Min Replica Set Size</div>
                            <div class="stat-value">{{ minReplicaSetSize }}</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-label">Target Replica Set Size</div>
                            <div class="stat-value">{{ targetReplicaSetSize }}</div>
                        </div>

                        <div class="stat-box" 
                             [class.warning-box]="partitionStatus === 'InQuorumLoss'"
                             [class.success-box]="partitionStatus !== 'InQuorumLoss'">
                            <div class="stat-label">
                                <span *ngIf="partitionStatus === 'InQuorumLoss'" class="not-met-label"> Expected</span>
                                <span *ngIf="partitionStatus !== 'InQuorumLoss'" class="met-label"> Current</span>
                                Write Quorum
                            </div>
                            <div class="stat-value" 
                                 [class.quorum-loss]="partitionStatus === 'InQuorumLoss'"
                                 [class.quorum-met]="partitionStatus !== 'InQuorumLoss'">
                                {{ writeQuorum }}
                            </div>
                        </div>

                        <div class="stat-box" *ngIf="partitionStatus === 'InQuorumLoss'" [class.warning-box]="true">
                            <div class="stat-label">Quorum Loss Duration</div>
                            <div class="stat-value quorum-loss">{{ lastQuorumLossDuration }}</div>
                        </div>
                    </div>

                    <!-- Replica List -->
                    <app-detail-list [list]="replicaData" [listSettings]="listSettings"></app-detail-list>
                </ng-template>
            </li>
            <li [ngbNavItem]="'cluster-manager'">
                <a ngbNavLink class="nav-link">Cluster Manager</a>
                <ng-template ngbNavContent>
                    <!-- Content for Cluster Manager replicas will go here -->
                    <p>TBD</p>
                </ng-template>
            </li>
            <li [ngbNavItem]="'naming'">
                <a ngbNavLink class="nav-link">Naming</a>
                <ng-template ngbNavContent>
                    <!-- Content for Naming replicas will go here -->
                    <p>TBD</p>
                </ng-template>
            </li>
        </ul>
    </div>
    <div [ngbNavOutlet]="nav"></div>
</div>