"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_cluster_cluster_module_ts"],{4003:(ri,q,r)=>{r.r(q),r.d(q,{ClusterModule:()=>ai});var l=r(9808),N=r(5467),M=r(567),C=r(1086),u=r(2165),g=r(4850),K=r(7221),b=r(2970),I=r(1763),f=r(2944),t=r(5e3),d=r(7559),m=r(4333),tt=r(4034),et=r(8628),Y=r(2957),y=r(8285),T=r(8833),B=r(9196),nt=r(1997),it=r(2338),ot=r(8952);function at(n,o){if(1&n&&t._UZ(0,"app-essential-health-tile",12),2&n){const e=t.oxw();t.Q6J("listItems",e.essentialItems)}}function st(n,o){if(1&n&&t._UZ(0,"app-dashboard-tile",13),2&n){const e=t.oxw();t.Q6J("data",e.nodesDashboard)}}function rt(n,o){if(1&n&&t._UZ(0,"app-dashboard-tile",14),2&n){const e=t.oxw();t.Q6J("data",e.appsDashboard)}}function lt(n,o){if(1&n&&t._UZ(0,"app-dashboard-tile",15),2&n){const e=t.oxw();t.Q6J("data",e.servicesDashboard)}}function pt(n,o){if(1&n&&t._UZ(0,"app-dashboard-tile",15),2&n){const e=t.oxw();t.Q6J("data",e.partitionsDashboard)}}function ct(n,o){if(1&n&&t._UZ(0,"app-dashboard-tile",15),2&n){const e=t.oxw();t.Q6J("data",e.replicasDashboard)}}function dt(n,o){if(1&n&&t._UZ(0,"app-dashboard-text-tile",16),2&n){const e=t.oxw();t.Q6J("barClass",e.repairtaskCollection.repairTasks.length>0?"badge-upgrade-active":"badge-upgrade-inactive")("count",e.repairtaskCollection.repairTasks.length)}}function gt(n,o){if(1&n&&t._UZ(0,"app-dashboard-text-tile",17),2&n){const e=t.oxw();t.Q6J("barClass",e.nodes.disabledAndDisablingCount>0?"badge-upgrade-active":"badge-upgrade-inactive")("count",e.nodes.disabledAndDisablingCount)}}function mt(n,o){if(1&n&&(t.TgZ(0,"div",18)(1,"app-collapse-container",19)(2,"div",20)(3,"h4"),t._uU(4,"Potentially Stuck Repair Jobs and Throttled Infrastructure Jobs"),t.qZA()(),t.TgZ(5,"div",21)(6,"h4",22),t._uU(7,"Repair Jobs"),t.qZA(),t._UZ(8,"app-detail-list",23),t.TgZ(9,"h4",22),t._uU(10,"Throttled Infrastructure Jobs"),t.qZA(),t._UZ(11,"app-detail-list",23),t.qZA()()()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("list",e.repairtaskCollection.jobsOfInterest)("listSettings",e.repairTaskListSettings)("showTopOptions",!1),t.xp6(3),t.Q6J("list",e.infraCollection.throttledJobs)("listSettings",e.infraSettings)("showTopOptions",!1)}}function ht(n,o){1&n&&(t.TgZ(0,"span",41),t._UZ(1,"span",42),t._uU(2," Seed Node "),t.qZA())}function ut(n,o){if(1&n&&(t.TgZ(0,"div",35)(1,"app-collapse-container",32)(2,"div",20)(3,"div",36),t._uU(4),t.YNc(5,ht,3,0,"span",37),t.qZA()(),t.TgZ(6,"div",38)(7,"a",39),t._uU(8,"View Node"),t.qZA(),t._UZ(9,"app-node-deactivation-info",40),t.qZA()()()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("sectionName",e.name),t.xp6(3),t.AsE("",e.name," - ",e.raw.NodeStatus," "),t.xp6(1),t.Q6J("ngIf",e.raw.IsSeedNode),t.xp6(2),t.Q6J("routerLink",e.viewPath),t.xp6(2),t.Q6J("deactivationInfo",e.raw.NodeDeactivationInfo)}}function ft(n,o){if(1&n&&(t.TgZ(0,"div",31)(1,"app-collapse-container",32)(2,"div",20)(3,"h4"),t._uU(4),t.qZA()(),t.TgZ(5,"div",33),t.YNc(6,ut,10,6,"div",34),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("sectionName","Nodes Deactivation"),t.xp6(3),t.hij(" Deactivation Nodes Info (",e.nodes.disabledAndDisablingNodes.length,") "),t.xp6(2),t.Q6J("ngForOf",e.nodes.disabledAndDisablingNodes)}}function _t(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"div",25)(2,"app-collapse-container",26)(3,"div",20)(4,"h4"),t._uU(5,"Cluster Upgrade In Progress"),t.qZA()(),t.TgZ(6,"div",21),t._UZ(7,"app-upgrade-info",27),t.qZA(),t.TgZ(8,"div",28),t._UZ(9,"app-upgrade-progress",29),t.qZA()()(),t.YNc(10,ft,7,3,"div",30),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("upgradeProgress",e.clusterUpgradeProgress),t.xp6(2),t.Q6J("upgradeDomains",e.clusterUpgradeProgress.upgradeDomains),t.xp6(1),t.Q6J("ngIf",e.nodes.isInitialized&&e.nodes.disabledAndDisablingNodes.length>0)}}let xt=(()=>{class n extends u.J{constructor(e,i,a,s){super(i),this.data=e,this.injector=i,this.settings=a,this.routes=s,this.upgradeAppsCount=0,this.essentialItems=[]}setup(){this.clusterHealth=this.data.clusterHealth,this.clusterUpgradeProgress=this.data.clusterUpgradeProgress,this.nodes=this.data.nodes,this.systemApp=this.data.systemApp,this.repairtaskCollection=this.data.repairCollection,this.repairTaskListSettings=this.settings.getNewOrExistingPendingRepairTaskListSettings(),this.infraCollection=this.data.infrastructureCollection,this.infraSettings=this.settings.getNewOrExistingInfrastructureSettings()}refresh(e){return(0,M.D)([this.data.infrastructureCollection.ensureInitialized().pipe((0,g.U)(()=>console.log(this.data.infrastructureCollection))),this.clusterHealth.refresh(e).pipe((0,g.U)(i=>{console.log(i.raw.AggregatedHealthState);const a=f.wk.getHealthStateCount(i.raw,f.NP.Node);this.nodesDashboard=b.D.fromHealthStateCount("Nodes","Node",!1,a,this.data.routes,I._.getNodesViewPath());const s=f.wk.getHealthStateCount(i.raw,f.NP.Application);this.appsDashboard=b.D.fromHealthStateCount("Applications","Application",!1,s,this.data.routes,I._.getAppsViewPath());const c=f.wk.getHealthStateCount(i.raw,f.NP.Service);this.servicesDashboard=b.D.fromHealthStateCount("Services","Service",!1,c);const _=f.wk.getHealthStateCount(i.raw,f.NP.Partition);this.partitionsDashboard=b.D.fromHealthStateCount("Partitions","Partition",!1,_);const x=f.wk.getHealthStateCount(i.raw,f.NP.Replica);this.replicasDashboard=b.D.fromHealthStateCount("Replicas","Replica",!1,x),i.checkExpiredCertStatus()})),this.data.getApps(!0,e).pipe((0,g.U)(i=>{this.upgradeAppsCount=i.collection.filter(a=>a.isUpgrading).length})),this.nodes.refresh(e).pipe((0,g.U)(()=>{this.updateItemInEssentials()})),this.systemApp.refresh(e).pipe((0,K.K)(i=>(0,C.of)(null))),this.clusterUpgradeProgress.refresh(e),this.data.getClusterManifest().pipe((0,g.U)(i=>i.isRepairManagerEnabled?this.repairtaskCollection.refresh(e):(0,C.of)(null)))]).pipe((0,g.U)(()=>{this.updateItemInEssentials()}))}updateItemInEssentials(){var e,i,a,s;this.essentialItems=[{descriptionName:"Code Version",copyTextValue:null===(i=null===(e=this.clusterUpgradeProgress)||void 0===e?void 0:e.raw)||void 0===i?void 0:i.CodeVersion,displayText:null===(s=null===(a=this.clusterUpgradeProgress)||void 0===a?void 0:a.raw)||void 0===s?void 0:s.CodeVersion},{descriptionName:"Fault Domains",displayText:this.nodes.faultDomains.length.toString(),copyTextValue:this.nodes.faultDomains.length.toString()},{descriptionName:"Upgrade Domains",displayText:this.nodes.upgradeDomains.length.toString(),copyTextValue:this.nodes.upgradeDomains.length.toString()},{descriptionName:"Healthy Seed Nodes",displayText:this.nodes.healthySeedNodes,copyTextValue:this.nodes.healthySeedNodes}]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3),t.Y36(m.g),t.Y36(I._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-essentials"]],features:[t.qOj],decls:16,vars:15,consts:[[1,"tile-container"],["class","long",3,"listItems",4,"ngIf"],["data-cy","nodesChart",3,"data",4,"ngIf"],["data-cy","appsChart",3,"data",4,"ngIf"],[3,"data",4,"ngIf"],["link","apps/upgrades",3,"barClass","count","title"],["link","repairtasks","title","Repair Jobs In Progress",3,"barClass","count",4,"ngIf"],["link","nodes","title","Disabled/Disabling Nodes","style","display: block",3,"barClass","count",4,"ngIf"],["class","essen-pane detail-pane","style","border: 2px solid var(--badge-warning);",4,"ngIf"],["class","detail-pane",4,"ngIf"],["data-cy","health",1,"detail-pane","essen-pane",2,"position","relative"],[3,"healthyEvaluations","unhealthyEvaluations"],[1,"long",3,"listItems"],["data-cy","nodesChart",3,"data"],["data-cy","appsChart",3,"data"],[3,"data"],["link","repairtasks","title","Repair Jobs In Progress",3,"barClass","count"],["link","nodes","title","Disabled/Disabling Nodes",2,"display","block",3,"barClass","count"],[1,"essen-pane","detail-pane",2,"border","2px solid var(--badge-warning)"],["sectionName","Potentially Stuck Repair Jobs","collapsed","false","data-cy","jobs"],["collapse-header",""],["collapse-body",""],[1,"nested-header"],[3,"list","listSettings","showTopOptions"],[1,"detail-pane"],["data-cy","upgradeDetails",1,"essen-pane",2,"flex","1","min-width","600px"],["sectionName","Upgrade Status","collapsed","true"],[3,"upgradeProgress"],["closed-body",""],[3,"upgradeDomains"],["class","essen-pane","style","flex: 1; min-width: 600px;",4,"ngIf"],[1,"essen-pane",2,"flex","1","min-width","600px"],["collapsed","true",3,"sectionName"],["collapse-body","",1,"disabled-node-list"],["class","disabled-node-item",4,"ngFor","ngForOf"],[1,"disabled-node-item"],[1,"flex-center",2,"font-size","15px","margin-bottom","5px"],["class","flex-center",4,"ngIf"],["collapse-body","",1,"table-responsive",2,"padding","10px"],[3,"routerLink"],[3,"deactivationInfo"],[1,"flex-center"],[1,"mif-checkmark","seed-node"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,at,1,1,"app-essential-health-tile",1),t.YNc(2,st,1,1,"app-dashboard-tile",2),t.YNc(3,rt,1,1,"app-dashboard-tile",3),t.YNc(4,lt,1,1,"app-dashboard-tile",4),t.YNc(5,pt,1,1,"app-dashboard-tile",4),t.YNc(6,ct,1,1,"app-dashboard-tile",4),t._UZ(7,"app-dashboard-text-tile",5),t.YNc(8,dt,1,2,"app-dashboard-text-tile",6),t.YNc(9,gt,1,2,"app-dashboard-text-tile",7),t.qZA(),t.YNc(10,mt,12,6,"div",8),t.YNc(11,_t,11,3,"div",9),t.TgZ(12,"div",10)(13,"h4"),t._uU(14,"Health Evaluations"),t.qZA(),t._UZ(15,"app-health-viewer",11),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.nodes.isInitialized&&i.clusterUpgradeProgress.isInitialized),t.xp6(1),t.Q6J("ngIf",i.nodesDashboard),t.xp6(1),t.Q6J("ngIf",i.appsDashboard),t.xp6(1),t.Q6J("ngIf",i.servicesDashboard),t.xp6(1),t.Q6J("ngIf",i.partitionsDashboard),t.xp6(1),t.Q6J("ngIf",i.replicasDashboard),t.xp6(1),t.Q6J("barClass",i.upgradeAppsCount>0?"badge-upgrade-active":"badge-upgrade-inactive")("count",i.upgradeAppsCount)("title","Application Upgrade In Progress"),t.xp6(1),t.Q6J("ngIf",i.repairtaskCollection.isInitialized),t.xp6(1),t.Q6J("ngIf",i.nodes.isInitialized),t.xp6(1),t.Q6J("ngIf",i.repairtaskCollection.isInitialized&&(null==i.repairtaskCollection||null==i.repairtaskCollection.jobsOfInterest?null:i.repairtaskCollection.jobsOfInterest.length)>0||i.infraCollection.isInitialized&&(null==i.infraCollection||null==i.infraCollection.throttledJobs?null:i.infraCollection.throttledJobs.length)>0),t.xp6(1),t.Q6J("ngIf",i.clusterUpgradeProgress.isInitialized&&i.clusterUpgradeProgress.isUpgrading),t.xp6(4),t.Q6J("healthyEvaluations",i.clusterHealth.healthEvents)("unhealthyEvaluations",i.clusterHealth.unhealthyEvaluations))},directives:[l.O5,tt.Q,et.L,Y.u,y.P,T.m,B.Y,nt.S,l.sg,N.yS,it.x,ot.f],styles:[".seed-node[_ngcontent-%COMP%]{color:green;padding-left:10px;padding-right:5px}.disabled-node-list[_ngcontent-%COMP%]   .disabled-node-item[_ngcontent-%COMP%]{border:1px solid gray}.disabled-node-list[_ngcontent-%COMP%]   .disabled-node-item[_ngcontent-%COMP%]:first-child{border-top-left-radius:5px;border-top-right-radius:5px}.disabled-node-list[_ngcontent-%COMP%]   .disabled-node-item[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:5px;border-bottom-right-radius:5px}.nested-header[_ngcontent-%COMP%]{margin-bottom:-20px;margin-top:10px}"]}),n})();var E=r(1271);function Ct(n,o){1&n&&(t.TgZ(0,"h4"),t._uU(1,"Cluster Upgrade In Progress"),t.qZA())}function vt(n,o){1&n&&(t.TgZ(0,"h4"),t._uU(1,"Latest Cluster Upgrade"),t.qZA())}function bt(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"app-collapse-container",3)(2,"div",4),t.YNc(3,Ct,2,0,"h4",5),t.YNc(4,vt,2,0,"h4",5),t.qZA(),t.TgZ(5,"div",6),t._UZ(6,"app-upgrade-info",7),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.clusterUpgradeProgress.isUpgrading),t.xp6(1),t.Q6J("ngIf",!e.clusterUpgradeProgress.isUpgrading),t.xp6(2),t.Q6J("upgradeProgress",e.clusterUpgradeProgress)}}function yt(n,o){if(1&n&&(t.TgZ(0,"div",11),t._UZ(1,"app-detail-view-part",12),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("data",e.clusterUpgradeProgress.upgradeDescription)}}function Tt(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"app-collapse-container",9)(2,"h4",4),t._uU(3,"Upgrade Description"),t.qZA(),t.YNc(4,yt,2,1,"div",10),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.clusterUpgradeProgress.upgradeDescription)}}function wt(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"app-collapse-container",13)(2,"h4",4),t._uU(3,"Node States"),t.qZA(),t._UZ(4,"app-detail-list",14),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("list",e.nodesStatuses)("listSettings",e.nodeStatusListSettings)}}function Zt(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"app-collapse-container",15)(2,"h4",4),t._uU(3,"Load Information"),t.qZA(),t._UZ(4,"app-detail-view-part",16),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("data",e.clusterLoadInformation.raw)("parent",e.clusterLoadInformation)}}let Nt=(()=>{class n extends u.J{constructor(e,i,a){super(a),this.data=e,this.settings=i}setup(){this.clusterUpgradeProgress=this.data.clusterUpgradeProgress,this.clusterLoadInformation=this.data.clusterLoadInformation,this.clusterHealth=this.data.clusterHealth,this.nodes=this.data.nodes,this.nodeStatusListSettings=this.settings.getNewOrExistingNodeStatusListSetting(),this.upgradeProgressUnhealthyEvaluationsListSettings=this.settings.getNewOrExistingUnhealthyEvaluationsListSettings("clusterUpgradeProgressUnhealthyEvaluations")}refresh(e){return(0,M.D)([this.clusterUpgradeProgress.refresh(e),this.clusterLoadInformation.refresh(e),this.nodes.refresh(e).pipe((0,g.U)(()=>{this.nodesStatuses=this.nodes.getNodeStateCounts()}))])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(m.g),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-details"]],features:[t.qOj],decls:4,vars:4,consts:[["data-cy","upgradeDetails","class","detail-pane essen-pane",4,"ngIf"],["class","detail-pane essen-pane",4,"ngIf"],["data-cy","upgradeDetails",1,"detail-pane","essen-pane"],["sectionName","Upgrade Status"],["collapse-header",""],[4,"ngIf"],["collapse-body",""],[3,"upgradeProgress"],[1,"detail-pane","essen-pane"],["sectionName","Upgrade Description","collapsed","true"],["class","detail-pane","collapse-body","",4,"ngIf"],["collapse-body","",1,"detail-pane"],[3,"data"],["sectionName","Node States"],["collapse-body","",3,"list","listSettings"],["sectionName","Load Information"],["collapse-body","",3,"data","parent"]],template:function(e,i){1&e&&(t.YNc(0,bt,7,3,"div",0),t.YNc(1,Tt,5,1,"div",1),t.YNc(2,wt,5,2,"div",1),t.YNc(3,Zt,5,2,"div",1)),2&e&&(t.Q6J("ngIf",i.clusterUpgradeProgress.isInitialized),t.xp6(1),t.Q6J("ngIf",i.clusterUpgradeProgress),t.xp6(1),t.Q6J("ngIf",i.nodesStatuses),t.xp6(1),t.Q6J("ngIf",i.clusterLoadInformation&&i.clusterLoadInformation.isInitialized))},directives:[l.O5,y.P,B.Y,E.d,T.m],styles:[".cell-wrapper[_ngcontent-%COMP%]{margin-bottom:10px}"]}),n})();var Mt=r(5237),v=r(5053),Ot=r(2261),St=r(8118),P=r(1136),It=r(1341);function Pt(n,o){if(1&n&&(t.TgZ(0,"div",11)(1,"a",12),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("href",e.link,t.LSH),t.xp6(1),t.Oqu(e.linkText||"Learn more")}}function Jt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit;return t.oxw().remove(a,!0)}),t.qZA()}}function Ft(n,o){if(1&n&&(t.TgZ(0,"div",5)(1,"div",6)(2,"b"),t._uU(3),t.qZA()(),t.TgZ(4,"div",7)(5,"div")(6,"div"),t._UZ(7,"div",8),t.YNc(8,Pt,3,2,"div",9),t.qZA()(),t.YNc(9,Jt,1,0,"div",10),t.qZA()()),2&n){const e=t.oxw().$implicit;t.Q6J("ngClass","alert-"+e.level),t.xp6(1),t.Q6J("ngClass","alert-"+e.level),t.xp6(2),t.Oqu(e.level),t.xp6(4),t.Q6J("innerHTML",e.message,t.oJD),t.xp6(1),t.Q6J("ngIf",e.link),t.xp6(1),t.Q6J("ngIf","error"!==e.level)}}function At(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ft,10,6,"div",4),t.qZA()),2&n){const e=o.index,i=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e||i.displayAll)}}function kt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleViewed()}),t.TgZ(1,"div",15),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" Show ",e.displayAll?"less":e.alerts.notifications.length-1+" more"," ")}}let Ut=(()=>{class n{constructor(e,i){this.alerts=e,this.data=i,this.displayAll=!1}toggleViewed(){this.displayAll=!this.displayAll}remove(e,i=!1){e.level===v.a9.Warning?this.removeWithConfirm(e):this.alerts.removeNotificationById(e.id,i)}removeWithConfirm(e){new P.et(this.data.dialog,"","Accept","acknowledge",()=>(0,C.of)(this.alerts.removeNotificationById(e.id,!0)),()=>!0,"Acknowledge",e.confirmText,"Accept").run()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(It.O),t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-status-warnings"]],decls:4,vars:2,consts:[[1,"alert-wrapper"],[2,"flex-grow","1"],[4,"ngFor","ngForOf"],["title","See additional notifications","role","button",3,"click",4,"ngIf"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"alert-left-bar",3,"ngClass"],[1,"inner-content"],[3,"innerHTML"],["class","link-out",4,"ngIf"],["class","mif-cancel mif-lg remove-placement","role","button","aria-label","Remove warning",3,"click",4,"ngIf"],[1,"link-out"],["target","_blank",3,"href"],["role","button","aria-label","Remove warning",1,"mif-cancel","mif-lg","remove-placement",3,"click"],["title","See additional notifications","role","button",3,"click"],[1,"show-more","show-more-color"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,At,2,1,"div",2),t.YNc(3,kt,3,1,"div",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.alerts.notifications),t.xp6(1),t.Q6J("ngIf",i.alerts.notifications.length>1))},directives:[l.sg,l.O5,l.mk],styles:[".alert-wrapper[_ngcontent-%COMP%], .nested-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:90%;max-width:800px;margin:5px auto;gap:10px}.alert[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;border-radius:5px!important;padding:0;min-height:60px;border:0px;margin-bottom:0}.alert[_ngcontent-%COMP%]   .alert-left-bar[_ngcontent-%COMP%]{min-width:80px;height:unset;filter:brightness(.8);border-radius:5px 0 0 5px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;text-transform:capitalize;font-size:var(--font-size-large-title)}.alert[_ngcontent-%COMP%]   .inner-content[_ngcontent-%COMP%]{padding:5px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex:1;flex:1;font-weight:var(--font-weight-semibold)}.alert[_ngcontent-%COMP%]   .link-out[_ngcontent-%COMP%]{margin:5px auto auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:15px!important;padding:5px 11px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;background-color:var(--primary-background-color)}.alert-warning[_ngcontent-%COMP%]{background-color:#ff0}.alert-info[_ngcontent-%COMP%]{background-color:#add8e6}.alert-error[_ngcontent-%COMP%]{background-color:var(--badge-error)}.alert-warning[_ngcontent-%COMP%]{background-color:var(--badge-warning)}.remove-placement[_ngcontent-%COMP%]{cursor:pointer;font-size:var(--font-size-large);-ms-flex-item-align:start;align-self:flex-start;margin-left:auto}.show-more-color[_ngcontent-%COMP%]{background-color:#3b4044}.show-more[_ngcontent-%COMP%]{width:120px;padding:3px 5px 5px;margin:auto;text-align:center;border-radius:0 0 5px 5px;cursor:pointer}"]}),n})(),Dt=(()=>{class n{constructor(e,i){this.tree=e,this.dataService=i,this.SFXClusterName="",this.tabs=[{name:"essentials",route:""},{name:"details",route:"/details"},{name:"metrics",route:"/metrics"},{name:"cluster map",route:"/clustermap"},{name:"image store",route:"/imagestore"},{name:"manifest",route:"/manifest"}]}ngOnInit(){this.tree.selectTreeNode([Mt.R.cluster()],!0),this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.dataService.clusterManifest.isEventStoreEnabled&&(this.tabs=this.tabs.concat(v.gT.EventsTab)),this.dataService.clusterManifest.isBackupRestoreEnabled&&(this.tabs=this.tabs.concat({name:"backups",route:"/backups"})),this.dataService.clusterManifest.isRepairManagerEnabled&&(this.tabs=this.tabs.concat({name:"repair jobs",route:"/repairtasks"})),this.dataService.clusterManifest.isRepairManagerEnabled&&(this.tabs=this.tabs.concat({name:"infrastructure jobs",route:"/infrastructure"}))}),this.dataService.nodes.refresh().subscribe(()=>{this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.dataService.clusterManifest.isSfrpCluster&&this.dataService.nodes.checkSeedNodeCount(5)})}),this.SFXClusterName=this.dataService.clusterNameMetadata||window.location.protocol+"//"+window.location.hostname}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ot.r),t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-base"]],decls:5,vars:2,consts:[["type","Cluster",3,"tabs","name"],[1,"main-view"],[1,"flex-child"]],template:function(e,i){1&e&&(t.TgZ(0,"app-navbar",0),t._UZ(1,"app-status-warnings"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"router-outlet"),t.qZA()()),2&e&&t.Q6J("tabs",i.tabs)("name",i.SFXClusterName)},directives:[St.S,Ut,N.lC],styles:[""]}),n})();var L=r(1709),Qt=r(9040),p=r(322),w=r(3075),J=r(3174),zt=r(7498);function Rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",14)(1,"label")(2,"input",15),t.NdJ("click",function(a){return a.stopPropagation()})("ngModelChange",function(a){const c=t.CHM(e).$implicit;return t.oxw().nodeTypeFilter[c]=a})("ngModelChange",function(){return t.CHM(e),t.oxw().updateNodes()}),t.qZA(),t._uU(3),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngModel",i.nodeTypeFilter[e]),t.xp6(1),t.hij(" ",e," ")}}function qt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"label",16),t._uU(1," Group By NodeType "),t._UZ(2,"br"),t.TgZ(3,"app-toggle",17),t.NdJ("stateChange",function(a){return t.CHM(e),t.oxw().groupByNodeType=a})("stateChange",function(){return t.CHM(e),t.oxw().updateNodes()}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("state",e.groupByNodeType)}}let j=(()=>{class n{constructor(e){this.data=e,this.showGroupByNodeType=!0,this.groupByNodeType=!1,this.groupByNodeTypeChange=new t.vpe,this.filteredNodes=new t.vpe,this.filter="",this.healthFilter={},this.nodeTypeFilter={}}ngOnInit(){this.healthFilter[v.MQ.OK]=!0,this.healthFilter[v.MQ.Warning]=!0,this.healthFilter[v.MQ.Error]=!0,this.data.nodes.ensureInitialized().subscribe(()=>{this.data.nodes.nodeTypes.forEach(e=>{e in this.nodeTypeFilter||(this.nodeTypeFilter[e]=!0)})})}ngOnChanges(){this.nodes?this.updateNodes():this.data.nodes.ensureInitialized().subscribe(()=>{this.nodes=this.data.nodes.collection,this.updateNodes()})}getNodesForDomains(){return this.nodes.filter(e=>(!(e.raw.Type in this.nodeTypeFilter)||this.nodeTypeFilter[e.raw.Type])&&(!(this.filter.length>0)||e.name.toLowerCase().includes(this.filter))&&(!(e.healthState.badgeId in this.healthFilter)||this.healthFilter[e.healthState.badgeId]))}updateNodes(){this.filteredNodes.emit(this.getNodesForDomains()),this.groupByNodeTypeChange.emit(this.groupByNodeType)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-node-filter"]],inputs:{showGroupByNodeType:"showGroupByNodeType",nodes:"nodes",groupByNodeType:"groupByNodeType"},outputs:{groupByNodeTypeChange:"groupByNodeTypeChange",filteredNodes:"filteredNodes"},features:[t.TTD],decls:20,vars:12,consts:[[1,"layout"],["data-cy","filter","placeholder","Filter nodes",3,"model","changed"],[1,"layout-wrapper"],[1,"type-container"],["ngbDropdown","","container","body","display","dynamic"],["ngbDropdownToggle","",1,"simple-button"],["ngbDropdownMenu","","role","menu",1,"dropdown-layout"],["role","menuitem","class","item",4,"ngFor","ngForOf"],["data-cy","nodetype-filter",4,"ngIf"],[1,"label-group","flex-column"],[3,"badgeClass","text"],["color","green",3,"state","stateChange"],["color","#f19d03",3,"state","stateChange"],["color","red",3,"state","stateChange"],["role","menuitem",1,"item"],["type","checkbox",3,"ngModel","click","ngModelChange"],["data-cy","nodetype-filter"],[2,"float","left",3,"state","stateChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-input",1),t.NdJ("changed",function(s){return i.filter=s,i.updateNodes()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),t._uU(6,"node Types"),t.qZA(),t.TgZ(7,"ul",6),t.YNc(8,Rt,4,2,"li",7),t.qZA()(),t.YNc(9,qt,4,1,"label",8),t.qZA(),t.TgZ(10,"div",9)(11,"label"),t._UZ(12,"app-health-badge",10),t.TgZ(13,"app-toggle",11),t.NdJ("stateChange",function(s){return i.healthFilter.OK=s})("stateChange",function(){return i.updateNodes()}),t.qZA()(),t.TgZ(14,"label"),t._UZ(15,"app-health-badge",10),t.TgZ(16,"app-toggle",12),t.NdJ("stateChange",function(s){return i.healthFilter.Warning=s})("stateChange",function(){return i.updateNodes()}),t.qZA()(),t.TgZ(17,"label"),t._UZ(18,"app-health-badge",10),t.TgZ(19,"app-toggle",13),t.NdJ("stateChange",function(s){return i.healthFilter.Error=s})("stateChange",function(){return i.updateNodes()}),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("model",i.filter),t.xp6(7),t.Q6J("ngForOf",i.data.nodes.nodeTypes),t.xp6(1),t.Q6J("ngIf",i.showGroupByNodeType),t.xp6(3),t.Q6J("badgeClass","badge-ok")("text","OK"),t.xp6(1),t.Q6J("state",i.healthFilter.OK),t.xp6(2),t.Q6J("badgeClass","badge-warning")("text","Warning"),t.xp6(1),t.Q6J("state",i.healthFilter.Warning),t.xp6(2),t.Q6J("badgeClass","badge-error")("text","Error"),t.xp6(1),t.Q6J("state",i.healthFilter.Error))},directives:[Qt.a,p.jt,p.iD,p.Vi,l.sg,w.Wl,w.JJ,w.On,l.O5,J.n,zt._],styles:[".label-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:last-child){margin-bottom:5px}.label-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:120px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.first[_ngcontent-%COMP%]{padding:10px!important;position:relative}.layout-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-top:10px}.type-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}"]}),n})();const Yt=function(n){return{selected:n}},Bt=function(n){return{"background-color":n}};let Et=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-metric-tile"]],inputs:{metric:"metric"},decls:6,vars:8,consts:[["tabindex","0",1,"metric-container",3,"ngClass"],[1,"metric-legend",3,"ngStyle"],[1,"metric-title"],[1,"metric-ratio"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.qZA()()),2&e&&(t.Q6J("ngClass",t.VKq(4,Yt,i.metric.selected)),t.xp6(1),t.Q6J("ngStyle",t.VKq(6,Bt,i.metric.color)),t.xp6(2),t.Oqu(i.metric.displayName),t.xp6(2),t.Oqu(i.metric.hasCapacity?i.metric.loadCapacityRatioString:"N/A"))},directives:[l.mk,l.PC],styles:[".metric-container[_ngcontent-%COMP%]{margin-bottom:12px;padding:8px;background-color:var(--primary-background-color);cursor:pointer;position:relative;border-color:transparent;border-width:1px;border-style:solid;border-radius:var(--primary-border-radius)}.metric-container.selected[_ngcontent-%COMP%]{border-color:var(--accent-darkblue);border-width:3px;padding:6px}.metric-container.selected[_ngcontent-%COMP%]   .metric-ratio[_ngcontent-%COMP%]{right:6px}.metric-container[_ngcontent-%COMP%]   .metric-legend[_ngcontent-%COMP%]{width:16px;height:16px;margin-top:2px;float:left;border-radius:50px}.metric-container[_ngcontent-%COMP%]   .metric-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-left:8px;padding-right:25px}.metric-container[_ngcontent-%COMP%]   .metric-ratio[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;-ms-transform:translate(0,-50%);transform:translateY(-50%)}"]}),n})();var Lt=r(8139),F=r(3470);const jt=["container"];let Vt=(()=>{class n{constructor(){this.dataSet=[],this.title="",this.subtitle="",this.fontColor={color:"#fff"},this.options={chart:{type:"column",inverted:!1,polar:!1,animation:!0,backgroundColor:"#191919"},title:{text:"",style:this.fontColor},subtitle:{text:"",style:this.fontColor},yAxis:{gridLineColor:"#fff",labels:{style:this.fontColor},title:{style:this.fontColor}},legend:{itemStyle:this.fontColor},xAxis:{categories:[],lineColor:"#fff",labels:{style:this.fontColor}},colorAxis:[{gridLineColor:"#fff"}],series:[]}}ngOnChanges(){this.chart&&(this.chart.series.forEach(e=>{this.dataSet.every(i=>i.label!==e.name)?e.remove():e.update(this.dataSet.find(i=>i.label===e.name))}),this.mapData().forEach(e=>{this.chart.series.every(i=>i.name!==e.name)&&this.chart.addSeries(e)}),this.chart.title.update({text:this.title}),this.chart.subtitle.update({text:this.subtitle}),this.chart.xAxis[0].update({categories:this.xAxisCategories}),this.chart.tooltip.update({formatter:this.tooltip}))}mapData(){return this.dataSet.map((e,i)=>({name:e.label,type:"column",data:e.data,dataLabels:{style:this.fontColor}}))}ngAfterViewInit(){this.chart=(0,F.chart)(this.container.nativeElement,this.options)}ngOnDestroy(){this.chart&&this.chart.destroy()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bar-chart"]],viewQuery:function(e,i){if(1&e&&t.Gf(jt,5),2&e){let a;t.iGM(a=t.CRH())&&(i.container=a.first)}},inputs:{xAxisCategories:"xAxisCategories",dataSet:"dataSet",title:"title",subtitle:"subtitle",tooltip:"tooltip"},features:[t.TTD],decls:2,vars:0,consts:[[2,"width","100%"],["container",""]],template:function(e,i){1&e&&t._UZ(0,"div",0,1)},styles:[""]}),n})();var V=r(6331),A=r(4441);const Ht=["chart"];let $t=(()=>{class n{constructor(){this.width="80",this.title="",this.fontColor={color:"#fff"},this.options={chart:{type:"pie",backgroundColor:null,borderRadius:0,margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},title:{text:"",align:"left",verticalAlign:"middle",y:0,x:30,style:{color:"#fff",fontSize:"15pt"}},subtitle:{text:"5",align:"left",verticalAlign:"middle",style:{color:"#fff",fontSize:"28pt"}},tooltip:{enabled:!1,animation:!1,formatter(){return`${this.point.name} : ${this.y}`}},credits:{enabled:!1},loading:{showDuration:0},plotOptions:{pie:{borderColor:"#191919",borderWidth:2,dataLabels:{enabled:!1,distance:-50,style:{fontWeight:"bold",color:"white"}},innerSize:"60%",startAngle:-50,endAngle:230}},series:[{animation:!1,type:"pie",data:[{name:"",y:1,color:"gray"}],states:{inactive:{opacity:1},hover:{halo:{size:0}}}}]}}ngOnInit(){this.options.chart.height=this.width,this.options.chart.width=this.width,this.options.subtitle.text=this.title.toString();const e=this.getDataSet();this.options.tooltip.enabled=3===e.length,this.options.series[0].data=e,this.options.title.style.fontSize=.2*+this.width+"pt",this.options.subtitle.style.fontSize=.2*+this.width+"pt"}ngAfterViewInit(){this.chart=(0,F.chart)(this.chartContainer.nativeElement,this.options)}getDataSet(){const e={Healthy:"#7FBA00",Warning:"#FCD116",Error:"#E81123"},i=this.data.map(a=>({name:a.title,y:a.count,color:e[a.title]}));return i.every(a=>0===a.y)&&i.push({name:"",y:1,color:"gray"}),i}ngOnChanges(){if(this.chart){const e=this.getDataSet();this.chart.tooltip.update({enabled:3===e.length}),this.chart.series[0].setData(e),this.chart.subtitle.update({text:this.title.toString()})}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-health-chart"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ht,5),2&e){let a;t.iGM(a=t.CRH())&&(i.chartContainer=a.first)}},inputs:{data:"data",width:"width",title:"title"},features:[t.TTD],decls:2,vars:0,consts:[[2,"height","100%","min-height","100%","min-width","100%"],["chart",""]],template:function(e,i){1&e&&t._UZ(0,"div",0,1)},styles:[""]}),n})();var H=r(7895);function Wt(n,o){if(1&n&&(t.TgZ(0,"div",12),t._UZ(1,"span",13),t.TgZ(2,"span",9),t._uU(3),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.AsE("",e.repairInfo.inProgress,"/",e.repairInfo.recent,"")}}function Xt(n,o){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"app-health-chart",4),t.TgZ(5,"div")(6,"div",5),t.YNc(7,Wt,4,2,"div",6),t.TgZ(8,"div",7),t._UZ(9,"app-status-resolver",8),t.TgZ(10,"span",9),t._uU(11),t.qZA()(),t.TgZ(12,"div",10),t._UZ(13,"app-status-resolver",11),t.TgZ(14,"span",9),t._uU(15),t.qZA()()()()()()),2&n){const e=t.oxw();t.uIk("data-cy","sectionoverview"+e.title),t.xp6(2),t.hij(" ",e.title," "),t.xp6(2),t.Q6J("data",e.dataPoints)("title",e.info.totalCount),t.xp6(3),t.Q6J("ngIf",e.repairInfo),t.xp6(2),t.Q6J("showText",!1),t.xp6(2),t.AsE("",e.info.statusTypeCounts[e.constants.Disabled],"/",e.info.statusTypeCounts[e.constants.Disabling],""),t.xp6(2),t.Q6J("showText",!1),t.xp6(2),t.Oqu(e.info.statusTypeCounts[e.constants.Down])}}let Gt=(()=>{class n{constructor(e){this.dataService=e,this.title="",this.moreInfo=!0,this.vertical=!0,this.item=[],this.dataPoints=[],this.constants=v.lJ}ngOnChanges(){const e=new V.B("");this.nodes.forEach(a=>e.add(a)),this.info=e;const i=[];i.push(new b.Z("Error",e.errorCount,A.H.healthStatuses[3])),i.push(new b.Z("Warning",e.warningCount,A.H.healthStatuses[2])),i.push(new b.Z("Healthy",e.okCount,A.H.healthStatuses[1])),this.dataPoints=i,this.dataService.clusterManifest.ensureInitialized().pipe((0,L.zg)(()=>this.dataService.clusterManifest.isRepairManagerEnabled?this.dataService.repairCollection.ensureInitialized().pipe((0,g.U)(()=>{let a=0,s=0;return this.nodes.forEach(c=>{this.dataService.repairCollection.getRepairJobsForANode(c.name).forEach(x=>x.inProgress?a++:s++)}),{inProgress:a,recent:s}})):(0,C.of)(null))).subscribe(a=>{a&&(this.repairInfo=a)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-section-overview"]],inputs:{nodes:"nodes",repairJobs:"repairJobs",title:"title",moreInfo:"moreInfo",vertical:"vertical"},features:[t.TTD],decls:1,vars:1,consts:[["class","no-padding","style","color: white; margin: 2px;",4,"ngIf"],[1,"no-padding",2,"color","white","margin","2px"],[1,"underline","title-display"],[1,"flex-center"],[2,"margin","auto",3,"data","title"],[1,"flex-center",2,"flex-direction","column"],["class","essential-list-item","tooltipClass","styled-tooltip","tabindex","0","ngbTooltip","The count of Repair Jobs in progress / Recently finished Repair Job counts","container","body",4,"ngIf"],["tooltipClass","styled-tooltip","tabindex","0","ngbTooltip","The count of disabled nodes / Nodes that are in the process of disabling","container","body","data-cy","disabling-nodes",1,"essential-list-item"],["status","Disabling",1,"space-right",3,"showText"],[1,"small-icon-text"],["ngbTooltip","The count of down nodes","tooltipClass","styled-tooltip","container","body","data-cy","down-nodes","tabindex","0",1,"essential-list-item"],["status","Down",1,"space-right",3,"showText"],["tooltipClass","styled-tooltip","tabindex","0","ngbTooltip","The count of Repair Jobs in progress / Recently finished Repair Job counts","container","body",1,"essential-list-item"],[1,"mif-cog","link","space-right"]],template:function(e,i){1&e&&t.YNc(0,Xt,16,10,"div",0),2&e&&t.Q6J("ngIf",i.info)},directives:[l.O5,$t,p._L,H.u],styles:[".no-padding[_ngcontent-%COMP%]{padding:2px!important}.space-right[_ngcontent-%COMP%]{margin-right:5px}.small-icon-text[_ngcontent-%COMP%]{font-size:14px;min-width:20px;text-align:right}.essential-list-item[_ngcontent-%COMP%]{width:100%}.title-display[_ngcontent-%COMP%]{margin:3px;text-align:center;font-size:15px}"]}),n})();function Kt(n,o){1&n&&t.GkF(0)}const te=function(n){return{data:n}};function ee(n,o){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._UZ(3,"app-status-resolver",4),t.TgZ(4,"a",5),t._uU(5),t.qZA()(),t.TgZ(6,"div"),t.YNc(7,Kt,1,0,"ng-container",6),t.qZA()()()),2&n){const e=o.$implicit,i=o.last,a=t.oxw();t.Gre(" ",!i||a.underlineLast?"underline":"",""),t.xp6(3),t.Q6J("status",e.nodeStatus)("healthState",e.healthState.text)("showText",!1),t.xp6(1),t.Q6J("routerLink",e.viewPath),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Q6J("ngTemplateOutlet",a.listTemplate)("ngTemplateOutletContext",t.VKq(10,te,e))}}let ne=(()=>{class n{constructor(){this.underlineLast=!0}trackByFn(e,i){return i.uniqueId}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-node-list"]],inputs:{listTemplate:"listTemplate",underlineLast:"underlineLast",nodes:"nodes"},decls:2,vars:2,consts:[["style","min-height: 30px;","data-cy","node",3,"class",4,"ngFor","ngForOf","ngForTrackBy"],["data-cy","node",2,"min-height","30px"],[2,"display","flex","flex-direction","column"],[1,"essential-list-item"],[1,"space-right",3,"status","healthState","showText"],[2,"margin","auto",3,"routerLink"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,ee,8,12,"div",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.nodes)("ngForTrackBy",i.trackByFn))},directives:[l.sg,H.u,N.yS,l.tP],styles:[""]}),n})();function ie(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"app-collapse-container",3)(2,"div",4)(3,"div",5)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",6)(9,"div",7),t._UZ(10,"app-node-list",8),t.qZA()()()()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("collapsed",!0),t.xp6(4),t.Oqu(e.value.nodeType),t.xp6(2),t.hij("(",e.value.nodes.length,")"),t.xp6(3),t.Q6J("nodes",e.value.nodes)("underlineLast",!1)("listTemplate",i.listTemplate)}}function oe(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ie,11,6,"div",1),t.ALo(2,"keyvalue"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.nodeTypes))("ngForTrackBy",e.trackByFn)}}function ae(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-node-list",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nodes",e.nodes)("listTemplate",e.listTemplate)}}let se=(()=>{class n{constructor(){this.groupByNodeType=!1,this.title="",this.items=[],this.nodeTypes={},this.constants=v.lJ}ngOnChanges(){this.groupByNodeType?(this.nodeTypes={},this.nodes.forEach(e=>{this.nodeTypes[e.raw.Type]||(this.nodeTypes[e.raw.Type]=new V.B(e.raw.Type)),this.nodeTypes[e.raw.Type].add(e)})):this.items=this.nodes.map(e=>({descriptionName:e.name,displaySelector:!0}))}trackByFn(e,i){return i.key}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-status-tile"]],inputs:{listTemplate:"listTemplate",nodes:"nodes",repairJobs:"repairJobs",groupByNodeType:"groupByNodeType",title:"title"},features:[t.TTD],decls:2,vars:2,consts:[[4,"ngIf"],["class","underline","style","width: 100%;",4,"ngFor","ngForOf","ngForTrackBy"],[1,"underline",2,"width","100%"],["data-cy","nodetype-group",3,"collapsed"],["collapse-header",""],[2,"display","flex","justify-content","space-between"],["collapse-body","",1,"aboveline"],[2,"margin-left","10px"],[3,"nodes","underlineLast","listTemplate"],[3,"nodes","listTemplate"]],template:function(e,i){1&e&&(t.YNc(0,oe,3,4,"div",0),t.YNc(1,ae,2,2,"div",0)),2&e&&(t.Q6J("ngIf",i.groupByNodeType),t.xp6(1),t.Q6J("ngIf",!i.groupByNodeType))},directives:[l.O5,l.sg,y.P,ne],pipes:[l.Nd],styles:[""]}),n})();const re=["container"],le=["map"];function pe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"label"),t._uU(1," Scale Width "),t.TgZ(2,"app-toggle",4),t.NdJ("stateChange",function(a){return t.CHM(e),t.oxw().scaleToFit=a})("stateChange",function(){return t.CHM(e),t.oxw().onResize()}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("state",e.scaleToFit)}}function ce(n,o){if(1&n&&(t.TgZ(0,"td",13),t._UZ(1,"app-section-overview",14),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("nodes",i.matrix[e])("moreInfo",!1)("vertical",!1)("title",e)}}const de=function(n){return{first:n}};function ge(n,o){if(1&n&&(t.TgZ(0,"td",19)(1,"div",20),t._uU(2," Upgrade Domain "),t.qZA()()),2&n){const e=t.oxw().first,i=t.oxw(2);t.Q6J("rowSpan",i.data.nodes.upgradeDomains.length)("ngClass",t.VKq(2,de,e))}}function me(n,o){if(1&n&&(t.TgZ(0,"div",21),t._UZ(1,"app-status-tile",23),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("nodes",a.matrix[e+i])("listTemplate",a.listTemplate)("title",e+" : "+i)("groupByNodeType",a.groupByNodeType)}}function he(n,o){if(1&n&&(t.TgZ(0,"td",21),t.YNc(1,me,2,4,"div",22),t.qZA()),2&n){const e=o.$implicit,i=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.matrix[e+i].length>0)}}function ue(n,o){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,ge,3,4,"td",15),t.TgZ(2,"td",16),t._UZ(3,"app-section-overview",17),t.qZA(),t.YNc(4,he,2,1,"td",18),t.qZA()),2&n){const e=o.$implicit,i=o.first,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i),t.xp6(2),t.Q6J("nodes",a.matrix[e])("moreInfo",!1)("title",e)("vertical",!0),t.xp6(1),t.Q6J("ngForOf",a.data.nodes.faultDomains)("ngForTrackBy",a.trackByFn)}}const fe=function(n){return{transform:n}};function _e(n,o){if(1&n&&(t.TgZ(0,"div",5,6)(2,"table",7,8)(4,"tbody")(5,"tr"),t._UZ(6,"td",9),t.TgZ(7,"td",10),t._uU(8,"Fault Domain"),t.qZA()(),t.TgZ(9,"tr"),t.YNc(10,ce,2,4,"td",11),t.qZA(),t.YNc(11,ue,5,7,"tr",12),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngStyle",t.VKq(6,fe,e.scale)),t.xp6(5),t.Q6J("colSpan",e.data.nodes.faultDomains.length),t.xp6(3),t.Q6J("ngForOf",e.data.nodes.faultDomains)("ngForTrackBy",e.trackByFn),t.xp6(1),t.Q6J("ngForOf",e.data.nodes.upgradeDomains)("ngForTrackBy",e.trackByFn)}}let $=(()=>{class n extends u.J{constructor(e,i){super(i),this.data=e,this.nodes=[],this.groupByNodeType=!1,this.showScaleButton=!1,this.scaleToFit=!1,this.scale=n.baseScale}ngOnChanges(){this.updateNodes(this.nodes),this.onResize()}onResize(){if(this.map&&this.container){const e=Math.min(1,this.container.nativeElement.clientWidth/(this.map.nativeElement.clientWidth+20));this.showScaleButton=e<1,this.scale=this.showScaleButton&&this.scaleToFit?`scale(${e})`:n.baseScale}else this.scale=n.baseScale}refresh(e){return this.data.nodes.refresh(e)}updateNodes(e){this.data.nodes.ensureInitialized().subscribe(()=>{const i={};this.data.nodes.faultDomains.forEach(a=>{i[a]=[],this.data.nodes.upgradeDomains.forEach(s=>{i[`${a}${s}`]=[],i[s]=[]})}),e.forEach(a=>{i[a.faultDomain+a.upgradeDomain].push(a),i[a.faultDomain].push(a),i[a.upgradeDomain].push(a)}),this.matrix=i})}trackByFn(e,i){return i}}return n.baseScale="scale(1)",n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-map"]],viewQuery:function(e,i){if(1&e&&(t.Gf(re,5),t.Gf(le,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.container=a.first),t.iGM(a=t.CRH())&&(i.map=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)},inputs:{listTemplate:"listTemplate",nodes:"nodes",groupByNodeType:"groupByNodeType"},features:[t.qOj,t.TTD],decls:4,vars:2,consts:[[1,"detail-pane"],["data-cy","clustermap"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"state","stateChange"],[1,"table-responsive"],["container",""],["role","presentation",1,"table","map-table",2,"transform-origin","0 0",3,"ngStyle"],["map",""],["colspan","2","rowspan","2",1,"legend"],[1,"legend",3,"colSpan"],["class","header top-side",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"header","top-side"],[3,"nodes","moreInfo","vertical","title"],["class","legend",3,"rowSpan","ngClass",4,"ngIf"],[1,"header","sticky","left-side"],[3,"nodes","moreInfo","title","vertical"],["style","color: white;",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend",3,"rowSpan","ngClass"],[1,"upgrade-domain"],[2,"color","white"],["style","color: white;",4,"ngIf"],[3,"nodes","listTemplate","title","groupByNodeType"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,pe,3,1,"label",2),t.YNc(3,_e,12,8,"div",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.showScaleButton),t.xp6(1),t.Q6J("ngIf",i.nodes.length>=0&&i.matrix))},directives:[l.O5,J.n,l.PC,l.sg,Gt,l.mk,se],styles:[".sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0px;z-index:3}table[_ngcontent-%COMP%]{margin:0}.first[_ngcontent-%COMP%]{padding:10px!important;position:relative}.upgrade-domain[_ngcontent-%COMP%]{-ms-transform:rotate(270deg);transform:rotate(270deg);margin:auto;position:absolute;-ms-transform-origin:left;transform-origin:left;top:25%;width:120px}table.table.map-table[_ngcontent-%COMP%]{width:auto}table.table.map-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td.header[_ngcontent-%COMP%]{border-bottom-color:var(--primary-background-color)}table.table.map-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:3px;border:1px solid var(--accent-underline)}table.table.map-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.legend[_ngcontent-%COMP%]{color:var(--font-primary-color);font-weight:var(--font-weight-semibold);padding:5px;border:none}table.table.map-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.header[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:5px;color:#939393;border-left-color:var(--primary-background-color);background-color:var(--primary-background-color)}table.table.map-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.header[_ngcontent-%COMP%]:last-child{border-right-color:var(--primary-background-color)}"]}),n})();function xe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-metric-tile",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return c.updateSelectedMetric(s,c.metricsViewModel.metricsWithCapacities)}),t.qZA()}2&n&&t.Q6J("metric",o.$implicit)}function Ce(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-metric-tile",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return c.updateSelectedMetric(s,c.metricsViewModel.metricsWithoutCapacities)}),t.qZA()}2&n&&t.Q6J("metric",o.$implicit)}function ve(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-metric-tile",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return c.updateSelectedMetric(s,c.metricsViewModel.systemMetrics)}),t.qZA()}2&n&&t.Q6J("metric",o.$implicit)}function be(n,o){if(1&n&&t._UZ(0,"app-bar-chart",25),2&n){const e=t.oxw(2);t.Q6J("xAxisCategories",e.tableData.categories)("dataSet",e.tableData.dataPoints)("title",e.tableData.title)("tooltip",e.tableData.tooltipFunction)}}function ye(n,o){if(1&n&&(t.TgZ(0,"div",29)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw().data;t.xp6(2),t.hij("",e.displayName," :"),t.xp6(2),t.Oqu(i.loadInformation.metrics[e.name])}}function Te(n,o){if(1&n&&t.YNc(0,ye,5,2,"div",28),2&n){const e=t.oxw(3);t.Q6J("ngForOf",e.metricsViewModel.selectedMetrics)}}function we(n,o){if(1&n&&(t.YNc(0,Te,1,1,"ng-template",null,26,t.W1O),t._UZ(2,"app-map",27)),2&n){const e=t.MAs(1),i=t.oxw(2);t.xp6(2),t.Q6J("listTemplate",e)("nodes",i.filteredNodes)}}const Ze=function(n){return{"max-width":n}};function Ne(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",2)(2,"div")(3,"div")(4,"button",3),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleSide()}),t._uU(5,"Hide "),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"app-node-filter",6),t.NdJ("filteredNodes",function(a){return t.CHM(e),t.oxw().setNodes(a)}),t.qZA()(),t.TgZ(9,"app-collapse-container",7)(10,"div",8),t._uU(11," Resource Capacity "),t.qZA(),t.TgZ(12,"div",9)(13,"label",10)(14,"app-toggle",11),t.NdJ("stateChange",function(a){return t.CHM(e),t.oxw().metricsViewModel.normalizeMetricsData=a}),t.qZA(),t._uU(15," Normalize metric data "),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,xe,1,1,"app-metric-tile",13),t.qZA()()(),t.TgZ(18,"app-collapse-container",14)(19,"div",8),t._uU(20," Load Metrics "),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"app-warning",15),t.TgZ(23,"div",12),t.YNc(24,Ce,1,1,"app-metric-tile",13),t.qZA()()(),t.TgZ(25,"app-collapse-container",16)(26,"div",8),t._uU(27," system Metrics "),t.qZA(),t.TgZ(28,"div",9)(29,"div",12),t.YNc(30,ve,1,1,"app-metric-tile",13),t.qZA()()()()(),t.TgZ(31,"div",17)(32,"div",18,19)(34,"div",20)(35,"a",21),t._uU(36," Chart "),t.qZA(),t.YNc(37,be,1,4,"ng-template",22),t.qZA(),t.TgZ(38,"div",20)(39,"a",21),t._uU(40," Map "),t.qZA(),t.YNc(41,we,3,2,"ng-template",22),t.qZA()(),t._UZ(42,"div",23),t.qZA()()()}if(2&n){const e=t.MAs(33),i=t.oxw();t.xp6(6),t.Q6J("ngStyle",t.VKq(12,Ze,i.showOptions?"100%":"0")),t.xp6(2),t.Q6J("nodes",i.nodes.collection)("showGroupByNodeType",!1),t.xp6(6),t.Q6J("state",i.metricsViewModel.normalizeMetricsData),t.xp6(3),t.Q6J("ngForOf",i.metricsViewModel.metricsWithCapacities),t.xp6(7),t.Q6J("ngForOf",i.metricsViewModel.metricsWithoutCapacities),t.xp6(1),t.Q6J("collapsed",!0),t.xp6(5),t.Q6J("ngForOf",i.metricsViewModel.systemMetrics),t.xp6(2),t.Q6J("destroyOnHide",!1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(4),t.Q6J("ngbNavItem",2),t.xp6(4),t.Q6J("ngbNavOutlet",e)}}function Me(n,o){1&n&&(t.TgZ(0,"div",30),t._uU(1," Loading Metrics\n"),t.qZA())}let Oe=(()=>{class n extends u.J{constructor(e,i,a){super(a),this.data=e,this.settings=i,this.tableData={dataPoints:[],categories:[],title:"",tooltipFunction:null},this.showOptions=!0,this.filteredNodes=[]}setup(){this.clusterLoadInformation=this.data.clusterLoadInformation,this.nodes=this.data.nodes}updateSelectedMetric(e,i){this.metricsViewModel.toggleMetric(e,i),this.updateViewMetric()}updateViewMetric(){this.tableData={dataPoints:[],categories:[],title:"Metrics",tooltipFunction:null};const e=this.metricsViewModel.selectedMetrics.map(s=>({label:s.displayName,data:[]}));let i=!1;const a={};this.metricsViewModel.filteredNodeLoadInformation(this.filteredNodes).sort((s,c)=>s.name.localeCompare(c.name)).forEach(s=>{this.metricsViewModel.selectedMetrics.forEach((c,_)=>{const x=c.hasCapacity&&this.metricsViewModel.normalizeMetricsData,S=s.nodeLoadMetricInformation.find(Z=>Z.name===c.name);let R=+S.raw.NodeLoad;if(x){i=!0,R=S.loadCapacityRatio;const Z=S;a[`${s.raw.NodeName}-${c.displayName}`]=`${Z.parent.name}: ${Z.raw.NodeLoad}${Z.hasCapacity?` / ${Z.raw.NodeCapacity} (${Z.loadCapacityRatioString})`:""}`}else c.hasCapacity&&(R=Math.max(+S.raw.NodeLoad,+S.raw.NodeCapacity));e[_].data.push(R)}),this.tableData.categories.push(s.raw.NodeName)}),i&&(this.tableData.tooltipFunction=function(){return a[`${this.x}-${this.series.name}`]}),this.tableData.dataPoints=e}toggleSide(){this.showOptions=!this.showOptions,setTimeout(()=>{window.dispatchEvent(new Event("resize"))},10)}refresh(e){return(0,M.D)([this.nodes.refresh(e),this.clusterLoadInformation.refresh(e)]).pipe((0,L.zg)(()=>{this.metricsViewModel||(this.metricsViewModel=this.settings.getNewOrExistingMetricsViewModel(this.clusterLoadInformation));const i=this.nodes.collection.map(a=>a.loadInformation.refresh(e));return(0,M.D)(i).pipe((0,g.U)(()=>{this.metricsViewModel.refresh(),this.updateViewMetric()}))}))}setNodes(e){this.filteredNodes=e,this.updateViewMetric()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(m.g),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-metrics"]],features:[t.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["style","text-align: center;",4,"ngIf"],[2,"display","flex","max-width","100%","flex-wrap","wrap"],[1,"simple-button",3,"click"],[1,"options-panel",3,"ngStyle"],[1,"essen-pane","filter-container"],[3,"nodes","showGroupByNodeType","filteredNodes"],["buttonClass","underline","sectionName","Resource Capacity",1,"metrics-column"],["collapse-header","",1,"underline","text-center","title-container"],["collapse-body",""],[2,"margin-top","10px"],[3,"state","stateChange"],[1,"metrics-column"],[3,"metric","click",4,"ngFor","ngForOf"],["buttonClass","underline","sectionName","Load Metrics",1,"metrics-column"],["iconSize","mif-2x","description","Count, Primary Count, and Replica Count will not include services that use custom metrics"],["buttonClass","underline","sectionName","system Metrics",1,"metrics-column",3,"collapsed"],["data-cy","tabs",1,"layout-container"],["ngbNav","",1,"nav-wrapper",3,"destroyOnHide"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",2,"font-size","12pt"],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"metric","click"],[1,"dynamic-bar-chart",3,"xAxisCategories","dataSet","title","tooltip"],["customWrapperTemplate",""],[3,"listTemplate","nodes"],["class","node-row-item hover-row",4,"ngFor","ngForOf"],[1,"node-row-item","hover-row"],[2,"text-align","center"]],template:function(e,i){1&e&&(t.YNc(0,Ne,43,14,"div",0),t.YNc(1,Me,2,0,"div",1)),2&e&&(t.Q6J("ngIf",i.metricsViewModel),t.xp6(1),t.Q6J("ngIf",!i.metricsViewModel))},directives:[l.O5,l.PC,j,y.P,J.n,l.sg,Et,Lt.a,p.Pz,p.nv,p.Vx,p.uN,Vt,$,p.tO],styles:[".checkbox-container[_ngcontent-%COMP%]{display:inline-block;margin-bottom:12px}.checkbox-container[_ngcontent-%COMP%]:not(:first-child){margin-left:130px}.checkbox-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}.metric-column-title[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--accent-underline);margin-right:12px}.metrics-column[_ngcontent-%COMP%]{overflow-x:hidden;width:300px;margin-top:10px}.filter-container[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:10px}.title-container[_ngcontent-%COMP%]{height:28px}.layout-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex:1;flex:1;margin-left:15px;min-width:1px}.layout-container[_ngcontent-%COMP%]   .dynamic-bar-chart[_ngcontent-%COMP%]{-ms-flex:1;flex:1;min-width:0px}@media (max-width: 400px){.layout-container[_ngcontent-%COMP%]{min-width:280px}}.options-panel[_ngcontent-%COMP%]{overflow:hidden;transition:.25s max-width;max-width:100%}.node-row-item[_ngcontent-%COMP%]{white-space:nowrap;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin:2px;padding:2px;border-radius:var(--primary-border-radius)}"]}),n})(),Se=(()=>{class n extends u.J{constructor(e,i){super(e),this.dataService=i,this.filteredNodes=[],this.groupByNodeType=!1}setup(){this.nodes=this.dataService.nodes}refresh(e){return this.nodes.refresh(e)}setNodes(e){this.filteredNodes=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.zs3),t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-clustermap"]],features:[t.qOj],decls:4,vars:4,consts:[["data-cy","clustermap-container"],[1,"essen-pane",2,"max-width","400px"],[3,"nodes","groupByNodeType","filteredNodes","groupByNodeTypeChange"],[3,"nodes","groupByNodeType"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-node-filter",2),t.NdJ("filteredNodes",function(s){return i.setNodes(s)})("groupByNodeTypeChange",function(s){return i.groupByNodeType=s}),t.qZA()(),t._UZ(3,"app-map",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("nodes",i.nodes.collection)("groupByNodeType",i.groupByNodeType),t.xp6(1),t.Q6J("nodes",i.filteredNodes)("groupByNodeType",i.groupByNodeType))},directives:[j,$],styles:[""]}),n})();var Ie=r(3466),Pe=r(1455),O=r(2055),Je=r(2916),Fe=r(2684);let k=(()=>{class n extends Ie.F{constructor(e){super(e),this.data=e,this.isAvailable=!0,this.isNative=!0,this.root=new U,this.initialized=!1,this.cachedCurrentDirectoryFolderSizes={},this.pathBreadcrumbItems=[],this.isLoadingFolderContent=!1,this.currentDirectoryBeingLoaded=null,this.root.path="",this.root.displayName="Image Store",this.currentFolder=this.root,this.pathBreadcrumbItems=[{path:this.root.path,name:this.root.displayName}];const i=new Pe.lQ(e);i.refresh().subscribe(()=>{this.connectionString=i.imageStoreConnectionString,this.isNative="fabric:imagestore"===this.connectionString.toLowerCase(),this.isNative&&(this.expandFolder(this.currentFolder.path),this.isAvailable=!0,this.initialized=!0)})}static slashDirection(e){return e.indexOf("\\")>-1}static chopPath(e){return n.slashDirection(e)?e.split("\\"):e.split("/")}retrieveNewData(e){return!this.isNative||this.isLoadingFolderContent||!this.initialized||this.expandFolder(this.currentFolder.path),(0,C.of)(null)}updateInternal(){return(0,C.of)(!0)}expandFolder(e,i=!1){this.currentDirectoryBeingLoaded!==e&&(this.isLoadingFolderContent=!0,this.currentDirectoryBeingLoaded=e,this.loadFolderContent(e).subscribe(a=>{if(this.currentDirectoryBeingLoaded===e){this.setCurrentFolder(e,a,i);const s=this.pathBreadcrumbItems.findIndex(c=>c.path===this.currentFolder.path);s>-1?this.pathBreadcrumbItems=this.pathBreadcrumbItems.slice(0,s+1):this.pathBreadcrumbItems.push({path:this.currentFolder.path,name:this.currentFolder.displayName}),this.isLoadingFolderContent=!1,this.currentDirectoryBeingLoaded=null}},a=>{this.currentDirectoryBeingLoaded===e&&(this.isLoadingFolderContent=!1,404===a.status&&(this.data.message.showMessage(`Directory ${e} does not appear to exist anymore. Navigating back to the base of the image store directory.`,Fe.C.Warn),this.expandFolder(this.root.path)))}))}deleteContent(e){if(!e)return(0,C.of)(null);let i=this.currentFolder.childrenFolders.find(a=>a.path===e);return i||(i=this.currentFolder.childrenFiles.find(a=>a.path===e)),!i||i.isReserved?(0,C.of)(null):this.data.restClient.deleteImageStoreContent(e).pipe((0,g.U)(()=>this.refresh()))}getCachedFolderSize(e){let i=this.cachedCurrentDirectoryFolderSizes[e];return i||(i={size:-1,loading:!1},this.cachedCurrentDirectoryFolderSizes[e]=i),i}getFolderSize(e){return this.data.restClient.getImageStoreFolderSize(e)}setCurrentFolder(e,i,a){a&&(this.cachedCurrentDirectoryFolderSizes={});const s=new U;s.path=e;const c=n.chopPath(e);s.displayName=c[c.length-1],s.childrenFolders=i.StoreFolders.map(_=>{const x=new U(_);return x.path in this.cachedCurrentDirectoryFolderSizes&&(x.size=this.cachedCurrentDirectoryFolderSizes[x.path].size),x}),s.childrenFiles=i.StoreFiles.map(_=>new Ae(_)),s.allChildren=[].concat(s.childrenFiles).concat(s.childrenFolders),s.fileCount=s.childrenFiles.length,this.currentFolder=s}loadFolderContent(e,i=!1){return new Je.y(a=>{this.data.restClient.getImageStoreContent(e).subscribe(s=>{i&&this.setCurrentFolder(e,s,!1),a.next(s)},s=>{404===s.status&&e===this.root.path?a.next({StoreFiles:[],StoreFolders:[]}):a.error(s)},()=>{a.complete()})})}}return n.reservedFileName="_.dir",n})();class W{constructor(o){this.uniqueId=o,this.path=o;const e=k.chopPath(o);this.displayName=e[e.length-1],this.isReserved="Store"===e[0]||"WindowsFabricStore"===e[0]||this.displayName===k.reservedFileName}}class U extends W{constructor(o){super(o?o.StoreRelativePath:""),this.isFolder=-1,this.size=-1,this.isExpanded=!1,o&&(this.path=o.StoreRelativePath,this.fileCount=+o.FileCount)}}class Ae extends W{constructor(o){super(o?o.StoreRelativePath:""),this.isFolder=1,this.size=0,o&&(this.path=o.StoreRelativePath,this.size=Number(o.FileSize),this.displayedSize=O.c.getFriendlyFileSize(this.size),this.version=o.FileVersion?o.FileVersion.VersionNumber:"",this.modifiedDate=o.ModifiedDate)}}var h=r(6174);function ke(n,o){if(1&n&&(t.TgZ(0,"span",2),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.item.displayedSize," ")}}function Ue(n,o){if(1&n&&t._UZ(0,"span",8),2&n){const e=t.oxw(2);t.Q6J("title",e.date)}}function De(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span")(1,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return a.loadFolderSize(a.item)}),t._uU(2," Load Size "),t.qZA()()}}const Qe=function(n){return{rotate:n}};function ze(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return a.loadFolderSize(a.item)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Qe,e.loading))}}function Re(n,o){if(1&n&&(t.TgZ(0,"span",3),t.YNc(1,Ue,1,1,"span",4),t.TgZ(2,"span",5),t._uU(3),t.qZA(),t.YNc(4,De,3,0,"span",6),t.YNc(5,ze,1,3,"ng-template",null,7,t.W1O),t.qZA()),2&n){const e=t.MAs(6),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.date),t.xp6(2),t.hij(" ",i.size," "),t.xp6(1),t.Q6J("ngIf",i.loadButton)("ngIfElse",e)}}let qe=(()=>{class n{constructor(){this.size="",this.loading=!1}ngOnInit(){this.ngOnChanges()}ngOnChanges(){if(1===this.item.isFolder)return;const e=this.listSetting.imagestore.getCachedFolderSize(this.item.path);this.size=e.size>-1?O.c.getFriendlyFileSize(e.size):"";const i=e.loading?"rotate":"";this.date=e.date?e.date.toLocaleString():"",this.loadButton=0===this.size.length&&!i,this.loading=e.loading}loadFolderSize(e){if(-1===e.isFolder){const i=this.listSetting.imagestore.getCachedFolderSize(e.path);if(i.loading)return;this.listSetting.imagestore.cachedCurrentDirectoryFolderSizes[e.path].loading=!0,i.loading=!0,this.loading=!0,this.listSetting.imagestore.getFolderSize(e.path).subscribe(a=>{this.listSetting.imagestore.cachedCurrentDirectoryFolderSizes[e.path]={size:+a.FolderSize,loading:!1,date:new Date},e.size=+a.FolderSize,e.displayedSize=O.c.getFriendlyFileSize(+a.FolderSize),this.listSetting.imagestore.currentFolder.childrenFolders.find(s=>s.path===e.path).size=+a.FolderSize,this.listSetting.imagestore.allChildren=[].concat(this.listSetting.imagestore.allChildren),this.ngOnChanges()},()=>{this.listSetting.imagestore.cachedCurrentDirectoryFolderSizes[e.path].loading=!1,this.loading=!1}),this.ngOnChanges()}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-display-size-column"]],features:[t.TTD],decls:2,vars:2,consts:[["style","cursor: initial",4,"ngIf"],["style","white-space: nowrap;",4,"ngIf"],[2,"cursor","initial"],[2,"white-space","nowrap"],["class","mif-watch","aria-label","timestamp",3,"title",4,"ngIf"],[2,"cursor","initial","padding-right","3px"],[4,"ngIf","ngIfElse"],["elseBlock",""],["aria-label","timestamp",1,"mif-watch",3,"title"],["type","button",1,"simple-button",3,"click"],["title","Reload folder size",1,"mif-refresh","mif-2x",3,"ngClass","click"]],template:function(e,i){1&e&&(t.YNc(0,ke,2,1,"span",0),t.YNc(1,Re,7,4,"span",1)),2&e&&(t.Q6J("ngIf",1===i.item.isFolder),t.xp6(1),t.Q6J("ngIf",-1===i.item.isFolder))},directives:[l.O5,l.mk],styles:[""]}),n})();class Ye extends h.NL{constructor(o){super("displayedSize","Size",{sortPropertyPaths:["isFolder","size","displayName"]}),this.template=qe,this.imagestore=o}}function Be(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){return t.CHM(e),t.oxw().openFolder()}),t.TgZ(1,"span",3),t._UZ(2,"span",4),t.TgZ(3,"span",5),t._uU(4),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("title",e.item.path),t.xp6(1),t.Oqu(e.item.displayName)}}function Ee(n,o){if(1&n&&(t.TgZ(0,"div",6),t._UZ(1,"span",7),t.TgZ(2,"span",5),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("title",e.item.path),t.xp6(1),t.Oqu(e.item.displayName)}}let Le=(()=>{class n{constructor(){}openFolder(){this.listSetting.imagestore.expandFolder(this.item.path)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-display-name-column"]],decls:3,vars:2,consts:[["class","link image-store-item-name","style","display: inline-block; cursor: pointer; white-space: nowrap;",3,"click",4,"ngIf"],["class","image-store-item-name","style","display: inline-block; cursor: initial; white-space: nowrap;",4,"ngIf"],[1,"link","image-store-item-name",2,"display","inline-block","cursor","pointer","white-space","nowrap",3,"click"],["href","","role","button",1,"list-item-name",2,"display","table-cell"],[1,"bowtie-icon","bowtie-folder"],[3,"title"],[1,"image-store-item-name",2,"display","inline-block","cursor","initial","white-space","nowrap"],[1,"bowtie-icon","bowtie-file"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,Be,5,2,"div",0),t.YNc(2,Ee,4,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",-1===i.item.isFolder),t.xp6(1),t.Q6J("ngIf",1===i.item.isFolder))},directives:[l.O5],styles:[""]}),n})();class je extends h.NL{constructor(o){super("displayName","name",{sortPropertyPaths:["isFolder","displayName"]}),this.template=Le,this.imagestore=o}}function Ve(n,o){1&n&&(t.TgZ(0,"div"),t._UZ(1,"span",2),t.qZA())}function He(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t._UZ(1,"button",4),t.TgZ(2,"div",5)(3,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteItem()}),t._uU(4,"Delete"),t.qZA()()()}}let $e=(()=>{class n{constructor(e){this.data=e}deleteItem(){new P.et(this.data.dialog,"","Delete Image Store content","",()=>this.listSetting.imagestore.deleteContent(this.item.path),()=>!0,"Confirm Deletion",`Delete ${this.item.path}? This action cannot be undone`,this.item.path).run()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-folder-actions"]],decls:3,vars:2,consts:[[4,"ngIf"],["ngbDropdown","","container","body",4,"ngIf"],[1,"mif-lock","mif-2x"],["ngbDropdown","","container","body"],["ngbDropdownToggle","","aria-label","See image store item actions.",1,"simple-button"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,Ve,2,0,"div",0),t.YNc(2,He,5,0,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.item.isReserved),t.xp6(1),t.Q6J("ngIf",!i.item.isReserved))},directives:[l.O5,p.jt,p.iD,p.Vi,p.TH],styles:[""]}),n})();class We extends h.NL{constructor(o){super("","",{canNotExport:!0}),this.imagestore=o,this.template=$e}}function Xe(n,o){1&n&&(t.TgZ(0,"div",8)(1,"strong"),t._uU(2,"Viewing image store content is only supported for the native Image Store (fabric:ImageStore)."),t.qZA()())}function Ge(n,o){1&n&&(t.TgZ(0,"div",8)(1,"strong"),t._uU(2,"Image store viewer does not appear to be supported on this cluster."),t.qZA()())}function Ke(n,o){1&n&&(t.TgZ(0,"span",20),t._UZ(1,"span",21),t.qZA())}function tn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span")(1,"span",22),t._uU(2,"/"),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).openFolder(s.path)}),t._uU(4),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(3),t.Q6J("disabled",e===i.imagestoreRoot.pathBreadcrumbItems[i.imagestoreRoot.pathBreadcrumbItems.length-1]),t.xp6(1),t.hij(" ",e.name," ")}}function en(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Loading folder: ",e.imagestoreRoot.currentDirectoryBeingLoaded||"root"," ")}}function nn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"h4"),t._uU(2,"Store Content"),t.qZA(),t.TgZ(3,"div",10),t.YNc(4,Ke,2,0,"span",11),t.TgZ(5,"span")(6,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.openFolder(a.imagestoreRoot.pathBreadcrumbItems[0].path)}),t._uU(7),t.qZA()(),t.YNc(8,tn,5,2,"span",13),t._UZ(9,"br"),t.TgZ(10,"div",14),t.YNc(11,en,2,1,"div",15),t.qZA()(),t._UZ(12,"app-detail-list",16),t.TgZ(13,"div")(14,"div",17),t._UZ(15,"span",18),t.TgZ(16,"div",19),t._uU(17," Large folders can take longer to load. "),t._UZ(18,"br"),t._uU(19," Folder sizes loaded are snapshots at that time and only updated by reloading that folder size. "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.imagestoreRoot.isLoadingFolderContent),t.xp6(2),t.Q6J("disabled",e.imagestoreRoot.currentFolder.path===e.imagestoreRoot.pathBreadcrumbItems[0].path),t.xp6(1),t.hij(" ",e.imagestoreRoot.pathBreadcrumbItems[0].name," "),t.xp6(1),t.Q6J("ngForOf",e.imagestoreRoot.pathBreadcrumbItems.slice(1,e.imagestoreRoot.pathBreadcrumbItems.length)),t.xp6(3),t.Q6J("ngIf",e.imagestoreRoot.isLoadingFolderContent),t.xp6(1),t.Q6J("list",e.imagestoreRoot.currentFolder.allChildren)("listSettings",e.fileListSettings)}}let on=(()=>{class n{constructor(e){this.settings=e}ngOnInit(){this.setup()}setup(){this.fileListSettings=this.settings.getNewOrExistingListSettings("imagestore",["name"],[new We(this.imagestoreRoot),new je(this.imagestoreRoot),new Ye(this.imagestoreRoot),new h.wI("modifiedDate","Date modified"),new h.NL("fileCount","Count of Files",{sortPropertyPaths:["isFolder","fileCount"]})])}openFolder(e){this.imagestoreRoot.expandFolder(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-imagestore-viewer"]],inputs:{imagestoreRoot:"imagestoreRoot"},decls:16,vars:4,consts:[["data-cy","imagestore",1,"detail-pane"],[1,"detail-pane","essen-pane"],[1,"table-responsive"],["role","presentation",1,"table","detail-table","table-layout-fixed",2,"width","100%"],["title","Understand the Image Store connection string setting","aria-label","Understand the Image Store connection string setting","href","https://aka.ms/sfx-help-imagestore-connectionstring","target","_blank"],["tabindex","0",1,"mif-info"],["class","alert alert-warning",4,"ngIf"],["class","detail-pane store-content-pane essen-pane",4,"ngIf"],[1,"alert","alert-warning"],[1,"detail-pane","store-content-pane","essen-pane"],[1,"image-store-breadcrumb"],["style","padding-right: 5px;",4,"ngIf"],["aria-label","click to go to root of image store",1,"clear-button",3,"disabled","click"],[4,"ngFor","ngForOf"],[2,"min-height","20px"],[4,"ngIf"],[3,"list","listSettings"],[2,"float","right","padding","15px 0 0 0","margin","0px"],["tabindex","0",1,"mif-info",2,"margin-right","2px","vertical-align","top"],[2,"display","inline-block"],[2,"padding-right","5px"],["aria-label","refresh","title","Loading folder content",1,"mif-refresh","mif-large","rotate"],[1,"dividing-slash"],["aria-label","click to open folder",1,"clear-button",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Configuration"),t.qZA(),t.TgZ(4,"div",2)(5,"table",3)(6,"tr")(7,"th"),t._uU(8,"Connection String "),t.TgZ(9,"a",4),t._UZ(10,"span",5),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.qZA()()()()(),t.YNc(13,Xe,3,0,"div",6),t.YNc(14,Ge,3,0,"div",6),t.YNc(15,nn,20,7,"div",7),t.qZA()),2&e&&(t.xp6(12),t.hij("",i.imagestoreRoot.connectionString," "),t.xp6(1),t.Q6J("ngIf",!i.imagestoreRoot.isNative),t.xp6(1),t.Q6J("ngIf",i.imagestoreRoot.isNative&&!i.imagestoreRoot.isAvailable),t.xp6(1),t.Q6J("ngIf",i.imagestoreRoot.isNative&&i.imagestoreRoot.isAvailable))},directives:[l.O5,l.sg,T.m],styles:[".dividing-slash[_ngcontent-%COMP%]{color:var(--font-primary-color);font-size:large}.image-store-breadcrumb[_ngcontent-%COMP%]{padding:10px;box-shadow:var(--primary-box-shadow);border-radius:5px;margin-top:5px;background-color:var(--accent-background-color);color:var(--font-primary-color)}h4[_ngcontent-%COMP%]{padding-bottom:10px}"]}),n})();function an(n,o){if(1&n&&t._UZ(0,"app-imagestore-viewer",1),2&n){const e=t.oxw();t.Q6J("imagestoreRoot",e.imageStore)}}let sn=(()=>{class n extends u.J{constructor(e,i,a){super(i),this.data=e,this.settings=a}setup(){this.imageStore=new k(this.data)}refresh(e){return this.imageStore.refresh(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3),t.Y36(m.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-imagestore"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"imagestoreRoot",4,"ngIf"],[3,"imagestoreRoot"]],template:function(e,i){1&e&&t.YNc(0,an,1,1,"app-imagestore-viewer",0),2&e&&t.Q6J("ngIf",i.imageStore)},directives:[l.O5,on],styles:[""]}),n})();var rn=r(3347);function ln(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-manifest-viewer",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("manifestName",e.clusterManifest.clusterManifestName)("manifest",e.clusterManifest.raw.Manifest)}}let pn=(()=>{class n extends u.J{constructor(e,i){super(i),this.data=e}setup(){this.clusterManifest=this.data.clusterManifest}refresh(e){return this.clusterManifest.refresh(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manifest"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"manifestName","manifest"]],template:function(e,i){1&e&&t.YNc(0,ln,2,2,"div",0),2&e&&t.Q6J("ngIf",i.clusterManifest&&i.clusterManifest.raw)},directives:[l.O5,rn.p],styles:[""]}),n})();var cn=r(8131);let dn=(()=>{class n{constructor(e,i){this.data=e,this.settings=i}ngOnInit(){this.listEventStoreData=[this.data.getClusterEventData(),this.data.getNodeEventData()],this.data.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isRepairManagerEnabled&&this.data.repairCollection.ensureInitialized().subscribe(()=>{this.listEventStoreData=this.listEventStoreData.concat([this.data.getRepairTasksData(this.settings)])})}),this.optionsConfig={enableNodes:!0,enableRepairTasks:!0}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(m.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-events"]],decls:2,vars:2,consts:[[3,"listEventStoreData","optionsConfig"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("listEventStoreData",i.listEventStoreData)("optionsConfig",i.optionsConfig))},directives:[cn.h],styles:[""]}),n})();var gn=r(7506),mn=r(1782),hn=r(2999);let un=(()=>{class n extends u.J{constructor(e,i,a){super(a),this.data=e,this.settings=i}setup(){this.backupPolicyListSettings=this.settings.getNewOrExistingBackupPolicyListSettings(),this.backupPolicies=this.data.backupPolicies,this.actions=new gn.w(this.data.telemetry),this.data.actionsEnabled()&&this.setupActions()}refresh(e){return this.data.backupPolicies.refresh(e)}setupActions(){this.actions.add(new P.VJ(this.data.dialog,"createBackupPolicy","Create Backup Policy","Creating",null,mn.n,()=>!0))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(m.g),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-backups"]],features:[t.qOj],decls:6,vars:3,consts:[[2,"height","50px"],["displayText","Backup Actions",2,"float","right",3,"actionCollection"],[1,"detail-pane","essen-pane"],[3,"list","listSettings"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-action-collection-drop-down",1),t.qZA(),t.TgZ(2,"div",2)(3,"h2"),t._uU(4,"Backup Policies"),t.qZA(),t._UZ(5,"app-detail-list",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("actionCollection",i.actions),t.xp6(4),t.Q6J("list",i.backupPolicies.collection)("listSettings",i.backupPolicyListSettings))},directives:[hn.b,T.m],styles:[""]}),n})();var fn=r(349),_n=r(9079);function xn(n,o){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}const Cn=["*"];let vn=(()=>{class n{constructor(){this.barClass="",this.text=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-text-scale-tile"]],inputs:{barClass:"barClass",title:"title",link:"link",text:"text"},ngContentSelectors:Cn,decls:9,vars:3,consts:[[1,"dashboard-wrapper"],[1,"dashboard","dashboard-small",2,"padding","11px 7px"],[1,"dashboard-tile"],[1,"dashboard-tile-inner"],[1,"dashboard-tile-leftbar",3,"ngClass"],[1,"dashboard-tile-title"],["class","dashboard-tile-innertext",4,"ngFor","ngForOf"],[1,"dashboard-tile-innertext"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"div",4),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.Hsn(7),t.YNc(8,xn,2,1,"div",6),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngClass",i.barClass),t.xp6(2),t.Oqu(i.title),t.xp6(2),t.Q6J("ngForOf",i.text))},directives:[l.mk,l.sg],styles:[".dashboard-container-small[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:270px}.chart-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.dashboard-wrapper[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--font-primary-color)!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{box-shadow:var(--primary-box-shadow);border-radius:var(--primary-border-radius);color:var(--font-primary-color);padding:7px;background:var(--primary-background-color);text-align:center;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard.has-view-path[_ngcontent-%COMP%]{cursor:pointer}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]{display:block;position:relative;text-align:left;width:100%;height:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding-left:16px!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar[_ngcontent-%COMP%]{width:6px;position:absolute;left:0;top:0;bottom:0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-active[_ngcontent-%COMP%]{background:var(--accent-darkblue)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-inactive[_ngcontent-%COMP%]{background:var(--accent-background-color)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-title[_ngcontent-%COMP%]{display:block;font-size:11pt;line-height:.9}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-number[_ngcontent-%COMP%]{display:block;font-size:72px;line-height:1;margin:20px 0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]{padding:17px 7px;position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:20px 5px 0;display:-ms-flexbox;display:flex;-ms-flex-pack:space-evenly;justify-content:space-evenly}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{-ms-flex:1;flex:1}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:var(--font-size-default)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:24pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]{padding:7px 12px;position:relative;height:100%;width:100%;overflow:hidden}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:0 0 0 20px;float:right}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{height:36px;padding:0 0 0 14px;margin:4px 0 8px}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:11pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:16pt;width:54px}.dashboard-tile[_ngcontent-%COMP%], .dashboard-tile-inner[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})();var X=r(7191),bn=r(2794),yn=r(5597);let Tn=(()=>{class n{constructor(){this.fontColor={color:"#fff"}}ngOnInit(){const e={chart:{type:"area",zoomType:"x",backgroundColor:"#262626"},title:{text:"Filter and sort the tables below",style:this.fontColor},subtitle:{style:this.fontColor,text:void 0===document.ontouchstart?"Click and drag in the plot area to zoom in":"Pinch the chart to zoom in"},yAxis:{title:{text:"Duration",style:this.fontColor},lineColor:"#fff",labels:{style:this.fontColor,formatter(){return yn.I.getDuration(this.value)}}},xAxis:{lineColor:"#fff",labels:{style:this.fontColor}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",itemStyle:{color:this.fontColor.color}},tooltip:{headerFormat:"<b>{series.name}</b><br />",formatter:(()=>{const i=this;return function(){const a=i.jobs.concat(i.jobs)[this.point.index];return`Job ${a.id} <br> ${this.point.series.name} : ${a.getHistoryPhase(this.point.series.name).duration} <br> Total Duration :  ${a.displayDuration}`}})()},plotOptions:{area:{stacking:"normal"}},rangeSelector:{verticalAlign:"bottom"},series:[{type:"area",name:"Restoring",color:"purple",data:[]},{type:"area",name:"Executing",color:"#7FBA00",data:[]},{type:"area",name:"Preparing",color:"#0075c9",data:[]}]};this.chart=(0,F.chart)("repair-job-chart-container",e),this.setGraph(this.jobs)}setGraph(e){try{this.chart&&(this.chart.series[2].setData(e.map(i=>i.getHistoryPhase("Preparing").durationMilliseconds)),this.chart.series[1].setData(e.map(i=>{var a;return(null===(a=i.getHistoryPhase("Executing"))||void 0===a?void 0:a.durationMilliseconds)||0})),this.chart.series[0].setData(e.map(i=>i.getHistoryPhase("Restoring").durationMilliseconds)),this.sortOrder&&this.chart.xAxis[0].setCategories(e.map(i=>O.c.result(i,this.sortOrder.displayPath?this.sortOrder.displayPath:this.sortOrder.propertyPath.join(".")))))}catch(i){console.log(i)}}ngOnChanges(){this.setGraph(this.jobs)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-repair-job-chart"]],inputs:{jobs:"jobs",sortOrder:"sortOrder"},features:[t.TTD],decls:1,vars:0,consts:[["id","repair-job-chart-container",2,"width","100%"]],template:function(e,i){1&e&&t._UZ(0,"div",0)},styles:[""]}),n})();function wn(n,o){if(1&n&&t._UZ(0,"app-dashboard-text-tile",20),2&n){const e=t.oxw(2);t.Q6J("barClass",e.repairTaskCollection.repairTasks.length>0?"badge-upgrade-active":"badge-upgrade-inactive")("count",e.repairTaskCollection.repairTasks.length)}}function Zn(n,o){if(1&n&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div",25),t._uU(3),t.qZA(),t.TgZ(4,"div",26),t._UZ(5,"span",27),t._uU(6),t.qZA()(),t.TgZ(7,"div",28)(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"div",29),t._UZ(11,"app-clip-board",30),t.qZA()()()),2&n){const e=o.$implicit;t.Q6J("ngClass",o.last?"":"bottom"),t.uIk("data-cy",e.primaryText),t.xp6(3),t.Oqu(e.primaryText),t.xp6(3),t.hij(" ",e.topCorner," "),t.xp6(3),t.hij(" ",e.secondaryText," "),t.xp6(2),t.Q6J("text",e.secondaryText)}}function Nn(n,o){if(1&n&&(t.TgZ(0,"app-dashboard-text-scale-tile",21)(1,"div"),t.YNc(2,Zn,12,6,"div",22),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.longestRunning)}}const Mn=function(n){return{"font-size":n}};function On(n,o){if(1&n&&(t.TgZ(0,"div",34)(1,"div",35)(2,"div",36),t._uU(3),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div",29),t._UZ(7,"app-clip-board",30),t.qZA()()()),2&n){const e=o.$implicit,i=o.index;t.xp6(2),t.Q6J("ngStyle",t.VKq(4,Mn,25-5*i+"px")),t.xp6(1),t.hij("",e.value," "),t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Q6J("text",e.key)}}function Sn(n,o){if(1&n&&(t.TgZ(0,"app-dashboard-text-scale-tile",31)(1,"div",32),t.YNc(2,On,8,6,"div",33),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.MostCommonActions)}}function In(n,o){if(1&n&&(t.TgZ(0,"div",38)(1,"div",39)(2,"app-collapse-container",40)(3,"h4",7),t._uU(4," Repair Task timeline Legend "),t.qZA(),t.TgZ(5,"div",41)(6,"div",42)(7,"div",43),t._uU(8," The repair job is still in progress "),t.qZA()(),t.TgZ(9,"div",44)(10,"div",43),t._uU(11," The repair job has finished with a non success code "),t.qZA()(),t.TgZ(12,"div",45)(13,"div",43),t._uU(14," The repair job has finished with a success code "),t.qZA()()()()(),t.TgZ(15,"div",46),t._UZ(16,"app-event-store-timeline",47),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(16),t.Q6J("events",e.timelineData)("fitOnDataChange",!1)("displayMoveToStart",!1)("displayMoveToEnd",!1)}}function Pn(n,o){if(1&n&&t.YNc(0,In,17,4,"div",37),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.timelineData)}}function Jn(n,o){if(1&n&&t._UZ(0,"app-repair-job-chart",48),2&n){const e=t.oxw(2);t.Q6J("jobs",e.chartJobs)("sortOrder",e.ordering)}}function Fn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1),t.YNc(2,wn,1,2,"app-dashboard-text-tile",2),t.YNc(3,Nn,3,1,"app-dashboard-text-scale-tile",3),t.YNc(4,Sn,3,1,"app-dashboard-text-scale-tile",4),t.qZA(),t.TgZ(5,"div",5)(6,"app-collapse-container",6)(7,"h4",7),t._uU(8," Visualization "),t.qZA(),t.TgZ(9,"div",8)(10,"div",9,10),t.NdJ("navChange",function(){return t.CHM(e),t.oxw().changeChart()}),t.TgZ(12,"div",11)(13,"a",12),t._uU(14," Timeline "),t.qZA(),t.YNc(15,Pn,1,1,"ng-template",13),t.qZA(),t.TgZ(16,"div",11)(17,"a",12),t._uU(18," Duration Graph "),t.qZA(),t.YNc(19,Jn,1,2,"ng-template",13),t.qZA()(),t._UZ(20,"div",14),t.qZA()()(),t.TgZ(21,"div",5)(22,"app-collapse-container",15)(23,"h4",7),t._uU(24," Pending Repair Tasks "),t.qZA(),t.TgZ(25,"app-detail-list",16),t.NdJ("sorted",function(a){return t.CHM(e),t.oxw().sorted(a,!1)}),t.qZA()()(),t.TgZ(26,"div",17)(27,"app-collapse-container",18)(28,"h4",7),t._uU(29," Completed Repair Tasks "),t.qZA(),t.TgZ(30,"app-detail-list",19),t.NdJ("sorted",function(a){return t.CHM(e),t.oxw().sorted(a)})("sortOrdering",function(a){return t.CHM(e),t.oxw().setSortOrdering(a)}),t.qZA()()()()}if(2&n){const e=t.MAs(11),i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.repairTaskCollection.isInitialized),t.xp6(1),t.Q6J("ngIf",i.longestRunning.length>0),t.xp6(1),t.Q6J("ngIf",i.MostCommonActions.length>0),t.xp6(6),t.Q6J("destroyOnHide",!1),t.xp6(10),t.Q6J("ngbNavOutlet",e),t.xp6(5),t.Q6J("list",i.repairTaskCollection.repairTasks)("listSettings",i.repairTaskListSettings),t.xp6(5),t.Q6J("list",i.repairTaskCollection.completedRepairTasks)("listSettings",i.completedRepairTaskListSettings)}}let An=(()=>{class n extends u.J{constructor(e,i,a,s){super(i),this.data=e,this.settings=a,this.telemService=s,this.longestRunning=[],this.MostCommonActions=[],this.sortedRepairTasks=[],this.sortedCompletedRepairTasks=[],this.chartJobs=[]}setup(){this.repairTaskCollection=this.data.repairCollection,this.timelineGenerator=new fn.Ls,this.repairTaskListSettings=this.settings.getNewOrExistingPendingRepairTaskListSettings(),this.completedRepairTaskListSettings=this.settings.getNewOrExistingCompletedRepairTaskListSettings()}sorted(e,i=!0){i?this.sortedCompletedRepairTasks=e:this.sortedRepairTasks=e,this.chartJobs=this.sortedCompletedRepairTasks.concat(this.sortedRepairTasks),this.timelineData=this.timelineGenerator.generateTimeLineData(this.chartJobs)}setSortOrdering(e){this.ordering=e}refresh(e){return this.repairTaskCollection.refresh(e).pipe((0,g.U)(()=>{const i=new O.A;this.repairTaskCollection.collection.forEach(c=>i.add(c.raw.Action)),this.MostCommonActions=i.mostCommon().slice(0,3),this.longestRunning=[];const a=this.repairTaskCollection.longRunningApprovalJob;a&&this.longestRunning.push({primaryText:"Approving",secondaryText:a.id,topCorner:a.displayDuration});const s=this.repairTaskCollection.longestExecutingJob;s&&this.longestRunning.push({primaryText:"Executing",secondaryText:s.id,topCorner:s.displayDuration})}))}changeChart(){this.telemService.trackActionEvent(v.Fu.RepairChart,null,v.Fu.RepairChart)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3),t.Y36(m.g),t.Y36(_n.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-repair-tasks"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["data-cy","tiles",1,"tile-container"],["title","Repair Jobs In Progress","style","display: block",3,"barClass","count",4,"ngIf"],["barClass","badge-upgrade-active","title","Longest Running","class","long","style","display: block","data-cy","long",4,"ngIf"],["class","long","title","Top Repair Job Actions","style","display: block","data-cy","top",4,"ngIf"],["data-cy","pendingjobs",1,"detail-pane","essen-pane"],["sectionName","Visualization"],["collapse-header",""],["collapse-body",""],["ngbNav","",1,"nav-wrapper",3,"destroyOnHide","navChange"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink","",2,"font-size","12pt"],["ngbNavContent",""],[3,"ngbNavOutlet"],["sectionName","Pending Repair Tasks"],["collapse-body","",3,"list","listSettings","sorted"],["data-cy","completedjobs",1,"detail-pane","essen-pane"],["collapsed","true","sectionName","Completed Repair Tasks"],["collapse-body","",3,"list","listSettings","sorted","sortOrdering"],["title","Repair Jobs In Progress",2,"display","block",3,"barClass","count"],["barClass","badge-upgrade-active","title","Longest Running","data-cy","long",1,"long",2,"display","block"],["style","padding-bottom: 5px;","class","highlight-hover",3,"ngClass",4,"ngFor","ngForOf"],[1,"highlight-hover",2,"padding-bottom","5px",3,"ngClass"],[1,"tile-item"],[1,"overflow-text",2,"font-size","15px"],[1,"left-auto","centering-row"],[1,"mif-watch","mif-lg"],[2,"display","flex","flex-direction","row"],[1,"left-auto"],[3,"text"],["title","Top Repair Job Actions","data-cy","top",1,"long",2,"display","block"],[2,"margin-top","5px"],["class","bottom",4,"ngFor","ngForOf"],[1,"bottom"],[1,"highlight-hover","tile-item"],[1,"tile-list-entry",3,"ngStyle"],["style","margin-bottom: 20px;",4,"ngIf"],[2,"margin-bottom","20px"],["data-cy","pendingjobs",1,"detail-pane",2,"margin-bottom","0px"],["sectionName","Pending Repair Tasks","collapsed","true"],["collapse-body","",2,"display","flex","flex-direction","row"],[1,"vis-item","vis-range","blue","example-wrapper"],[1,"vis-item-content"],[1,"vis-item","vis-range","red","example-wrapper"],[1,"vis-item","vis-range","green","example-wrapper"],[2,"margin-left","15px"],["data-cy","timeline",3,"events","fitOnDataChange","displayMoveToStart","displayMoveToEnd"],[3,"jobs","sortOrder"]],template:function(e,i){1&e&&t.YNc(0,Fn,31,9,"div",0),2&e&&t.Q6J("ngIf",i.repairTaskCollection)},directives:[l.O5,Y.u,vn,l.sg,l.mk,X._,l.PC,y.P,p.Pz,p.nv,p.Vx,p.uN,bn.S,Tn,p.tO,T.m],styles:[".example-wrapper[_ngcontent-%COMP%]{margin:5px;position:relative}.bottom[_ngcontent-%COMP%]{border-bottom:1px solid #4c4c4c}.centering-row[_ngcontent-%COMP%], .tile-item[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}.tile-item[_ngcontent-%COMP%]{height:35px;position:relative}.tile-list-entry[_ngcontent-%COMP%]{width:50px;text-align:center;margin-right:10px}.left-auto[_ngcontent-%COMP%]{margin-left:auto}.overflow-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"]}),n})();var kn=r(3847),Un=r(9342);function Dn(n,o){1&n&&t._UZ(0,"app-essential-item",24),2&n&&t.Q6J("item",o.$implicit)("underline",!1)}function Qn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"div")(2,"div",12),t._uU(3," Phase "),t.qZA(),t._UZ(4,"app-phase-diagram",13),t.qZA(),t.TgZ(5,"div",14)(6,"div",12),t._uU(7," Overview "),t.qZA(),t.YNc(8,Dn,1,2,"app-essential-item",15),t.qZA(),t.TgZ(9,"div")(10,"div")(11,"div",12)(12,"div"),t._uU(13,"Currently Impacted Nodes"),t.qZA()(),t.TgZ(14,"div"),t._UZ(15,"app-detail-list",16),t.qZA()()(),t.TgZ(16,"div",17)(17,"div",18),t._uU(18," Current Repair Task "),t.qZA(),t._UZ(19,"app-detail-list",19),t.qZA(),t.TgZ(20,"div",20)(21,"app-collapse-container",21),t.NdJ("collapsedChange",function(a){return t.CHM(e),t.oxw().allCollapsed=a}),t.TgZ(22,"div",22),t._uU(23),t.qZA(),t.TgZ(24,"div",23),t._UZ(25,"app-detail-list",19),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("items",e.progress)("currentIndex",e.index)("vertical",!0),t.xp6(4),t.Q6J("ngForOf",e.essentialItems),t.xp6(7),t.Q6J("list",e.job.raw.CurrentlyImpactedRoleInstances)("listSettings",e.impactingNodes)("showTopOptions",!1),t.xp6(4),t.Q6J("list",e.repairTask)("listSettings",e.repairJobs)("showTopOptions",!1),t.xp6(2),t.Q6J("collapsed",e.allCollapsed),t.xp6(2),t.hij(" All Repair Tasks (",e.completed.length,") "),t.xp6(2),t.Q6J("list",e.completed)("listSettings",e.repairJobs)("showTopOptions",!1)}}function zn(n,o){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"app-detail-view-part",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("data",e.job)}}let Rn=(()=>{class n{constructor(e,i){this.settings=e,this.dataService=i,this.essentialItems=[],this.progress=[],this.index=-1,this.allCollapsed=!0}ngOnInit(){this.impactingNodes=this.settings.getNewOrExistingListSettings("impactingNodes",[],[new h.NL("Name","Name"),new h.NL("UD","UD"),new h.II("ImpactTypes","Impact Types",3)]),this.repairJobs=this.settings.getNewOrExistingPendingRepairTaskListSettings()}ngOnChanges(){this.essentialItems=[{descriptionName:"Current UD",copyTextValue:this.job.raw.CurrentUD,displayText:this.job.raw.CurrentUD},{descriptionName:"Ack Status",copyTextValue:this.job.raw.AcknowledgementStatus,displayText:this.job.raw.AcknowledgementStatus},{descriptionName:"Impact Action",copyTextValue:this.job.VmImpact.join(","),displayText:this.job.VmImpact.join(",")}],this.index={Preparing:1,Executing:2,Completed:3}[this.job.raw.JobStatus],this.progress=[{name:"Preparing"},{name:"Executing"},{name:"Completed"}],this.completed=this.dataService.repairCollection.collection.filter(i=>i.raw.TaskId.includes(this.job.id)),this.dataService.getRepairJobById(this.job.RepairTask.TaskId).subscribe(i=>{this.repairTask=[i]},i=>{console.log(i),this.repairTask=[]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.g),t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-infrastructure-job-tile"]],inputs:{job:"job"},features:[t.TTD],decls:20,vars:8,consts:[[2,"display","flex","justify-content","space-between"],["data-cy","job-id",1,"title"],[3,"text"],["data-cy","job-status",1,"underline","title"],[2,"margin-left","10px"],["ngbNav","",1,"nav-wrapper"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",2,"font-size","12pt"],["ngbNavContent",""],[3,"ngbNavOutlet"],[2,"display","flex","gap","10px","flex-wrap","wrap"],[1,"underline","title"],[3,"items","currentIndex","vertical"],["data-cy","overview",2,"max-width","300px"],[3,"item","underline",4,"ngFor","ngForOf"],[3,"list","listSettings","showTopOptions"],[2,"flex","1","min-width","600px"],["collapse-header","",1,"underline","title"],["collapse-body","",3,"list","listSettings","showTopOptions"],[2,"width","100%"],["sectionName","all repair tasks",3,"collapsed","collapsedChange"],["collapse-header","",1,"title","underline"],["collapse-body",""],[3,"item","underline"],[2,"width","80%"],[3,"data"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1),t._uU(3),t._UZ(4,"app-clip-board",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6),t._UZ(7,"app-clip-board",2),t.qZA()(),t.TgZ(8,"div",4)(9,"div",5,6)(11,"div",7)(12,"a",8),t._uU(13," Condensed "),t.qZA(),t.YNc(14,Qn,26,15,"ng-template",9),t.qZA(),t.TgZ(15,"div",7)(16,"a",8),t._uU(17," Full Description "),t.qZA(),t.YNc(18,zn,2,1,"ng-template",9),t.qZA()(),t._UZ(19,"div",10),t.qZA()()),2&e){const a=t.MAs(10);t.uIk("data-cy",i.job.id),t.xp6(3),t.hij(" Job : ",i.job.id," "),t.xp6(1),t.Q6J("text",i.job.id),t.xp6(2),t.hij(" Job Status : ",i.job.raw.JobStatus," "),t.xp6(1),t.Q6J("text",i.job.raw.JobStatus),t.xp6(4),t.Q6J("ngbNavItem",1),t.xp6(4),t.Q6J("ngbNavItem",2),t.xp6(4),t.Q6J("ngbNavOutlet",a)}},directives:[X._,p.Pz,p.nv,p.Vx,p.uN,kn.A,l.sg,Un._,T.m,y.P,E.d,p.tO],styles:[".title[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:400;font-weight:initial;padding-bottom:5px}"]}),n})();function qn(n,o){if(1&n&&(t.TgZ(0,"div",10),t._UZ(1,"app-infrastructure-job-tile",11),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("job",e)}}let Yn=(()=>{class n{constructor(e){this.settings=e}ngOnInit(){this.allPendingMRJobsList=this.settings.getNewOrExistingInfrastructureSettings(),this.completedMRJobsList=this.settings.getNewOrExistingListSettings("completedMRJobs",[],[new h.NL("raw.Id","Job Id"),new h.NL("raw.ImpactAction","Impact Action"),new h.NL("raw.RoleInstancesToBeImpacted","Impacted Nodes")])}trackByFn(e,i){return i.id}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-infrastructure-overview"]],inputs:{collection:"collection",jobs:"jobs",repairCollection:"repairCollection"},decls:18,vars:8,consts:[[1,"detail-pane"],["sectionName","Active Infrastructure Jobs"],["collapse-header",""],["collapse-body","",1,"nested-block",2,"margin-bottom","20px"],["style","margin-bottom: 15px;",4,"ngFor","ngForOf","ngForTrackBy"],["sectionName","Pending Infrastructure Jobs"],["collapse-body","",1,"nested-block"],[3,"list","listSettings"],["collapsed","true","sectionName","Completed Infrastructure Jobs"],["collapse-header","","data-cy","completed"],[2,"margin-bottom","15px"],[3,"job"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-collapse-container",1)(2,"h4",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,qn,2,1,"div",4),t.qZA()()(),t.TgZ(6,"div",0)(7,"app-collapse-container",5)(8,"h4",2),t._uU(9),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"app-detail-list",7),t.qZA()()(),t.TgZ(12,"div",0)(13,"app-collapse-container",8)(14,"h4",9),t._uU(15," Recently Completed Infrastructure Jobs "),t.qZA(),t.TgZ(16,"div",6),t._UZ(17,"app-detail-list",7),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" Active Infrastructure Jobs (",i.collection.executingMRJobs.length,") "),t.xp6(2),t.Q6J("ngForOf",i.collection.executingMRJobs)("ngForTrackBy",i.trackByFn),t.xp6(4),t.hij(" Pending Infrastructure Jobs (",i.collection.allPendingMRJobs.length,") "),t.xp6(2),t.Q6J("list",i.collection.allPendingMRJobs)("listSettings",i.allPendingMRJobsList),t.xp6(6),t.Q6J("list",i.collection.completedMRJobs)("listSettings",i.completedMRJobsList))},directives:[y.P,l.sg,Rn,T.m],styles:[".nested-block[_ngcontent-%COMP%]{border-left:var(--accent-underline) 2px solid;margin-left:10px;padding-left:5px}"]}),n})(),Bn=(()=>{class n{transform(e,...i){return e.replace("fabric:/System/InfrastructureService/","")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"stripPrefix",type:n,pure:!0}),n})();function En(n,o){1&n&&t._UZ(0,"i",19)}function Ln(n,o){1&n&&t._UZ(0,"div",20)}function jn(n,o){if(1&n&&t._UZ(0,"app-infrastructure-overview",21),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("jobs",e.raw.Jobs)("repairCollection",i.repairTaskCollection)("collection",e)}}function Vn(n,o){if(1&n&&(t.TgZ(0,"div",9)(1,"a",10)(2,"div")(3,"div",11),t.YNc(4,En,1,0,"i",12),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"stripPrefix"),t.qZA()(),t.TgZ(8,"div",13)(9,"span",14)(10,"span"),t._uU(11,"Active :"),t.qZA(),t.TgZ(12,"span",15),t._uU(13),t.qZA()(),t.TgZ(14,"span",16)(15,"span"),t._uU(16,"Pending :"),t.qZA(),t.TgZ(17,"span",15),t._uU(18),t.qZA()()()()(),t.YNc(19,Ln,1,0,"div",17),t.YNc(20,jn,1,3,"ng-template",18),t.qZA()),2&n){const e=o.$implicit,a=o.last;t.Q6J("ngbNavItem",o.index),t.xp6(1),t.uIk("data-cy",e.name),t.xp6(3),t.Q6J("ngIf",e.isThrottled),t.xp6(2),t.hij(" ",t.lcZ(7,7,e.name)," "),t.xp6(7),t.hij(" ",e.executingMRJobs.length," "),t.xp6(5),t.hij(" ",e.allPendingMRJobs.length," "),t.xp6(1),t.Q6J("ngIf",!a)}}function Hn(n,o){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5,6),t.YNc(3,Vn,21,9,"div",7),t.qZA(),t._UZ(4,"div",8),t.qZA()),2&n){const e=t.MAs(2),i=t.oxw();t.xp6(3),t.Q6J("ngForOf",i.collection.collection),t.xp6(1),t.Q6J("ngbNavOutlet",e)}}const $n=[{path:"",component:Dt,children:[{path:"details",component:Nt},{path:"metrics",component:Oe},{path:"clustermap",component:Se},{path:"imagestore",component:sn},{path:"manifest",component:pn},{path:"events",component:dn},{path:"backups",component:un},{path:"repairtasks",component:An},{path:"infrastructure",component:(()=>{class n extends u.J{constructor(e,i,a){super(i),this.data=e,this.settings=a,this.allPendingMRJobs=[],this.executingMRJobs=[]}setup(){this.collection=this.data.infrastructureCollection,this.repairTaskCollection=this.data.repairCollection}refresh(e){return(0,M.D)([this.collection.refresh(e),this.repairTaskCollection.refresh(e)])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D),t.Y36(t.zs3),t.Y36(m.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-infrastructure-view"]],features:[t.qOj],decls:5,vars:1,consts:[[2,"margin","15px 0px"],["href","https://docs.microsoft.com/azure/service-fabric/infrastructure-service-faq#faqs","target","_blank",1,"essen-pane","info-box"],[1,"mif-info","link"],["class","essen-pane",4,"ngIf"],[1,"essen-pane"],["ngbNav","","activeIndex","0",1,"nav-wrapper"],["nav","ngbNav"],["style","display: flex;",3,"ngbNavItem",4,"ngFor","ngForOf"],[2,"margin-top","10px",3,"ngbNavOutlet"],[2,"display","flex",3,"ngbNavItem"],["ngbNavLink","",2,"font-size","12pt"],[2,"display","flex","gap","10px"],["class","mif-notification warning-icon","tooltipClass","styled-tooltip","ngbTooltip","This infrastructure service has throttled jobs. This means there are jobs that are currently waiting.","container","body","data-cy","throttled",4,"ngIf"],[1,"chip-container"],[1,"chip"],[2,"font-size","22px"],[1,"chip","pending"],["style","border: 2px solid var(--accent-underline);\n        margin-left: 10px;",4,"ngIf"],["ngbNavContent",""],["tooltipClass","styled-tooltip","ngbTooltip","This infrastructure service has throttled jobs. This means there are jobs that are currently waiting.","container","body","data-cy","throttled",1,"mif-notification","warning-icon"],[2,"border","2px solid var(--accent-underline)","margin-left","10px"],[3,"jobs","repairCollection","collection"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._UZ(2,"span",2),t._uU(3," Click here to learn more about Infrastructure jobs. "),t.qZA()(),t.YNc(4,Hn,5,2,"div",3)),2&e&&(t.xp6(4),t.Q6J("ngIf",i.collection.isInitialized))},directives:[l.O5,p.Pz,l.sg,p.nv,p.Vx,p._L,p.uN,Yn,p.tO],pipes:[Bn],styles:[".chip[_ngcontent-%COMP%]{border-left:5px solid var(--accent-darkblue);display:-ms-flexbox;display:flex;-ms-flex-align:end;align-items:flex-end;line-height:1;padding:5px;font-size:var(--font-size-small)}.chip.concerning[_ngcontent-%COMP%]{border-left-color:var(--warning)}.chip.pending[_ngcontent-%COMP%]{border-left-color:var(--accent-underline)}.chip-container[_ngcontent-%COMP%]{margin:10px 0;display:-ms-flexbox;display:flex;gap:5px}"]}),n})()},{path:"",component:xt}]}];let Wn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[N.Bz.forChild($n)],N.Bz]}),n})();var D=r(4466),Q=r(6461);let Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,Q.Q,w.u5,p.XC]]}),n})();var Gn=r(3308),Kn=r(1926),z=r(7883),ti=r(9049),ei=r(3426),ni=r(1901);let ii=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,D.m,z.m,N.Bz,p.XC,w.u5,p.HK]]}),n})();var G=r(9186);let oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,D.m,Q.Q,G.k,p.Oz,z.m,p.HK]]}),n})(),ai=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,Wn,D.m,Q.Q,Xn,w.u5,w.UX,Gn.e,z.m,p.XC,ti.M,p.Oz,Kn.m,ei.P,ni.c,ii,p.Oz,oi,G.k,p.HK]]}),n})()}}]);