"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_replica_replica_module_ts"],{1901:(E,m,s)=>{s.d(m,{c:()=>v});var i=s(9808),h=s(4466),r=s(322),d=s(6461),u=s(5e3);let v=(()=>{class t{}return t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,h.m,r.HK,d.Q,r.Oz]]}),t})()},8952:(E,m,s)=>{s.d(m,{f:()=>t});var i=s(5e3),h=s(4333),r=s(322),d=s(8833);function u(p,c){if(1&p&&i._UZ(0,"app-detail-list",6),2&p){const l=i.oxw();i.Q6J("list",l.unhealthyEvaluations)("listSettings",l.unhealthyEvaluationsListSettings)}}function v(p,c){if(1&p&&i._UZ(0,"app-detail-list",6),2&p){const l=i.oxw();i.Q6J("list",l.healthyEvaluations)("listSettings",l.healthEventsListSettings)}}let t=(()=>{class p{constructor(l){this.settings=l}ngOnInit(){this.unhealthyEvaluationsListSettings=this.settings.getNewOrExistingUnhealthyEvaluationsListSettings(),this.healthEventsListSettings=this.settings.getNewOrExistingHealthEventsListSettings()}}return p.\u0275fac=function(l){return new(l||p)(i.Y36(h.g))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-health-viewer"]],inputs:{unhealthyEvaluations:"unhealthyEvaluations",healthyEvaluations:"healthyEvaluations"},decls:11,vars:1,consts:[["ngbNav","",1,"nav-wrapper"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"list","listSettings"]],template:function(l,y){if(1&l&&(i.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),i._uU(4,"Unhealthy"),i.qZA(),i.YNc(5,u,1,2,"ng-template",4),i.qZA(),i.TgZ(6,"div",2)(7,"a",3),i._uU(8,"All"),i.qZA(),i.YNc(9,v,1,2,"ng-template",4),i.qZA()(),i._UZ(10,"div",5)),2&l){const f=i.MAs(1);i.xp6(10),i.Q6J("ngbNavOutlet",f)}},directives:[r.Pz,r.nv,r.Vx,r.uN,d.m,r.tO],styles:[""]}),p})()},2425:(E,m,s)=>{s.r(m),s.d(m,{ReplicaModule:()=>X});var i=s(9808),h=s(5467),r=s(4850),d=s(4286),u=s(2165),v=s(5053),t=s(5e3),p=s(7559);let c=(()=>{class a extends u.J{constructor(e,n){super(n),this.data=e}common(e){return this.isSystem=this.appTypeName===v.gT.SystemAppTypeName,this.data.getReplicaOnPartition(this.appId,this.serviceId,this.partitionId,this.replicaId,!0,e).pipe((0,r.U)(n=>(this.replica=n,this.replica.health.refresh(e))))}getParams(e){this.appTypeName=d.a.getAppTypeName(e),this.appId=d.a.getAppId(e),this.serviceId=d.a.getServiceId(e),this.partitionId=d.a.getPartitionId(e),this.replicaId=d.a.getReplicaId(e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.D),t.Y36(t.zs3))},a.\u0275dir=t.lG2({type:a,features:[t.qOj]}),a})();var l=s(5237),y=s(2261),f=s(8118);let I=(()=>{class a extends c{constructor(e,n,g){super(e,n),this.dataService=e,this.tree=g,this.tabs=[{name:"essentials",route:"./"},{name:"details",route:"./details"}]}setup(){this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isEventStoreEnabled&&-1===this.tabs.indexOf(v.gT.EventsTab)&&(this.tabs=this.tabs.concat(v.gT.EventsTab))}),this.isSystem=this.appTypeName===v.gT.SystemAppTypeName,this.tree.selectTreeNode(this.isSystem?[l.R.cluster(),l.R.systemAppGroup(),l.R.service(this.serviceId),l.R.partition(this.partitionId),l.R.replica(this.replicaId)]:[l.R.cluster(),l.R.appGroup(),l.R.appType(this.appTypeName),l.R.app(this.appId),l.R.service(this.serviceId),l.R.partition(this.partitionId),l.R.replica(this.replicaId)])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.D),t.Y36(t.zs3),t.Y36(y.r))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-base"]],features:[t.qOj],decls:4,vars:4,consts:[[3,"tabs","type","name","actions"],[1,"main-view"],[1,"flex-child"]],template:function(e,n){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&e&&t.Q6J("tabs",n.tabs)("type",null!=n.replica&&n.replica.isStatelessService?"Instance":"Replica")("name",n.replicaId)("actions",null==n.replica?null:n.replica.actions)},directives:[f.S,h.lC],styles:[""]}),a})();var T=s(567),x=s(1763),N=s(4333),_=s(4034),S=s(7895),C=s(4080),D=s(8952);function R(a,o){if(1&a&&t._UZ(0,"app-status-resolver",9),2&a){const e=t.oxw(3);t.Q6J("status",e.replica.raw.ReplicaStatus)}}function Z(a,o){if(1&a&&(t.TgZ(0,"a",10),t._uU(1),t.qZA()),2&a){const e=t.oxw(3);t.Q6J("routerLink",e.replica.nodeViewPath),t.xp6(1),t.Oqu(e.replica.raw.NodeName)}}function A(a,o){if(1&a&&(t.TgZ(0,"a",10),t._uU(1,"View on Node"),t.qZA()),2&a){const e=t.oxw(3);t.Q6J("routerLink",e.nodeView)}}function O(a,o){if(1&a&&(t.TgZ(0,"app-essential-health-tile",5),t.YNc(1,R,1,1,"ng-template",6),t.YNc(2,Z,2,2,"ng-template",7),t.YNc(3,A,2,1,"ng-template",8),t.qZA()),2&a){const e=t.oxw(2);t.Q6J("healthState",null==e.replica?null:e.replica.healthState)("listItems",e.essentialItems)}}function U(a,o){if(1&a&&(t.TgZ(0,"div",11),t._UZ(1,"app-replica-address",12),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("address",e.replica.address)}}function M(a,o){if(1&a&&(t.TgZ(0,"div",13)(1,"h4"),t._uU(2,"Health Evaluations"),t.qZA(),t._UZ(3,"app-health-viewer",14),t.qZA()),2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("healthyEvaluations",e.replica.health.healthEvents)("unhealthyEvaluations",e.replica.health.unhealthyEvaluations)}}function P(a,o){if(1&a&&(t.TgZ(0,"div")(1,"div",1),t.YNc(2,O,4,2,"app-essential-health-tile",2),t.qZA(),t.YNc(3,U,2,1,"div",3),t.YNc(4,M,4,2,"div",4),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.replica&&e.replica.isInitialized),t.xp6(1),t.Q6J("ngIf",e.replica.address),t.xp6(1),t.Q6J("ngIf",e.replica.health.isInitialized)}}let J=(()=>{class a extends c{constructor(e,n,g){super(e,n),this.data=e,this.settings=g,this.essentialItems=[]}setup(){this.essentialItems=[]}refresh(e){return(0,T.D)([this.replica.health.refresh(e),this.replica.detail.refresh(e).pipe((0,r.U)(()=>{if(!this.isSystem){const g=this.replica.detail.raw[this.replica.isStatefulService?"DeployedServiceReplica":"DeployedServiceReplicaInstance"];this.nodeView=x._.getDeployedReplicaViewPath(this.replica.raw.NodeName,this.appId,g.ServiceManifestName,g.ServicePackageActivationId||null,this.partitionId,this.replicaId)}}))]).pipe((0,r.U)(()=>{this.essentialItems=[{descriptionName:"Node Name",copyTextValue:this.replica.raw.NodeName,selectorName:"nodeName",displaySelector:!0},{descriptionName:"Process Id",displayText:this.replica.detail.processID,copyTextValue:this.replica.detail.processID},{descriptionName:"Status",displayText:this.replica.raw.ReplicaStatus,copyTextValue:this.replica.raw.ReplicaStatus,selectorName:"status",displaySelector:!0}],this.isSystem||this.essentialItems.push({selectorName:"viewNode",displaySelector:!0})}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.D),t.Y36(t.zs3),t.Y36(N.g))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-essentials"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"tile-container"],["class","long",3,"healthState","listItems",4,"ngIf"],["class","detail-pane essen-pane","data-cy","address",4,"ngIf"],["class","detail-pane essen-pane",4,"ngIf"],[1,"long",3,"healthState","listItems"],["appEssentialTemplate","","id","status"],["appEssentialTemplate","","id","nodeName"],["appEssentialTemplate","","id","viewNode"],[3,"status"],[3,"routerLink"],["data-cy","address",1,"detail-pane","essen-pane"],[3,"address"],[1,"detail-pane","essen-pane"],[3,"healthyEvaluations","unhealthyEvaluations"]],template:function(e,n){1&e&&t.YNc(0,P,5,3,"div",0),2&e&&t.Q6J("ngIf",n.replica)},directives:[i.O5,_.Q,_.W,S.u,h.yS,C.z,D.f],styles:[""]}),a})();var Y=s(8285),B=s(1271);function Q(a,o){if(1&a&&(t.TgZ(0,"div")(1,"div",1)(2,"app-collapse-container",2)(3,"div",3)(4,"h4"),t._uU(5,"General"),t.qZA()(),t.TgZ(6,"div",4),t._UZ(7,"app-detail-view-part",5),t.qZA()()(),t.TgZ(8,"div",1)(9,"app-collapse-container",6)(10,"div",3)(11,"h4"),t._uU(12," Details "),t.qZA()(),t.TgZ(13,"div",4),t._UZ(14,"app-detail-view-part",7),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("data",e.replica),t.xp6(7),t.Q6J("data",e.replica.detail.raw)("parent",e.replica.detail)}}let w=(()=>{class a extends c{constructor(e,n){super(e,n),this.data=e}refresh(e){return this.replica.detail.refresh(e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.D),t.Y36(t.zs3))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-details"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"detail-pane","essen-pane"],["sectionName","General"],["collapse-header",""],["collapse-body",""],[3,"data"],["sectionName","Details"],[3,"data","parent"]],template:function(e,n){1&e&&t.YNc(0,Q,15,3,"div",0),2&e&&t.Q6J("ngIf",n.replica)},directives:[i.O5,Y.P,B.d],styles:[""]}),a})();var L=s(8131);const z=[{path:"",component:I,children:[{path:"",component:J},{path:"details",component:w},{path:"events",component:(()=>{class a extends c{constructor(e,n){super(e,n),this.data=e}setup(){this.listEventStoreData=[this.data.getReplicaEventData(this.partitionId,this.replicaId)]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.D),t.Y36(t.zs3))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-events"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"listEventStoreData"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("listEventStoreData",n.listEventStoreData))},directives:[L.h],styles:[""]}),a})()}]}];let V=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[h.Bz.forChild(z)],h.Bz]}),a})();var W=s(4466),H=s(6461),K=s(3308),F=s(322),j=s(7883),G=s(1901);let X=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[i.ez,V,W.m,H.Q,K.e,F.HK,j.m,G.c]]}),a})()}}]);