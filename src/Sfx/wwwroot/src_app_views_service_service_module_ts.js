"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_service_service_module_ts"],{2970:(x,S,i)=>{i.d(S,{D:()=>y,Z:()=>n});var c=i(4441);class y{constructor(l,C,t=[],v,b,f){this.title=l,this.titleInSingular=C,this.dataPoints=t,this.largeTile=v,this.routes=b,this.count=0,this.acessibilityText="",this.viewPath=f,this.count=t.reduce((g,M)=>g+M.count,0),this.adjustCount(),this.acessibilityText=`${l} has ${t[0].count} in error, ${t[1].count} in warning and ${t[2].count} are healthy.`}static fromHealthStateCount(l,C,t,v,b,f){const g=[];return g.push(new n("Error",v.ErrorCount,c.H.healthStatuses[3])),g.push(new n("Warning",v.WarningCount,c.H.healthStatuses[2])),g.push(new n("Healthy",v.OkCount,c.H.healthStatuses[1])),new y(l,C,g,t,b,f)}get displayTitle(){return 1===this.count?this.titleInSingular:this.title}getDataPointTooltip(l){return`${l.title}: ${(l.count/this.count*100).toFixed(1)}%`}onClick(){this.viewPath&&this.routes&&this.routes.navigate(()=>this.viewPath)}adjustCount(){this.dataPoints.forEach(l=>{l.adjustedCount=0===l.count?0:Math.max(.02*this.count,l.count)})}}class n{constructor(l,C,t){this.title=l,this.count=C,this.state=t,this.adjustedCount=0}}},8628:(x,S,i)=>{i.d(S,{L:()=>w});var c=i(3470),n=i(5e3),m=i(9808),l=i(5467);const C=["chart"];function t(p,d){if(1&p&&(n.TgZ(0,"div",9),n._UZ(1,"div",10),n.TgZ(2,"div",11),n._uU(3),n.qZA(),n.TgZ(4,"div",12),n._uU(5),n.qZA()()),2&p){const o=d.$implicit;n.xp6(1),n.Q6J("ngClass",o.state.badgeClass),n.xp6(2),n.Oqu(o.title),n.xp6(2),n.Oqu(o.count)}}const v=function(p,d,o){return{"has-view-path":p,"dashboard-large":d,"dashboard-small":o}};function b(p,d){if(1&p&&(n.TgZ(0,"div",3)(1,"div",4)(2,"div",5),n._UZ(3,"div",null,6),n.qZA(),n.TgZ(5,"div",7),n.YNc(6,t,6,3,"div",8),n.qZA()()()),2&p){const o=n.oxw();n.xp6(1),n.Q6J("ngClass",n.kEZ(2,v,o.data.viewPath,o.data.largeTile,!o.data.largeTile)),n.xp6(5),n.Q6J("ngForOf",o.data.dataPoints)}}function f(p,d){1&p&&n.GkF(0)}function g(p,d){if(1&p&&(n.TgZ(0,"div",13),n.YNc(1,f,1,0,"ng-container",14),n.qZA()),2&p){const o=n.oxw(),h=n.MAs(1);n.uIk("aria-label",o.data.acessibilityText),n.xp6(1),n.Q6J("ngTemplateOutlet",h)}}function M(p,d){1&p&&n.GkF(0)}function T(p,d){if(1&p&&(n.TgZ(0,"a",15),n.YNc(1,M,1,0,"ng-container",14),n.qZA()),2&p){const o=n.oxw(),h=n.MAs(1);n.Q6J("routerLink",o.data.viewPath),n.uIk("aria-label",o.data.acessibilityText),n.xp6(1),n.Q6J("ngTemplateOutlet",h)}}let w=(()=>{class p{constructor(){this.fontColor={color:"#fff"},this.options={chart:{type:"pie",backgroundColor:null,borderRadius:0},title:{text:"test",align:"left",verticalAlign:"middle",y:0,x:10,style:{color:"#fff",fontSize:"15pt"}},subtitle:{text:"5",align:"left",verticalAlign:"middle",x:25,y:50,style:{color:"#fff",fontSize:"28pt"}},tooltip:{enabled:!1,animation:!1,formatter(){return`${this.point.name} : ${this.y}`}},credits:{enabled:!1},loading:{showDuration:0},plotOptions:{pie:{borderColor:"#191919",borderWidth:2,dataLabels:{enabled:!1,distance:-50,style:{fontWeight:"bold",color:"white"}},innerSize:"85%",startAngle:-50,endAngle:230}},series:[{animation:!1,type:"pie",data:[{name:"",y:1,color:"gray"}],states:{inactive:{opacity:1},hover:{opacity:1}}}]}}ngOnInit(){const h=6+(this.data.largeTile?230:150);this.options.chart.height=h,this.options.chart.width=h,this.options.title.text=this.data.displayTitle,this.options.subtitle.text=this.data.count.toString();const u=this.getDataSet();this.options.tooltip.enabled=3===u.length,this.options.series[0].data=u,this.data.largeTile||(this.options.title.style.fontSize="13pt",this.options.title.y=9,this.options.subtitle.style.fontSize="13pt",this.options.subtitle.y=30)}ngAfterViewInit(){this.chart=(0,c.chart)(this.chartContainer.nativeElement,this.options)}getDataSet(){const o={Healthy:"#7FBA00",Warning:"#FCD116",Error:"#E81123"},h=this.data.dataPoints.map(u=>({name:u.title,y:u.count,color:o[u.title]}));return h.every(u=>0===u.y)&&h.push({name:"",y:1,color:"gray"}),h}ngOnChanges(){if(this.chart){const o=this.getDataSet();this.chart.tooltip.update({enabled:3===o.length}),this.chart.series[0].setData(o),this.chart.title.update({text:this.data.displayTitle}),this.chart.subtitle.update({text:this.data.count.toString()})}}}return p.\u0275fac=function(o){return new(o||p)},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-dashboard-tile"]],viewQuery:function(o,h){if(1&o&&n.Gf(C,5),2&o){let u;n.iGM(u=n.CRH())&&(h.chartContainer=u.first)}},inputs:{data:"data"},features:[n.TTD],decls:5,vars:2,consts:[["internal",""],["default",""],[3,"routerLink",4,"ngIf","ngIfElse"],[1,"dashboard-wrapper"],["role","group",1,"dashboard",3,"ngClass"],[1,"dashboard-donut-chart","chart-wrapper"],["chart",""],[1,"dashboard-datapoints"],["class","dashboard-datapoint",4,"ngFor","ngForOf"],[1,"dashboard-datapoint"],[1,"dashboard-datapoint-leftbar",3,"ngClass"],[1,"dashboard-datapoint-title"],[1,"dashboard-datapoint-number"],["tabindex","0",2,"height","100%"],[4,"ngTemplateOutlet"],[3,"routerLink"]],template:function(o,h){if(1&o&&(n.YNc(0,b,7,6,"ng-template",null,0,n.W1O),n.YNc(2,g,2,2,"ng-template",null,1,n.W1O),n.YNc(4,T,2,3,"a",2)),2&o){const u=n.MAs(3);n.xp6(4),n.Q6J("ngIf",h.data.viewPath)("ngIfElse",u)}},directives:[m.mk,m.sg,m.tP,m.O5,l.yS],styles:[".dashboard-container-small[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:270px}.chart-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.dashboard-wrapper[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--font-primary-color)!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{box-shadow:var(--primary-box-shadow);border-radius:var(--primary-border-radius);color:var(--font-primary-color);padding:7px;background:var(--primary-background-color);text-align:center;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard.has-view-path[_ngcontent-%COMP%]{cursor:pointer}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]{display:block;position:relative;text-align:left;width:100%;height:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding-left:16px!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar[_ngcontent-%COMP%]{width:6px;position:absolute;left:0;top:0;bottom:0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-active[_ngcontent-%COMP%]{background:var(--accent-darkblue)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-inactive[_ngcontent-%COMP%]{background:var(--accent-background-color)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-title[_ngcontent-%COMP%]{display:block;font-size:11pt;line-height:.9}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-number[_ngcontent-%COMP%]{display:block;font-size:72px;line-height:1;margin:20px 0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]{padding:17px 7px;position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:20px 5px 0;display:-ms-flexbox;display:flex;-ms-flex-pack:space-evenly;justify-content:space-evenly}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{-ms-flex:1;flex:1}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:var(--font-size-default)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:24pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]{padding:7px 12px;position:relative;height:100%;width:100%;overflow:hidden}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:0 0 0 20px;float:right}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{height:36px;padding:0 0 0 14px;margin:4px 0 8px}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:11pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:16pt;width:54px}"]}),p})()},3347:(x,S,i)=>{i.d(S,{p:()=>y});var c=i(5e3);let y=(()=>{class n{constructor(){this.manifestName="",this.manifest=""}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manifest-viewer"]],inputs:{manifestName:"manifestName",manifest:"manifest"},decls:6,vars:3,consts:[[1,"detail-pane","essen-pane"],["id","clusterManifestName"]],template:function(l,C){1&l&&(c.TgZ(0,"div",0)(1,"h4")(2,"span",1),c._uU(3),c.qZA()(),c.TgZ(4,"code"),c._uU(5),c.qZA()()),2&l&&(c.xp6(3),c.Oqu(C.manifestName),c.xp6(1),c.uIk("aria-label","manifest of "+C.manifestName),c.xp6(1),c.Oqu(C.manifest))},styles:["code[_ngcontent-%COMP%]{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;line-break:unset;word-break:break-word}"]}),n})()},4015:(x,S,i)=>{i.r(S),i.d(S,{ServiceModule:()=>vt});var c=i(9808),y=i(5467),n=i(567),m=i(1709),l=i(4286),C=i(2165),t=i(5e3),v=i(7559);let b=(()=>{class a extends C.J{constructor(e,s){super(s),this.data=e}common(e){return this.data.getService(this.appId,this.serviceId,!0,e).pipe((0,m.zg)(s=>(this.service=s,(0,n.D)([this.service.health.refresh(e),this.service.description.refresh(e)]))))}getParams(e){this.appId=l.a.getAppId(e),this.serviceId=l.a.getServiceId(e),this.appTypeName=l.a.getAppTypeName(e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3))},a.\u0275dir=t.lG2({type:a,features:[t.qOj]}),a})();var f=i(5237),g=i(5053),M=i(4850),T=i(2261),w=i(8118);let p=(()=>{class a extends b{constructor(e,s,P){super(e,s),this.dataService=e,this.tree=P,this.tabs=[{name:"essentials",route:"./"},{name:"details",route:"./details"}]}setup(){this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isEventStoreEnabled&&-1===this.tabs.indexOf(g.gT.EventsTab)&&(this.tabs=this.tabs.concat(g.gT.EventsTab))}),this.appTypeName===g.gT.SystemAppTypeName?this.tree.selectTreeNode([f.R.cluster(),f.R.systemAppGroup(),f.R.service(this.serviceId)],!0):(this.tabs.some(e=>"manifest"===e.name)||this.tabs.splice(2,0,{name:"manifest",route:"./manifest"}),this.tree.selectTreeNode([f.R.cluster(),f.R.appGroup(),f.R.appType(this.appTypeName),f.R.app(this.appId),f.R.service(this.serviceId)],!0))}refresh(e){return this.data.clusterManifest.ensureInitialized().pipe((0,M.U)(()=>{this.tabs=this.tabs.filter(s=>"backup"!==s.name),this.data.clusterManifest.isBackupRestoreEnabled&&this.service.isStatefulService&&this.appTypeName!==g.gT.SystemAppTypeName&&this.tabs.push({name:"backup",route:"./backup"})}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3),t.Y36(T.r))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-base"]],features:[t.qOj],decls:4,vars:3,consts:[["type","Service",3,"tabs","name","actions"],[1,"main-view"],[1,"flex-child"]],template:function(e,s){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&e&&t.Q6J("tabs",s.tabs)("name",null==s.service?null:s.service.name)("actions",null==s.service?null:s.service.actions)},directives:[w.S,y.lC],styles:[""]}),a})();var d=i(6174),o=i(2944),h=i(2970),u=i(4333),I=i(4034),E=i(7895),Z=i(8855),N=i(8523),A=i(8628),k=i(8285),U=i(8952),B=i(8833);function J(a,r){if(1&a&&t._UZ(0,"app-status-resolver",13),2&a){const e=t.oxw(2);t.Q6J("status",e.service.raw.ServiceStatus)}}function Q(a,r){if(1&a&&(t.TgZ(0,"app-essential-health-tile",11),t.YNc(1,J,1,1,"ng-template",12),t.qZA()),2&a){const e=t.oxw();t.Q6J("healthState",null==e.service?null:e.service.healthState)("listItems",e.essentialItems)}}function Y(a,r){if(1&a&&(t.TgZ(0,"app-tile-wrapper",14),t._UZ(1,"app-state-info",15),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("stateful",e.service.isStatefulService)("data",e.service.description.raw)}}function z(a,r){if(1&a&&t._UZ(0,"app-dashboard-tile",16),2&a){const e=t.oxw();t.Q6J("data",e.partitionsDashboard)}}function R(a,r){if(1&a&&t._UZ(0,"app-dashboard-tile",16),2&a){const e=t.oxw();t.Q6J("data",e.replicasDashboard)}}function F(a,r){if(1&a&&t._UZ(0,"app-health-viewer",17),2&a){const e=t.oxw();t.Q6J("healthyEvaluations",e.service.health.healthEvents)("unhealthyEvaluations",e.service.health.unhealthyEvaluations)}}function L(a,r){if(1&a&&t._UZ(0,"app-detail-list",18),2&a){const e=t.oxw();t.Q6J("list",e.service.partitions.collection)("listSettings",e.listSettings)}}let W=(()=>{class a extends b{constructor(e,s,P){super(e,s),this.data=e,this.settings=P,this.essentialItems=[]}setup(){this.listSettings=this.settings.getNewOrExistingListSettings("partitions",["id"],[new d.a7("id","Id",e=>e.viewPath),new d.v0("partitionInformation.raw.ServicePartitionKind","Partition Kind"),new d.Gp("healthState","Health State"),new d.v0("raw.PartitionStatus","Status")]),this.essentialItems=[]}refresh(e){return this.essentialItems=[{descriptionName:"Service Type Version",displayText:this.service.raw.ManifestVersion,copyTextValue:this.service.raw.ManifestVersion},{descriptionName:"Service Type",displayText:this.service.raw.TypeName,copyTextValue:this.service.raw.TypeName},{descriptionName:"Status",displayText:this.service.raw.ServiceStatus,copyTextValue:this.service.raw.ServiceStatus,selectorName:"status",displaySelector:!0}],this.service.description.refresh(e).subscribe(),(0,n.D)([this.service.health.refresh(e).pipe((0,M.U)(s=>{const P=o.wk.getHealthStateCount(s.raw,o.NP.Partition);this.partitionsDashboard=h.D.fromHealthStateCount("Partitions","Partition",!1,P);const _=o.wk.getHealthStateCount(s.raw,o.NP.Replica);this.replicasDashboard=h.D.fromHealthStateCount("Replicas","Replica",!1,_)})),this.service.partitions.refresh(e)])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3),t.Y36(u.g))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-essentials"]],features:[t.qOj],decls:19,vars:7,consts:[[1,"tile-container"],["class","long",3,"healthState","listItems",4,"ngIf"],["data-cy","state-data",4,"ngIf"],[3,"data",4,"ngIf"],[1,"detail-pane","essen-pane"],["sectionName","Unhealthy Evaluations",3,"tooltipSouth"],["collapse-header",""],["collapse-body",""],[3,"healthyEvaluations","unhealthyEvaluations",4,"ngIf"],["sectionName","Partitions"],["data-cy","partitions",3,"list","listSettings",4,"ngIf"],[1,"long",3,"healthState","listItems"],["appEssentialTemplate","","id","status"],[3,"status"],["data-cy","state-data"],[3,"stateful","data"],[3,"data"],[3,"healthyEvaluations","unhealthyEvaluations"],["data-cy","partitions",3,"list","listSettings"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Q,2,2,"app-essential-health-tile",1),t.YNc(2,Y,2,2,"app-tile-wrapper",2),t.YNc(3,z,1,1,"app-dashboard-tile",3),t.YNc(4,R,1,1,"app-dashboard-tile",3),t.qZA(),t.TgZ(5,"div",4)(6,"app-collapse-container",5)(7,"div",6)(8,"h4"),t._uU(9,"Health Evaluations"),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,F,1,2,"app-health-viewer",8),t.qZA()()(),t.TgZ(12,"div",4)(13,"app-collapse-container",9)(14,"div",6)(15,"h4"),t._uU(16,"Partitions"),t.qZA()(),t.TgZ(17,"div",7),t.YNc(18,L,1,2,"app-detail-list",10),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",s.service&&s.service.isInitialized),t.xp6(1),t.Q6J("ngIf",null==s.service?null:s.service.description.raw),t.xp6(1),t.Q6J("ngIf",s.partitionsDashboard),t.xp6(1),t.Q6J("ngIf",s.replicasDashboard),t.xp6(2),t.Q6J("tooltipSouth",!0),t.xp6(5),t.Q6J("ngIf",s.service&&s.service.health),t.xp6(7),t.Q6J("ngIf",s.service&&s.service.partitions.isInitialized))},directives:[c.O5,I.Q,I.W,E.u,Z.B,N.H,A.L,k.P,U.f,B.m],styles:[""]}),a})();var j=i(1271);function K(a,r){if(1&a&&(t.TgZ(0,"div")(1,"div",3)(2,"h4"),t._uU(3," Service Description "),t.qZA(),t._UZ(4,"app-detail-view-part",4),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.Q6J("data",e.service.description.raw)("parent",e.service.description)}}let V=(()=>{class a extends b{constructor(e,s){super(e,s),this.data=e}refresh(e){return this.data.clusterManifest.isBackupRestoreEnabled&&this.service.isStatefulService&&this.appTypeName!==g.gT.SystemAppTypeName&&(this.service.serviceBackupConfigurationInfoCollection.refresh(e),this.data.refreshBackupPolicies(e)),(0,n.D)([this.service.description.refresh(e),this.service.partitions.refresh(e)])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-details"]],features:[t.qOj],decls:3,vars:2,consts:[[1,"detail-pane","essen-pane"],[3,"data"],[4,"ngIf"],["data-cy","serviceDescription",1,"detail-pane","essen-pane"],[3,"data","parent"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-detail-view-part",1),t.qZA(),t.YNc(2,K,5,2,"div",2)),2&e&&(t.xp6(1),t.Q6J("data",s.service),t.xp6(1),t.Q6J("ngIf",s.service))},directives:[j.d,c.O5],styles:[""]}),a})();var $=i(8131);let G=(()=>{class a extends b{constructor(e,s){super(e,s),this.data=e}setup(){this.listEventStoreData=[this.data.getServiceEventData(this.serviceId)]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-events"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"listEventStoreData"]],template:function(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("listEventStoreData",s.listEventStoreData))},directives:[$.h],styles:[""]}),a})();var X=i(3347);function H(a,r){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-manifest-viewer",1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("manifestName",e.service.name)("manifest",e.serviceManifest)}}let q=(()=>{class a extends b{constructor(e,s){super(e,s),this.data=e}setup(){}refresh(e){const s=this.service.parent;return this.data.getServiceType(s.raw.TypeName,s.raw.TypeVersion,this.service.description.raw.ServiceTypeName,!0,e).pipe((0,m.zg)(P=>P.manifest.refresh(e).pipe((0,M.U)(()=>{this.serviceManifest=P.manifest.raw.Manifest}))))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-manifest"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"manifestName","manifest"]],template:function(e,s){1&e&&t.YNc(0,H,2,2,"div",0),2&e&&t.Q6J("ngIf",s.serviceManifest)},directives:[c.O5,X.p],styles:[""]}),a})();var tt=i(7506),O=i(1136),et=i(8592),at=i(7654),nt=i(9079),it=i(2999);function st(a,r){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-action-collection-drop-down",3),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("actionCollection",e.actions)}}function ot(a,r){if(1&a&&(t.TgZ(0,"div",4)(1,"h4"),t._uU(2,"Service Backup Configuration"),t.qZA(),t._UZ(3,"app-detail-list",5),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.Q6J("list",e.service.serviceBackupConfigurationInfoCollection)("listSettings",e.serviceBackupConfigurationInfoListSettings)}}const rt=[{path:"",component:p,children:[{path:"",component:W},{path:"details",component:V},{path:"manifest",component:q},{path:"events",component:G},{path:"backup",component:(()=>{class a extends b{constructor(e,s,P,_){super(e,s),this.data=e,this.settings=P,this.telemetry=_}setup(){this.serviceBackupConfigurationInfoListSettings=this.settings.getNewOrExistingListSettings("serviceBackupConfigurationInfoListSettings",["raw.PolicyName"],[new d.NL("raw.PolicyName","Policy Name",{enableFilter:!1,getDisplayHtml:(e,s)=>`<span class="link">${s}</span>`,clickEvent:e=>e.action.run()}),new d.NL("raw.Kind","Kind"),new d.NL("raw.PolicyInheritedFrom","Policy Inherited From"),new d.NL("raw.PartitionId","Partition Id"),new d.NL("raw.SuspensionInfo.IsSuspended","Is Suspended"),new d.NL("raw.SuspensionInfo.SuspensionInheritedFrom","Suspension Inherited From")])}refresh(e){return this.data.actionsEnabled()&&this.setupActions(),this.service.serviceBackupConfigurationInfoCollection.refresh(e),this.data.refreshBackupPolicies(e)}setupActions(){this.actions||(this.actions=new tt.w(this.telemetry),this.actions.add(new O.VJ(this.data.dialog,"enableServiceBackup","Enable/Update Service Backup","Enabling Service Backup",{enable:e=>this.data.restClient.enableServiceBackup(this.service,e).pipe((0,m.zg)(()=>this.service.serviceBackupConfigurationInfoCollection.refresh())),data:this},et.y,()=>!0)),this.actions.add(new O.VJ(this.data.dialog,"disableApplicationBackup","Disable Service Backup","Disabling Service Backup",{enable:e=>this.data.restClient.disableServiceBackup(this.service,e).pipe((0,m.zg)(()=>this.service.serviceBackupConfigurationInfoCollection.refresh())),data:this},at.U,()=>this.service.serviceBackupConfigurationInfoCollection.collection.length&&this.service.serviceBackupConfigurationInfoCollection.collection[0].raw&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.Kind&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.PolicyInheritedFrom)),this.actions.add(new O.et(this.data.dialog,"suspendServiceBackup","Suspend Service Backup","Suspending...",()=>this.data.restClient.suspendServiceBackup(this.service.id).pipe((0,M.U)(()=>this.service.serviceBackupConfigurationInfoCollection.refresh())),()=>this.service.serviceBackupConfigurationInfoCollection.collection.length&&this.service.serviceBackupConfigurationInfoCollection.collection[0].raw&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.Kind&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.PolicyInheritedFrom&&!1===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.SuspensionInfo.IsSuspended,"Confirm Service Backup Suspension",`Suspend Service backup for ${this.service.name} ?`,this.service.name)),this.actions.add(new O.et(this.data.dialog,"resumeServiceBackup","Resume Service Backup","Resuming...",()=>this.data.restClient.resumeApplicationBackup(this.service.id).pipe((0,M.U)(()=>this.service.serviceBackupConfigurationInfoCollection.refresh())),()=>this.service.serviceBackupConfigurationInfoCollection.collection.length&&this.service.serviceBackupConfigurationInfoCollection.collection[0].raw&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.Kind&&"Service"===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.PolicyInheritedFrom&&!0===this.service.serviceBackupConfigurationInfoCollection.collection[0].raw.SuspensionInfo.IsSuspended,"Confirm Service Backup Resumption",`Resume Service backup for ${this.service.name} ?`,this.service.name)))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.D),t.Y36(t.zs3),t.Y36(u.g),t.Y36(nt.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-backup"]],features:[t.qOj],decls:3,vars:2,consts:[[1,"detail-pane","essen-pane"],[4,"ngIf"],["class","detail-pane",4,"ngIf"],["displayText","Backup Actions",2,"float","right",3,"actionCollection"],[1,"detail-pane"],[3,"list","listSettings"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.YNc(1,st,2,1,"div",1),t.YNc(2,ot,4,2,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",s.actions),t.xp6(1),t.Q6J("ngIf",s.service))},directives:[c.O5,it.b,B.m],styles:[""]}),a})()}]}];let ct=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[y.Bz.forChild(rt)],y.Bz]}),a})();var lt=i(4466),pt=i(6461),dt=i(3308),D=i(3075),ht=i(7883),ut=i(1901);let vt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.ez,ct,lt.m,pt.Q,dt.e,D.u5,D.UX,ht.m,ut.c]]}),a})()}}]);