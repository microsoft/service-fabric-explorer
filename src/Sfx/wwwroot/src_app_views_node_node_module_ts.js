"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_node_node_module_ts"],{3670:(st,h,a)=>{a.r(h),a.d(h,{NodeModule:()=>at});var r=a(9808),c=a(5467),m=a(5237),u=a(1709),I=a(4286),C=a(2165),t=a(5e3),l=a(7559);let d=(()=>{class n extends C.J{constructor(e,s){super(s),this.data=e}common(e){return this.data.getNode(this.nodeName,!0,e).pipe((0,u.zg)(s=>(this.node=s,this.node.health.refresh(e))))}getParams(e){this.nodeName=I.a.getNodeName(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.D),t.Y36(t.zs3))},n.\u0275dir=t.lG2({type:n,features:[t.qOj]}),n})();var v=a(5053),Z=a(2261),D=a(8118);let S=(()=>{class n extends d{constructor(e,s,i){super(e,s),this.data=e,this.tree=i,this.tabs=[{name:"essentials",route:"./"},{name:"details",route:"./details"}],this.data.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isEventStoreEnabled&&-1===this.tabs.indexOf(v.gT.EventsTab)&&(this.tabs=this.tabs.concat(v.gT.EventsTab))})}setup(){this.tree.selectTreeNode([m.R.cluster(),m.R.nodeGroup(),m.R.node(this.nodeName)])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.D),t.Y36(t.zs3),t.Y36(Z.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-base"]],features:[t.qOj],decls:4,vars:3,consts:[["type","Node",3,"tabs","name","actions"],[1,"main-view"],[1,"flex-child"]],template:function(e,s){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&e&&t.Q6J("tabs",s.tabs)("name",s.nodeName)("actions",null==s.node?null:s.node.actions)},directives:[D.S,c.lC],styles:[""]}),n})();var f=a(4850),g=a(567),E=a(1086),p=a(6174),x=a(5597),y=a(4333),N=a(4034),J=a(7895),A=a(2957),T=a(8285),U=a(2338),Q=a(8833),Y=a(8952);function w(n,o){if(1&n&&t._UZ(0,"app-status-resolver",13),2&n){const e=t.oxw(2);t.Q6J("status",e.node.nodeStatus)}}function M(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"app-dashboard-text-tile",14),t._uU(2," Count of all service objects (stateless and stateful) on the node "),t.qZA(),t.TgZ(3,"app-dashboard-text-tile",15),t._uU(4," Count of Primary replicas on the node "),t.qZA(),t.TgZ(5,"app-dashboard-text-tile",16),t._uU(6," Count of total stateful replicas on the node "),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("count",e.node.loadInformation.metrics.Count),t.xp6(2),t.Q6J("count",e.node.loadInformation.metrics.PrimaryCount),t.xp6(2),t.Q6J("count",e.node.loadInformation.metrics.ReplicaCount)}}function F(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"app-collapse-container",18)(2,"div",9)(3,"h4"),t._uU(4,"Deactivation Info"),t.qZA()(),t.TgZ(5,"div",10),t._UZ(6,"app-node-deactivation-info",19),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("deactivationInfo",e.node.raw.NodeDeactivationInfo)}}function z(n,o){if(1&n&&t._UZ(0,"app-detail-list",23),2&n){const e=t.oxw(3);t.Q6J("list",e.repairJobs)("listSettings",e.repairJobSettings)}}function R(n,o){if(1&n&&(t.TgZ(0,"div",20)(1,"app-collapse-container",21)(2,"div",9)(3,"h4"),t._uU(4,"Repair jobs"),t.qZA()(),t.TgZ(5,"div",10),t.YNc(6,z,1,2,"app-detail-list",22),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.node)}}function B(n,o){if(1&n&&t._UZ(0,"app-health-viewer",24),2&n){const e=t.oxw(2);t.Q6J("healthyEvaluations",e.node.health.healthEvents)("unhealthyEvaluations",e.node.health.unhealthyEvaluations)}}function O(n,o){if(1&n&&(t.TgZ(0,"div",7)(1,"app-collapse-container",25)(2,"div",9)(3,"h4"),t._uU(4,"Deployed Applications"),t.qZA()(),t.TgZ(5,"div",10),t._UZ(6,"app-detail-list",26),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("list",e.deployedApps.collection)("listSettings",e.listSettings)}}function j(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"app-essential-health-tile",2),t.YNc(3,w,1,1,"ng-template",3),t.qZA(),t._UZ(4,"app-essential-health-tile",4),t.YNc(5,M,7,3,"ng-container",0),t.qZA(),t.YNc(6,F,7,1,"div",5),t.YNc(7,R,7,1,"div",6),t.TgZ(8,"div",7)(9,"app-collapse-container",8)(10,"div",9)(11,"h4"),t._uU(12,"Health Evaluations"),t.qZA()(),t.TgZ(13,"div",10),t.YNc(14,B,1,2,"app-health-viewer",11),t.qZA()()(),t.YNc(15,O,7,2,"div",12),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("healthState",e.node.healthState)("listItems",e.essentialItems),t.xp6(2),t.Q6J("listItems",e.ringInfo),t.xp6(1),t.Q6J("ngIf",null==e.node||null==e.node.loadInformation?null:e.node.loadInformation.isInitialized),t.xp6(1),t.Q6J("ngIf",e.node&&e.node.isDeactivating),t.xp6(1),t.Q6J("ngIf",e.repairJobs.length>0),t.xp6(7),t.Q6J("ngIf",e.node),t.xp6(1),t.Q6J("ngIf",e.deployedApps)}}let P=(()=>{class n extends d{constructor(e,s,i){super(e,s),this.data=e,this.settings=i,this.essentialItems=[],this.ringInfo=[],this.repairJobs=[]}setup(){this.repairJobSettings=this.settings.getNewOrExistingPendingRepairTaskListSettings(),this.listSettings=this.settings.getNewOrExistingListSettings("apps",["name"],[new p.a7("name","Name",e=>e.viewPath),new p.NL("raw.TypeName","Application Type"),new p.Gp("health.healthState","Health State"),new p.v0("raw.Status","Status")]),this.essentialItems=[],this.ringInfo=[],this.repairJobs=[]}refresh(e){let s="";const i="0"===this.node.raw.NodeDownTimeInSeconds;return s=x.I.getDurationFromSeconds(i?this.node.raw.NodeUpTimeInSeconds:this.node.raw.NodeDownTimeInSeconds),this.essentialItems=[{descriptionName:"IP Address or Domain Name",displayText:this.node.raw.IpAddressOrFQDN,copyTextValue:this.node.raw.IpAddressOrFQDN},{descriptionName:i?"Up Time":"Down Time",displayText:s,copyTextValue:s},{descriptionName:"Status",displayText:this.node.nodeStatus,copyTextValue:this.node.nodeStatus,selectorName:"status",displaySelector:!0}],this.ringInfo=[{descriptionName:"Upgrade Domain",displayText:this.node.raw.UpgradeDomain,copyTextValue:this.node.raw.UpgradeDomain},{descriptionName:"Fault Domain",displayText:this.node.raw.FaultDomain,copyTextValue:this.node.raw.FaultDomain},{descriptionName:"Seed Node",displayText:this.node.raw.IsSeedNode?"Yes":"No"}],(0,g.D)([this.node.loadInformation.refresh(e),this.node.deployedApps.refresh(e).pipe((0,f.U)(()=>{this.deployedApps=this.node.deployedApps})),this.data.clusterManifest.ensureInitialized().pipe((0,u.zg)(()=>this.data.clusterManifest.isRepairManagerEnabled?this.data.repairCollection.refresh().pipe((0,f.U)(()=>{this.repairJobs=this.data.repairCollection.getRepairJobsForANode(this.node.name)})):(0,E.of)(null)))])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.D),t.Y36(t.zs3),t.Y36(y.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-essentials"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["data-cy","tiles",1,"tile-container"],["data-cy","essential-info",1,"long",3,"healthState","listItems"],["appEssentialTemplate","","id","status"],["data-cy","node-ring-info",3,"listItems"],["class","detail-pane essen-pane","data-cy","deactivated",4,"ngIf"],["class","detail-pane essen-pane","data-cy","repair-jobs",4,"ngIf"],[1,"detail-pane","essen-pane"],["sectionName","Unhealthy Evaluations"],["collapse-header",""],["collapse-body",""],[3,"healthyEvaluations","unhealthyEvaluations",4,"ngIf"],["class","detail-pane essen-pane",4,"ngIf"],["data-cy","status",3,"status"],["title","Total Count","middleMargin","0px 0","helpTextLink","https://aka.ms/sf/loadinformation",3,"count"],["title","Primary Count","middleMargin","0px 0","helpTextLink","https://aka.ms/sf/loadinformation",3,"count"],["title","Replica Count","middleMargin","0px 0","helpTextLink","https://aka.ms/sf/loadinformation",3,"count"],["data-cy","deactivated",1,"detail-pane","essen-pane"],["sectionName","Deactivation Info"],[3,"deactivationInfo"],["data-cy","repair-jobs",1,"detail-pane","essen-pane"],["sectionName","Repair Jobs"],[3,"list","listSettings",4,"ngIf"],[3,"list","listSettings"],[3,"healthyEvaluations","unhealthyEvaluations"],["sectionName","Deployed Applications"],["data-cy","appsList",3,"list","listSettings"]],template:function(e,s){1&e&&t.YNc(0,j,16,8,"div",0),2&e&&t.Q6J("ngIf",s.node)},directives:[r.O5,N.Q,N.W,J.u,A.u,T.P,U.x,Q.m,Y.f],styles:[""]}),n})();var L=a(1271);function b(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"app-collapse-container",3)(2,"h4",4),t._uU(3," Node "),t.qZA(),t._UZ(4,"app-detail-view-part",5),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("data",e.node.raw)("parent",e.node)}}function V(n,o){if(1&n&&(t.TgZ(0,"div",6),t._UZ(1,"app-detail-view-part",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("data",e.node.loadInformation.raw)("parent",e.node.loadInformation)}}let G=(()=>{class n extends d{constructor(e,s,i){super(e,s),this.data=e,this.settings=i}setup(){}refresh(e){return(0,g.D)([this.node.loadInformation.refresh(e)])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.D),t.Y36(t.zs3),t.Y36(y.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-details"]],features:[t.qOj],decls:2,vars:2,consts:[["class","detail-pane essen-pane",4,"ngIf"],["class","detail-pane essen-pane","data-cy","load",4,"ngIf"],[1,"detail-pane","essen-pane"],["sectionName","Node"],["collapse-header",""],["collapse-body","",3,"data","parent"],["data-cy","load",1,"detail-pane","essen-pane"]],template:function(e,s){1&e&&(t.YNc(0,b,5,2,"div",0),t.YNc(1,V,2,2,"div",1)),2&e&&(t.Q6J("ngIf",s.node),t.xp6(1),t.Q6J("ngIf",s.node&&s.node.loadInformation.isInitialized))},directives:[r.O5,T.P,L.d],styles:[""]}),n})();var X=a(8131);const W=[{path:"",component:S,children:[{path:"",component:P},{path:"details",component:G},{path:"events",component:(()=>{class n extends d{constructor(e,s){super(e,s),this.data=e}setup(){this.listEventStoreData=[this.data.getNodeEventData(this.nodeName)],this.optionsConfig={enableCluster:!0,enableRepairTasks:!0}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.D),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-events"]],features:[t.qOj],decls:2,vars:2,consts:[[3,"listEventStoreData","optionsConfig"]],template:function(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("listEventStoreData",s.listEventStoreData)("optionsConfig",s.optionsConfig))},directives:[X.h],styles:[""]}),n})()}]}];let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(W)],c.Bz]}),n})();var K=a(4466),$=a(6461),q=a(3308),k=a(1926),_=a(3426),tt=a(7883),et=a(1901),nt=a(9186);let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,H,K.m,$.Q,q.e,k.m,_.P,tt.m,et.c,nt.k]]}),n})()}}]);