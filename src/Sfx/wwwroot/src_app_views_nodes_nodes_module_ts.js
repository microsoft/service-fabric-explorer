"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_nodes_nodes_module_ts"],{2165:(P,O,e)=>{e.d(O,{J:()=>v});var m=e(2654),b=e(1086),t=e(5467),f=e(1709),n=e(5563),l=e(2684),r=e(5e3);let v=(()=>{class _{constructor(c){this.injector=c,this.subscriptions=new m.w}ngOnInit(){this.activatedRoute=this.injector.get(t.gz),this.refreshService=this.injector.get(n.g),this.messageService=this.injector.get(l.e),this.router=this.injector.get(t.F0),this.subscriptions.add(this.activatedRoute.params.subscribe(()=>{this.getParams(this.activatedRoute.snapshot),this.setup(),this.subscriptions.add(this.refreshService.refreshSubject.subscribe(()=>this.fullRefresh().subscribe())),this.subscriptions.add(this.fullRefresh().subscribe())})),console.log(this)}getClassName(){return this.constructor.name}setup(){}ngOnDestroy(){this.subscriptions.unsubscribe()}fullRefresh(){return this.common().pipe((0,f.zg)(()=>this.refresh(this.messageService)))}getParams(c){}refresh(c){return(0,b.of)(null)}common(c){return(0,b.of)(null)}}return _.\u0275fac=function(c){return new(c||_)(r.Y36(r.zs3))},_.\u0275dir=r.lG2({type:_}),_})()},2970:(P,O,e)=>{e.d(O,{D:()=>b,Z:()=>t});var m=e(4441);class b{constructor(n,l,r=[],v,_,h){this.title=n,this.titleInSingular=l,this.dataPoints=r,this.largeTile=v,this.routes=_,this.count=0,this.acessibilityText="",this.viewPath=h,this.count=r.reduce((c,M)=>c+M.count,0),this.adjustCount(),this.acessibilityText=`${n} has ${r[0].count} in error, ${r[1].count} in warning and ${r[2].count} are healthy.`}static fromHealthStateCount(n,l,r,v,_,h){const c=[];return c.push(new t("Error",v.ErrorCount,m.H.healthStatuses[3])),c.push(new t("Warning",v.WarningCount,m.H.healthStatuses[2])),c.push(new t("Healthy",v.OkCount,m.H.healthStatuses[1])),new b(n,l,c,r,_,h)}get displayTitle(){return 1===this.count?this.titleInSingular:this.title}getDataPointTooltip(n){return`${n.title}: ${(n.count/this.count*100).toFixed(1)}%`}onClick(){this.viewPath&&this.routes&&this.routes.navigate(()=>this.viewPath)}adjustCount(){this.dataPoints.forEach(n=>{n.adjustedCount=0===n.count?0:Math.max(.02*this.count,n.count)})}}class t{constructor(n,l,r){this.title=n,this.count=l,this.state=r,this.adjustedCount=0}}},7883:(P,O,e)=>{e.d(O,{m:()=>n});var m=e(9808),b=e(5467),t=e(4466),f=e(5e3);let n=(()=>{class l{}return l.\u0275fac=function(v){return new(v||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({imports:[[m.ez,b.Bz,t.m]]}),l})()},8628:(P,O,e)=>{e.d(O,{L:()=>T});var m=e(3470),t=e(5e3),f=e(9808),n=e(5467);const l=["chart"];function r(i,u){if(1&i&&(t.TgZ(0,"div",9),t._UZ(1,"div",10),t.TgZ(2,"div",11),t._uU(3),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA()()),2&i){const o=u.$implicit;t.xp6(1),t.Q6J("ngClass",o.state.badgeClass),t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.count)}}const v=function(i,u,o){return{"has-view-path":i,"dashboard-large":u,"dashboard-small":o}};function _(i,u){if(1&i&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t._UZ(3,"div",null,6),t.qZA(),t.TgZ(5,"div",7),t.YNc(6,r,6,3,"div",8),t.qZA()()()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(2,v,o.data.viewPath,o.data.largeTile,!o.data.largeTile)),t.xp6(5),t.Q6J("ngForOf",o.data.dataPoints)}}function h(i,u){1&i&&t.GkF(0)}function c(i,u){if(1&i&&(t.TgZ(0,"div",13),t.YNc(1,h,1,0,"ng-container",14),t.qZA()),2&i){const o=t.oxw(),p=t.MAs(1);t.uIk("aria-label",o.data.acessibilityText),t.xp6(1),t.Q6J("ngTemplateOutlet",p)}}function M(i,u){1&i&&t.GkF(0)}function E(i,u){if(1&i&&(t.TgZ(0,"a",15),t.YNc(1,M,1,0,"ng-container",14),t.qZA()),2&i){const o=t.oxw(),p=t.MAs(1);t.Q6J("routerLink",o.data.viewPath),t.uIk("aria-label",o.data.acessibilityText),t.xp6(1),t.Q6J("ngTemplateOutlet",p)}}let T=(()=>{class i{constructor(){this.fontColor={color:"#fff"},this.options={chart:{type:"pie",backgroundColor:null,borderRadius:0},title:{text:"test",align:"left",verticalAlign:"middle",y:0,x:10,style:{color:"#fff",fontSize:"15pt"}},subtitle:{text:"5",align:"left",verticalAlign:"middle",x:25,y:50,style:{color:"#fff",fontSize:"28pt"}},tooltip:{enabled:!1,animation:!1,formatter(){return`${this.point.name} : ${this.y}`}},credits:{enabled:!1},loading:{showDuration:0},plotOptions:{pie:{borderColor:"#191919",borderWidth:2,dataLabels:{enabled:!1,distance:-50,style:{fontWeight:"bold",color:"white"}},innerSize:"85%",startAngle:-50,endAngle:230}},series:[{animation:!1,type:"pie",data:[{name:"",y:1,color:"gray"}],states:{inactive:{opacity:1},hover:{opacity:1}}}]}}ngOnInit(){const p=6+(this.data.largeTile?230:150);this.options.chart.height=p,this.options.chart.width=p,this.options.title.text=this.data.displayTitle,this.options.subtitle.text=this.data.count.toString();const g=this.getDataSet();this.options.tooltip.enabled=3===g.length,this.options.series[0].data=g,this.data.largeTile||(this.options.title.style.fontSize="13pt",this.options.title.y=9,this.options.subtitle.style.fontSize="13pt",this.options.subtitle.y=30)}ngAfterViewInit(){this.chart=(0,m.chart)(this.chartContainer.nativeElement,this.options)}getDataSet(){const o={Healthy:"#7FBA00",Warning:"#FCD116",Error:"#E81123"},p=this.data.dataPoints.map(g=>({name:g.title,y:g.count,color:o[g.title]}));return p.every(g=>0===g.y)&&p.push({name:"",y:1,color:"gray"}),p}ngOnChanges(){if(this.chart){const o=this.getDataSet();this.chart.tooltip.update({enabled:3===o.length}),this.chart.series[0].setData(o),this.chart.title.update({text:this.data.displayTitle}),this.chart.subtitle.update({text:this.data.count.toString()})}}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dashboard-tile"]],viewQuery:function(o,p){if(1&o&&t.Gf(l,5),2&o){let g;t.iGM(g=t.CRH())&&(p.chartContainer=g.first)}},inputs:{data:"data"},features:[t.TTD],decls:5,vars:2,consts:[["internal",""],["default",""],[3,"routerLink",4,"ngIf","ngIfElse"],[1,"dashboard-wrapper"],["role","group",1,"dashboard",3,"ngClass"],[1,"dashboard-donut-chart","chart-wrapper"],["chart",""],[1,"dashboard-datapoints"],["class","dashboard-datapoint",4,"ngFor","ngForOf"],[1,"dashboard-datapoint"],[1,"dashboard-datapoint-leftbar",3,"ngClass"],[1,"dashboard-datapoint-title"],[1,"dashboard-datapoint-number"],["tabindex","0",2,"height","100%"],[4,"ngTemplateOutlet"],[3,"routerLink"]],template:function(o,p){if(1&o&&(t.YNc(0,_,7,6,"ng-template",null,0,t.W1O),t.YNc(2,c,2,2,"ng-template",null,1,t.W1O),t.YNc(4,E,2,3,"a",2)),2&o){const g=t.MAs(3);t.xp6(4),t.Q6J("ngIf",p.data.viewPath)("ngIfElse",g)}},directives:[f.mk,f.sg,f.tP,f.O5,n.yS],styles:[".dashboard-container-small[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:270px}.chart-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.dashboard-wrapper[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--font-primary-color)!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{box-shadow:var(--primary-box-shadow);border-radius:var(--primary-border-radius);color:var(--font-primary-color);padding:7px;background:var(--primary-background-color);text-align:center;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard.has-view-path[_ngcontent-%COMP%]{cursor:pointer}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]{display:block;position:relative;text-align:left;width:100%;height:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding-left:16px!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar[_ngcontent-%COMP%]{width:6px;position:absolute;left:0;top:0;bottom:0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-active[_ngcontent-%COMP%]{background:var(--accent-darkblue)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-inactive[_ngcontent-%COMP%]{background:var(--accent-background-color)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-title[_ngcontent-%COMP%]{display:block;font-size:11pt;line-height:.9}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-number[_ngcontent-%COMP%]{display:block;font-size:72px;line-height:1;margin:20px 0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]{padding:17px 7px;position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:20px 5px 0;display:-ms-flexbox;display:flex;-ms-flex-pack:space-evenly;justify-content:space-evenly}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{-ms-flex:1;flex:1}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:var(--font-size-default)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:24pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]{padding:7px 12px;position:relative;height:100%;width:100%;overflow:hidden}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:0 0 0 20px;float:right}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{height:36px;padding:0 0 0 14px;margin:4px 0 8px}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:11pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:16pt;width:54px}"]}),i})()},4556:(P,O,e)=>{e.r(O),e.d(O,{NodesModule:()=>I});var m=e(9808),b=e(5467),t=e(5237),f=e(5053),n=e(5e3),l=e(2261),r=e(7559),v=e(8118);let _=(()=>{class a{constructor(s,d){this.tree=s,this.data=d,this.tabs=[{name:"all nodes",route:"./"}]}ngOnInit(){this.data.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isEventStoreEnabled&&-1===this.tabs.indexOf(f.gT.EventsTab)&&(this.tabs=this.tabs.concat(f.gT.EventsTab))}),this.tree.selectTreeNode([t.R.cluster(),t.R.nodeGroup()],!0)}}return a.\u0275fac=function(s){return new(s||a)(n.Y36(l.r),n.Y36(r.D))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-base"]],decls:4,vars:2,consts:[["type","Nodes",3,"tabs","showCopy"],[1,"main-view"],[1,"flex-child"]],template:function(s,d){1&s&&(n._UZ(0,"app-navbar",0),n.TgZ(1,"div",1)(2,"div",2),n._UZ(3,"router-outlet"),n.qZA()()),2&s&&n.Q6J("tabs",d.tabs)("showCopy",!1)},directives:[v.S,b.lC],styles:[""]}),a})();var h=e(6174),c=e(2165),M=e(4850),E=e(2970),T=e(4333),i=e(8628),u=e(8833);function o(a,C){1&a&&n._UZ(0,"app-dashboard-tile",4),2&a&&n.Q6J("data",C.$implicit)}let p=(()=>{class a extends c.J{constructor(s,d,B){super(B),this.data=s,this.settings=d,this.tiles=[]}setup(){this.nodes=this.data.nodes,this.listSettings=this.settings.getNewOrExistingListSettings("nodes",["name"],[new h.a7("name","Name",s=>s.viewPath),new h.NL("raw.IpAddressOrFQDN","Address"),new h.v0("raw.Type","Node Type"),new h.v0("raw.UpgradeDomain","Upgrade Domain"),new h.v0("raw.FaultDomain","Fault Domain"),new h.v0("raw.IsSeedNode","Is Seed Node"),new h.Gp("healthState","Health State"),new h.v0("nodeStatus","Status"),new h.v0("raw.Id.Id","Node Id"),new h.v0("raw.CodeVersion","Code Version")])}refresh(s){return this.nodes.refresh(s).pipe((0,M.U)(()=>{this.tiles=[],this.nodes.getNodeStateCounts(!1,!1).forEach(d=>{this.tiles.push(E.D.fromHealthStateCount(d.nodeType,d.nodeType,!1,{ErrorCount:d.errorCount,WarningCount:d.warningCount,OkCount:d.okCount}))})}))}}return a.\u0275fac=function(s){return new(s||a)(n.Y36(r.D),n.Y36(T.g),n.Y36(n.zs3))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-all-nodes"]],features:[n.qOj],decls:4,vars:3,consts:[[1,"tile-container"],[3,"data",4,"ngFor","ngForOf"],[1,"detail-pane","essen-pane"],["data-cy","nodesList",3,"listSettings","list"],[3,"data"]],template:function(s,d){1&s&&(n.TgZ(0,"div",0),n.YNc(1,o,1,1,"app-dashboard-tile",1),n.qZA(),n.TgZ(2,"div",2),n._UZ(3,"app-detail-list",3),n.qZA()),2&s&&(n.xp6(1),n.Q6J("ngForOf",d.tiles),n.xp6(2),n.Q6J("listSettings",d.listSettings)("list",d.nodes.collection))},directives:[m.sg,i.L,u.m],styles:[""]}),a})();var g=e(8131);const x=[{path:"",component:_,children:[{path:"",component:p},{path:"events",component:(()=>{class a{constructor(s,d){this.data=s,this.settings=d}ngOnInit(){this.listEventStoreData=[this.data.getNodeEventData()],this.optionsConfig={enableCluster:!0,enableRepairTasks:!0}}}return a.\u0275fac=function(s){return new(s||a)(n.Y36(r.D),n.Y36(T.g))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-events"]],decls:2,vars:2,consts:[[3,"listEventStoreData","optionsConfig"]],template:function(s,d){1&s&&(n.TgZ(0,"div"),n._UZ(1,"app-event-store",0),n.qZA()),2&s&&(n.xp6(1),n.Q6J("listEventStoreData",d.listEventStoreData)("optionsConfig",d.optionsConfig))},directives:[g.h],styles:[""]}),a})()}]}];let y=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[b.Bz.forChild(x)],b.Bz]}),a})();var D=e(4466),w=e(6461),A=e(3308),S=e(7883);let I=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[m.ez,y,D.m,w.Q,A.e,S.m]]}),a})()}}]);