"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_applications_applications_module_ts"],{2165:(D,C,a)=>{a.d(C,{J:()=>T});var m=a(2654),h=a(1086),f=a(5467),p=a(1709),t=a(5563),c=a(2684),l=a(5e3);let T=(()=>{class _{constructor(d){this.injector=d,this.subscriptions=new m.w}ngOnInit(){this.activatedRoute=this.injector.get(f.gz),this.refreshService=this.injector.get(t.g),this.messageService=this.injector.get(c.e),this.router=this.injector.get(f.F0),this.subscriptions.add(this.activatedRoute.params.subscribe(()=>{this.getParams(this.activatedRoute.snapshot),this.setup(),this.subscriptions.add(this.refreshService.refreshSubject.subscribe(()=>this.fullRefresh().subscribe())),this.subscriptions.add(this.fullRefresh().subscribe())})),console.log(this)}getClassName(){return this.constructor.name}setup(){}ngOnDestroy(){this.subscriptions.unsubscribe()}fullRefresh(){return this.common().pipe((0,p.zg)(()=>this.refresh(this.messageService)))}getParams(d){}refresh(d){return(0,h.of)(null)}common(d){return(0,h.of)(null)}}return _.\u0275fac=function(d){return new(d||_)(l.Y36(l.zs3))},_.\u0275dir=l.lG2({type:_}),_})()},7883:(D,C,a)=>{a.d(C,{m:()=>t});var m=a(9808),h=a(5467),f=a(4466),p=a(5e3);let t=(()=>{class c{}return c.\u0275fac=function(T){return new(T||c)},c.\u0275mod=p.oAB({type:c}),c.\u0275inj=p.cJS({imports:[[m.ez,h.Bz,f.m]]}),c})()},1926:(D,C,a)=>{a.d(C,{m:()=>c});var m=a(9808),h=a(4466),f=a(322),p=a(6461),t=a(5e3);let c=(()=>{class l{}return l.\u0275fac=function(_){return new(_||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[m.ez,h.m,f.HK,p.Q]]}),l})()},1997:(D,C,a)=>{a.d(C,{S:()=>x});var m=a(3470),f=a(2055),p=a(5053),t=a(5e3),c=a(9808),l=a(322);const T=["chart"];function _(r,v){if(1&r&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA()()),2&r){const n=v.$implicit;t.Q6J("ngbTooltip",n.name+" - "+n.stateName),t.xp6(1),t.Q6J("ngClass",n.badgeClass),t.xp6(1),t.Oqu(n.name)}}function A(r,v){if(1&r&&(t.TgZ(0,"div",3),t.YNc(1,_,3,3,"div",4),t.qZA()),2&r){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.upgradeDomains)}}function d(r,v){if(1&r&&(t.TgZ(0,"div",9),t._UZ(1,"div",10),t.TgZ(2,"div",11),t._uU(3),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA()()),2&r){const n=v.$implicit;t.xp6(1),t.Q6J("ngClass",n.css),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.uds.length)}}function b(r,v){if(1&r&&(t.TgZ(0,"div")(1,"div",7),t.YNc(2,d,6,3,"div",8),t.qZA()()),2&r){const n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",n.tiles)}}function O(r,v){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,A,2,1,"div",2),t.YNc(2,b,3,1,"div",0),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.upgradeDomains.length<15),t.xp6(1),t.Q6J("ngIf",n.upgradeDomains.length>14)}}let x=(()=>{class r{constructor(){this.showChart=!1,this.tiles=[],this.displayUd=[]}ngAfterViewInit(){if(this.showChart){const n=this.getDataSet();this.chart=(0,m.chart)(this.chartContainer.nativeElement,{chart:{type:"pie",width:350,height:300,backgroundColor:null,borderRadius:0},title:{text:"",verticalAlign:"middle",style:{color:"#1234",fontSize:"15pt"}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:2,innerSize:"50%",borderColor:"#262626"},series:{dataLabels:{enabled:!0,color:"white",borderColor:"white",inside:!0,textPath:{enabled:!1}}}},tooltip:{formatter:(()=>{const g=this;return function(u){return`${this.key} <br> ${g.upgradeDomains[this.point.index].stateName}`}})()},series:[{data:n}]})}}getDataSet(){const n={"badge-unknown":"gray","badge-ok":"#088105","badge-warning":"#0075c9","badge-error":"#E81123"};let g=[];if(this.upgradeDomains.length>30){const u=new f.A;this.upgradeDomains.forEach(y=>u.add(y.stateName+"---"+y.badgeClass)),g=u.entries().map(y=>{const M=y.key.toString().split("---");return{type:"pie",name:M[0]+" : "+y.value,y:y.value,color:n[M[1]],dataLabels:{style:{fontSize:"13px",fontColor:"#fff"}}}})}else g=this.upgradeDomains.map(u=>({type:"pie",name:u.prefix+u.name,y:1,color:n[u.badgeClass],dataLabels:{style:{fontSize:"13px",fontColor:"#fff"}}}));return g.every(u=>0===u.y)&&g.push({type:"pie",name:"",y:1,color:"gray",dataLabels:{style:{fontSize:"20px",fontColor:"#fff"}}}),g}ngOnChanges(){if(this.chart)this.chart.series[0].setData(this.getDataSet());else{const n={};n[p.TK.Pending]={name:p.TK.Pending,css:p.IU.BadgeUnknown,uds:[]},n[p.TK.InProgress]={name:p.TK.InProgress,css:p.IU.BadgeWarning,uds:[]},n[p.TK.Completed]={name:p.TK.Completed,css:p.IU.BadgeOK,uds:[]},n[p.TK.Failed]={name:p.TK.Failed,css:p.IU.BadgeError,uds:[]},this.tiles=[n[p.TK.Completed],n[p.TK.InProgress],n[p.TK.Pending],n[p.TK.Failed]],this.upgradeDomains.forEach(g=>{n[g.stateName].uds.push(g)})}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-upgrade-progress"]],viewQuery:function(n,g){if(1&n&&t.Gf(T,5),2&n){let u;t.iGM(u=t.CRH())&&(g.chartContainer=u.first)}},inputs:{upgradeDomains:"upgradeDomains",showChart:"showChart"},features:[t.TTD],decls:3,vars:1,consts:[[4,"ngIf"],["chart",""],["class","upgrade-progress",4,"ngIf"],[1,"upgrade-progress"],["class","upgrade-domain-bar","tooltipClass","styled-tooltip",3,"ngbTooltip",4,"ngFor","ngForOf"],["tooltipClass","styled-tooltip",1,"upgrade-domain-bar",3,"ngbTooltip"],[1,"upgrade-domain-title",3,"ngClass"],[1,"dashboard-datapoints"],["class","dashboard-datapoint",4,"ngFor","ngForOf"],[1,"dashboard-datapoint"],[1,"dashboard-datapoint-leftbar",3,"ngClass"],[1,"dashboard-datapoint-title"],[1,"dashboard-datapoint-number"]],template:function(n,g){1&n&&(t.YNc(0,O,3,2,"div",0),t._UZ(1,"div",null,1)),2&n&&t.Q6J("ngIf",!g.showChart)},directives:[c.O5,c.sg,l._L,c.mk],styles:[".upgrade-progress[_ngcontent-%COMP%]{background-color:transparent;padding:1px;font-size:var(--font-size-small);margin:1px;border-spacing:0}.upgrade-progress[_ngcontent-%COMP%]   .upgrade-domain-bar[_ngcontent-%COMP%]{display:inline-block;color:#fff!important;padding:1px;text-align:center;vertical-align:middle}.upgrade-progress[_ngcontent-%COMP%]   .upgrade-domain-bar[_ngcontent-%COMP%]   .upgrade-domain-title[_ngcontent-%COMP%]{border:1px solid black;padding:1px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:32px;font-size:9pt;width:80px;height:35px;color:#fff!important}.badge-unknown[_ngcontent-%COMP%]{background-color:var(--badge-unknown)}.badge-ok[_ngcontent-%COMP%]{background-color:var(--badge-ok)}.badge-warning[_ngcontent-%COMP%]{background-color:var(--accent-darkblue)}.badge-error[_ngcontent-%COMP%]{background-color:var(--badge-error)}"],changeDetection:0}),r})()},5645:(D,C,a)=>{a.r(C),a.d(C,{ApplicationsModule:()=>$});var m=a(9808),h=a(5467),f=a(5237),p=a(5053),t=a(5e3),c=a(2261),l=a(7559),T=a(8118);let _=(()=>{class e{constructor(s,i){this.tree=s,this.dataService=i,this.SFXClusterName="",this.tabs=[{name:"all applications",route:"./"},{name:"upgrades in progress",route:"./upgrades"},{name:"app types",route:"./apptypes"}]}ngOnInit(){this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.dataService.clusterManifest.isEventStoreEnabled&&(this.tabs=this.tabs.concat(p.gT.EventsTab))}),this.tree.selectTreeNode([f.R.cluster(),f.R.appGroup()],!0)}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(c.r),t.Y36(l.D))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-base"]],decls:4,vars:3,consts:[["type","Applications",3,"tabs","name","showCopy"],[1,"main-view"],[1,"flex-child"]],template:function(s,i){1&s&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&s&&t.Q6J("tabs",i.tabs)("name","")("showCopy",!1)},directives:[T.S,h.lC],styles:[""]}),e})();var A=a(2165),d=a(6174),b=a(4850),O=a(4333),x=a(8833);function r(e,o){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"app-detail-list",2),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("list",s.apps.collection)("listSettings",s.listSettings)}}let v=(()=>{class e extends A.J{constructor(s,i,P){super(P),this.data=s,this.settings=i}setup(){this.listSettings=this.settings.getNewOrExistingListSettings("apps",["name"],[new d.a7("name","Name",s=>s.viewPath),new d.v0("raw.TypeName","Application Type"),new d.NL("raw.TypeVersion","Version"),new d.Gp("healthState","Health State"),new d.v0("raw.Status","Status")])}refresh(s){return this.data.getApps(!0,s).pipe((0,b.U)(i=>{this.apps=i}))}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(l.D),t.Y36(O.g),t.Y36(t.zs3))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-all"]],features:[t.qOj],decls:1,vars:1,consts:[["class","detail-pane essen-pane","data-cy","appslist",4,"ngIf"],["data-cy","appslist",1,"detail-pane","essen-pane"],["collapse-body","",3,"list","listSettings"]],template:function(s,i){1&s&&t.YNc(0,r,2,2,"div",0),2&s&&t.Q6J("ngIf",i.apps)},directives:[m.O5,x.m],styles:[""]}),e})();var n=a(8131);let g=(()=>{class e extends A.J{constructor(s,i){super(i),this.data=s}setup(){this.listEventStoreData=[this.data.getApplicationEventData()],this.optionsConfig={enableCluster:!0,enableNodes:!0,enableRepairTasks:!0}}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(l.D),t.Y36(t.zs3))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-events"]],features:[t.qOj],decls:2,vars:2,consts:[[3,"listEventStoreData","optionsConfig"]],template:function(s,i){1&s&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&s&&(t.xp6(1),t.Q6J("listEventStoreData",i.listEventStoreData)("optionsConfig",i.optionsConfig))},directives:[n.h],styles:[""]}),e})();var u=a(1709),y=a(1086),M=a(567),S=a(1997);let I=(()=>{class e{constructor(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-view-upgrades-list-item"]],decls:1,vars:1,consts:[[3,"upgradeDomains"]],template:function(s,i){1&s&&t._UZ(0,"app-upgrade-progress",0),2&s&&t.Q6J("upgradeDomains",i.item.upgradeDomains)},directives:[S.S],styles:[""]}),e})();function Z(e,o){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"app-detail-list",2),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("list",s.upgradeProgresses)("listSettings",s.upgradeAppsListSettings)}}let B=(()=>{class e extends A.J{constructor(s,i,P){super(P),this.data=s,this.settings=i,this.upgradeProgresses=[]}setup(){this.upgradeAppsListSettings=this.settings.getNewOrExistingListSettings("upgrades",["name"],[new d.a7("name","Name",s=>s.viewPath),new d.a7("parent.raw.TypeName","Application Type",s=>s.parent.appTypeViewPath),new d.NL("parent.raw.TypeVersion","Current Version"),new d.NL("raw.TargetApplicationTypeVersion","Target Version"),new d.mP(I,"upgrade","Progress by Upgrade Domain",{enableFilter:!1}),new d.v0("raw.UpgradeState","Upgrade State")])}refresh(s){return this.data.getApps(!0,s).pipe((0,u.zg)(i=>{this.apps=i;const P=this.apps.collection.filter(E=>E.isUpgrading).map(E=>E.upgradeProgress.refresh(s));return 0===P.length?(0,y.of)(null):(0,M.D)(P).pipe((0,b.U)(()=>{this.upgradeProgresses=this.apps.collection.filter(E=>E.isUpgrading).map(E=>E.upgradeProgress)}))}))}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(l.D),t.Y36(O.g),t.Y36(t.zs3))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-upgrading"]],features:[t.qOj],decls:1,vars:1,consts:[["class","detail-pane essen-pane","data-cy","upgradingapps",4,"ngIf"],["data-cy","upgradingapps",1,"detail-pane","essen-pane"],[3,"list","listSettings"]],template:function(s,i){1&s&&t.YNc(0,Z,2,2,"div",0),2&s&&t.Q6J("ngIf",i.upgradeProgresses)},directives:[m.O5,x.m],styles:[""]}),e})();var N=a(2957),K=a(8285),U=a(322);function R(e,o){if(1&e&&t._UZ(0,"app-dashboard-text-tile",4),2&e){const s=t.oxw();t.Q6J("barClass","badge-upgrade-active")("count",s.usage.activeAppTypes.length)}}function J(e,o){if(1&e&&t._UZ(0,"app-dashboard-text-tile",5),2&e){const s=t.oxw();t.Q6J("barClass","badge-upgrade-inactive")("count",s.usage.inactiveTypes.length)}}function z(e,o){if(1&e&&t._UZ(0,"app-detail-list",17),2&e){const s=t.oxw(2);t.Q6J("list",s.usage.activeAppTypes)("listSettings",s.activeAppTypesListSettings)}}function Q(e,o){if(1&e&&t._UZ(0,"app-detail-list",18),2&e){const s=t.oxw(2);t.Q6J("list",s.usage.inactiveTypes)("listSettings",s.appTypesListSettings)}}function W(e,o){if(1&e&&(t.TgZ(0,"div",6)(1,"app-collapse-container",7)(2,"h4",8),t._uU(3," Application Type versions "),t.qZA(),t.TgZ(4,"div",9)(5,"div",10,11)(7,"div",12)(8,"a",13),t._uU(9," In Use "),t._UZ(10,"span",14),t.qZA(),t.YNc(11,z,1,2,"ng-template",15),t.qZA(),t.TgZ(12,"div",12)(13,"a",13),t._uU(14," Unused "),t.qZA(),t.YNc(15,Q,1,2,"ng-template",15),t.qZA()(),t._UZ(16,"div",16),t.qZA()()()),2&e){const s=t.MAs(6);t.xp6(16),t.Q6J("ngbNavOutlet",s)}}let F=(()=>{class e extends A.J{constructor(s,i,P){super(P),this.dataService=s,this.settings=i}setup(){this.activeAppTypesListSettings=this.settings.getNewOrExistingAppTypeListSettings(!1,!1),this.appTypesListSettings=this.settings.getNewOrExistingAppTypeListSettings(!1,!1)}refresh(s){return this.dataService.appTypeGroups.ensureInitialized(!0,s).pipe((0,u.zg)(()=>this.dataService.appTypeGroups.getAppTypeUsage().pipe((0,b.U)(i=>{this.usage=i}))))}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(l.D),t.Y36(O.g),t.Y36(t.zs3))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-apptype-viewer"]],features:[t.qOj],decls:4,vars:3,consts:[["data-cy","tiles",1,"tile-container"],["title","Active Application Types","style","display: block","data-cy","active-app-type",3,"barClass","count",4,"ngIf"],["title","Unused Application Types","style","display: block","data-cy","inactive-app-type",3,"barClass","count",4,"ngIf"],["class","detail-pane essen-pane",4,"ngIf"],["title","Active Application Types","data-cy","active-app-type",2,"display","block",3,"barClass","count"],["title","Unused Application Types","data-cy","inactive-app-type",2,"display","block",3,"barClass","count"],[1,"detail-pane","essen-pane"],["sectionName","Application Type versions"],["collapse-header",""],["collapse-body",""],["ngbNav","",1,"nav-wrapper"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink","",2,"font-size","12pt"],["tabindex","0","ngbTooltip","Application Types which have at least 1 application instance.","placement","bottom","tooltipClass","styled-tooltip","container","body",1,"mif-info",2,"font-size","small"],["ngbNavContent",""],[3,"ngbNavOutlet"],["data-cy","appTypeVersions",3,"list","listSettings"],[3,"list","listSettings"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.YNc(1,R,1,2,"app-dashboard-text-tile",1),t.YNc(2,J,1,2,"app-dashboard-text-tile",2),t.qZA(),t.YNc(3,W,17,1,"div",3)),2&s&&(t.xp6(1),t.Q6J("ngIf",i.usage),t.xp6(1),t.Q6J("ngIf",i.usage),t.xp6(1),t.Q6J("ngIf",i.usage))},directives:[m.O5,N.u,K.P,U.Pz,U.nv,U.Vx,U.uN,x.m,U.tO],styles:[""]}),e})();const V=[{path:"",component:_,children:[{path:"",component:v},{path:"apptypes",component:(()=>{class e{constructor(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-apptypes"]],decls:1,vars:0,template:function(s,i){1&s&&t._UZ(0,"app-apptype-viewer")},directives:[F],styles:[""]}),e})()},{path:"upgrades",component:B},{path:"events",component:g}]}];let Y=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(V)],h.Bz]}),e})();var w=a(4466),L=a(6461),j=a(3308),X=a(1926),G=a(7883);let H=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,G.m,U.Oz,L.Q,w.m]]}),e})(),$=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,Y,w.m,L.Q,j.e,X.m,H]]}),e})()}}]);