"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["default-src_app_ViewModels_DashboardViewModels_ts-src_app_modules_charts_dashboard-tile_dashb-0a3cde"],{2970:(w,P,d)=>{d.d(P,{D:()=>C,Z:()=>t});var c=d(4441);class C{constructor(n,u,m=[],x,T,y){this.title=n,this.titleInSingular=u,this.dataPoints=m,this.largeTile=x,this.routes=T,this.count=0,this.acessibilityText="",this.viewPath=y,this.count=m.reduce((_,v)=>_+v.count,0),this.adjustCount(),this.acessibilityText=`${n} has ${m[0].count} in error, ${m[1].count} in warning and ${m[2].count} are healthy.`}static fromHealthStateCount(n,u,m,x,T,y){const _=[];return _.push(new t("Error",x.ErrorCount,c.H.healthStatuses[3])),_.push(new t("Warning",x.WarningCount,c.H.healthStatuses[2])),_.push(new t("Healthy",x.OkCount,c.H.healthStatuses[1])),new C(n,u,_,m,T,y)}get displayTitle(){return 1===this.count?this.titleInSingular:this.title}getDataPointTooltip(n){return`${n.title}: ${(n.count/this.count*100).toFixed(1)}%`}onClick(){this.viewPath&&this.routes&&this.routes.navigate(()=>this.viewPath)}adjustCount(){this.dataPoints.forEach(n=>{n.adjustedCount=0===n.count?0:Math.max(.02*this.count,n.count)})}}class t{constructor(n,u,m){this.title=n,this.count=u,this.state=m,this.adjustedCount=0}}},8628:(w,P,d)=>{d.d(P,{L:()=>D});var c=d(3470),t=d(5e3),e=d(9808),n=d(5467);const u=["chart"];function m(r,h){if(1&r&&(t.TgZ(0,"div",9),t._UZ(1,"div",10),t.TgZ(2,"div",11),t._uU(3),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA()()),2&r){const i=h.$implicit;t.xp6(1),t.Q6J("ngClass",i.state.badgeClass),t.xp6(2),t.Oqu(i.title),t.xp6(2),t.Oqu(i.count)}}const x=function(r,h,i){return{"has-view-path":r,"dashboard-large":h,"dashboard-small":i}};function T(r,h){if(1&r&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t._UZ(3,"div",null,6),t.qZA(),t.TgZ(5,"div",7),t.YNc(6,m,6,3,"div",8),t.qZA()()()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(2,x,i.data.viewPath,i.data.largeTile,!i.data.largeTile)),t.xp6(5),t.Q6J("ngForOf",i.data.dataPoints)}}function y(r,h){1&r&&t.GkF(0)}function _(r,h){if(1&r&&(t.TgZ(0,"div",13),t.YNc(1,y,1,0,"ng-container",14),t.qZA()),2&r){const i=t.oxw(),l=t.MAs(1);t.uIk("aria-label",i.data.acessibilityText),t.xp6(1),t.Q6J("ngTemplateOutlet",l)}}function v(r,h){1&r&&t.GkF(0)}function O(r,h){if(1&r&&(t.TgZ(0,"a",15),t.YNc(1,v,1,0,"ng-container",14),t.qZA()),2&r){const i=t.oxw(),l=t.MAs(1);t.Q6J("routerLink",i.data.viewPath),t.uIk("aria-label",i.data.acessibilityText),t.xp6(1),t.Q6J("ngTemplateOutlet",l)}}let D=(()=>{class r{constructor(){this.fontColor={color:"#fff"},this.options={chart:{type:"pie",backgroundColor:null,borderRadius:0},title:{text:"test",align:"left",verticalAlign:"middle",y:0,x:10,style:{color:"#fff",fontSize:"15pt"}},subtitle:{text:"5",align:"left",verticalAlign:"middle",x:25,y:50,style:{color:"#fff",fontSize:"28pt"}},tooltip:{enabled:!1,animation:!1,formatter(){return`${this.point.name} : ${this.y}`}},credits:{enabled:!1},loading:{showDuration:0},plotOptions:{pie:{borderColor:"#191919",borderWidth:2,dataLabels:{enabled:!1,distance:-50,style:{fontWeight:"bold",color:"white"}},innerSize:"85%",startAngle:-50,endAngle:230}},series:[{animation:!1,type:"pie",data:[{name:"",y:1,color:"gray"}],states:{inactive:{opacity:1},hover:{opacity:1}}}]}}ngOnInit(){const l=6+(this.data.largeTile?230:150);this.options.chart.height=l,this.options.chart.width=l,this.options.title.text=this.data.displayTitle,this.options.subtitle.text=this.data.count.toString();const g=this.getDataSet();this.options.tooltip.enabled=3===g.length,this.options.series[0].data=g,this.data.largeTile||(this.options.title.style.fontSize="13pt",this.options.title.y=9,this.options.subtitle.style.fontSize="13pt",this.options.subtitle.y=30)}ngAfterViewInit(){this.chart=(0,c.chart)(this.chartContainer.nativeElement,this.options)}getDataSet(){const i={Healthy:"#7FBA00",Warning:"#FCD116",Error:"#E81123"},l=this.data.dataPoints.map(g=>({name:g.title,y:g.count,color:i[g.title]}));return l.every(g=>0===g.y)&&l.push({name:"",y:1,color:"gray"}),l}ngOnChanges(){if(this.chart){const i=this.getDataSet();this.chart.tooltip.update({enabled:3===i.length}),this.chart.series[0].setData(i),this.chart.title.update({text:this.data.displayTitle}),this.chart.subtitle.update({text:this.data.count.toString()})}}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dashboard-tile"]],viewQuery:function(i,l){if(1&i&&t.Gf(u,5),2&i){let g;t.iGM(g=t.CRH())&&(l.chartContainer=g.first)}},inputs:{data:"data"},features:[t.TTD],decls:5,vars:2,consts:[["internal",""],["default",""],[3,"routerLink",4,"ngIf","ngIfElse"],[1,"dashboard-wrapper"],["role","group",1,"dashboard",3,"ngClass"],[1,"dashboard-donut-chart","chart-wrapper"],["chart",""],[1,"dashboard-datapoints"],["class","dashboard-datapoint",4,"ngFor","ngForOf"],[1,"dashboard-datapoint"],[1,"dashboard-datapoint-leftbar",3,"ngClass"],[1,"dashboard-datapoint-title"],[1,"dashboard-datapoint-number"],["tabindex","0",2,"height","100%"],[4,"ngTemplateOutlet"],[3,"routerLink"]],template:function(i,l){if(1&i&&(t.YNc(0,T,7,6,"ng-template",null,0,t.W1O),t.YNc(2,_,2,2,"ng-template",null,1,t.W1O),t.YNc(4,O,2,3,"a",2)),2&i){const g=t.MAs(3);t.xp6(4),t.Q6J("ngIf",l.data.viewPath)("ngIfElse",g)}},directives:[e.mk,e.sg,e.tP,e.O5,n.yS],styles:[".dashboard-container-small[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:270px}.chart-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.dashboard-wrapper[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--font-primary-color)!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{box-shadow:var(--primary-box-shadow);border-radius:var(--primary-border-radius);color:var(--font-primary-color);padding:7px;background:var(--primary-background-color);text-align:center;height:100%;width:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard.has-view-path[_ngcontent-%COMP%]{cursor:pointer}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]{display:block;position:relative;text-align:left;width:100%;height:100%}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding-left:16px!important}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar[_ngcontent-%COMP%]{width:6px;position:absolute;left:0;top:0;bottom:0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-active[_ngcontent-%COMP%]{background:var(--accent-darkblue)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-leftbar.badge-upgrade-inactive[_ngcontent-%COMP%]{background:var(--accent-background-color)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-title[_ngcontent-%COMP%]{display:block;font-size:11pt;line-height:.9}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .dashboard-tile[_ngcontent-%COMP%]   .dashboard-tile-inner[_ngcontent-%COMP%]   .dashboard-tile-number[_ngcontent-%COMP%]{display:block;font-size:72px;line-height:1;margin:20px 0}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]{padding:17px 7px;position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:20px 5px 0;display:-ms-flexbox;display:flex;-ms-flex-pack:space-evenly;justify-content:space-evenly}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{-ms-flex:1;flex:1}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:var(--font-size-default)}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-large[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:24pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]{padding:7px 12px;position:relative;height:100%;width:100%;overflow:hidden}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]{margin:0 0 0 20px;float:right}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]{height:36px;padding:0 0 0 14px;margin:4px 0 8px}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-title[_ngcontent-%COMP%]{font-size:11pt}.dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-small[_ngcontent-%COMP%]   .dashboard-datapoints[_ngcontent-%COMP%]   .dashboard-datapoint[_ngcontent-%COMP%]   .dashboard-datapoint-number[_ngcontent-%COMP%]{font-size:16pt;width:54px}"]}),r})()},9196:(w,P,d)=>{d.d(P,{Y:()=>j});var c=d(4458),C=d(1455),t=d(5597),e=d(5e3),n=d(4333),u=d(9808),m=d(9342),x=d(8285),T=d(3847);let y=(()=>{class o{constructor(){this.failed=!1,this.progress=[],this.index=-1}ngOnChanges(){this.index={PreUpgradeSafetyCheck:1,Upgrading:2,PostUpgradeSafetyCheck:3}[this.node.UpgradePhase],this.index>1&&!this.failed&&this.index++,this.progress=[{name:"PreUpgrade SafetyCheck"},{name:"Upgrading"},{name:"PostUpgrade SafetyCheck"}]}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-node-progress"]],inputs:{failed:"failed",node:"node"},features:[e.TTD],decls:8,vars:5,consts:[[1,"flex-center",2,"font-size","15px","padding","5px","justify-content","space-between"],[1,"flex-center",2,"margin-left","10px","margin-bottom","5px"],[3,"items","currentIndex","failed"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"div",1),e._uU(6," Phase : "),e._UZ(7,"app-phase-diagram",2),e.qZA()),2&a&&(e.xp6(2),e.hij(" Node : ",s.node.NodeName," "),e.xp6(2),e.hij(" Safety Check(s) : ",s.node.PendingSafetyChecks.length," "),e.xp6(3),e.Q6J("items",s.progress)("currentIndex",s.index)("failed",s.failed))},directives:[T.A],styles:[""]}),o})();var _=d(1627);function v(o,p){if(1&o&&(e.TgZ(0,"div",1)(1,"app-collapse-container",2)(2,"div",3),e._UZ(3,"app-node-progress",4),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-safety-checks",6),e.qZA()()()),2&o){const a=p.$implicit,s=e.oxw();e.xp6(1),e.Q6J("sectionName",a.NodeName+" Progress "),e.xp6(2),e.Q6J("node",a)("failed",s.failed),e.xp6(2),e.Q6J("safetyChecks",a.PendingSafetyChecks)}}let O=(()=>{class o{constructor(){this.partitions={},this.failed=!1}nodeTrackBy(a,s){return s.NodeName}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upgrade-domain-progress"]],inputs:{failed:"failed",upgradeDomain:"upgradeDomain"},decls:1,vars:2,consts:[["style","border-bottom: 1px solid gray; ",4,"ngFor","ngForOf","ngForTrackBy"],[2,"border-bottom","1px solid gray"],["collapsed","true",3,"sectionName"],["collapse-header",""],[3,"node","failed"],["collapse-body","",1,"table-responsive"],[3,"safetyChecks"]],template:function(a,s){1&a&&e.YNc(0,v,6,4,"div",0),2&a&&e.Q6J("ngForOf",s.upgradeDomain.NodeUpgradeProgressList)("ngForTrackBy",s.nodeTrackBy)},directives:[u.sg,x.P,y,_.L],styles:[""],changeDetection:0}),o})();var D=d(8139),r=d(1997),h=d(8673);let i=(()=>{class o{transform(a){return t.I.getDuration(a)}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275pipe=e.Yjl({name:"formatDate",type:o,pure:!0}),o})();const l=function(o){return{flex:o}};let g=(()=>{class o{constructor(){this.topText="",this.topHelpText="",this.bottomText="",this.bottomHelpText="",this.bottomHelpTextLink="",this.timeLeft=0,this.leftDuration=0,this.rightDuration=0,this.barColor=""}ngOnChanges(){this.leftDuration=this.topInMilliseconds/this.bottomInMilliseconds,this.rightDuration=1-this.leftDuration,this.timeLeft=this.bottomInMilliseconds-this.topInMilliseconds,this.barColor=this.setColorCode(this.leftDuration)}setColorCode(a){return a>.75?"red":a>.5?"yellow":"blue"}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-display-duration"]],inputs:{topText:"topText",topInMilliseconds:"topInMilliseconds",topHelpText:"topHelpText",bottomText:"bottomText",bottomInMilliseconds:"bottomInMilliseconds",bottomHelpText:"bottomHelpText",bottomHelpTextLink:"bottomHelpTextLink"},features:[e.TTD],decls:12,vars:17,consts:[[2,"flex","1"],[2,"display","flex","margin-bottom","5px","margin-top","5px"],["data-cy","bar-progress",2,"height","5px",3,"ngClass","ngStyle"],[2,"height","5px","background-color","grey",3,"ngStyle"],["target","_blank",1,"link",2,"float","right",3,"href"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div"),e._uU(2),e.ALo(3,"formatDate"),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"div",2)(6,"div",3),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"formatDate"),e.TgZ(10,"a",4),e._uU(11),e.qZA()()()),2&a&&(e.xp6(2),e.AsE(" ",s.topText," : ",e.lcZ(3,9,s.topInMilliseconds)," "),e.xp6(3),e.Q6J("ngClass",s.barColor)("ngStyle",e.VKq(13,l,s.leftDuration)),e.xp6(1),e.Q6J("ngStyle",e.VKq(15,l,s.rightDuration)),e.xp6(2),e.AsE(" ",s.bottomText," : ",e.lcZ(9,11,s.timeLeft)," "),e.xp6(2),e.Q6J("href",s.bottomHelpTextLink,e.LSH),e.xp6(1),e.hij(" ",s.bottomHelpText," "))},directives:[u.mk,u.PC],pipes:[i],styles:[""]}),o})();var b=d(8833);function I(o,p){1&o&&e._UZ(0,"app-essential-item",7),2&o&&e.Q6J("item",p.$implicit)("underline",!1)}function A(o,p){if(1&o&&(e.TgZ(0,"div",19)(1,"h5",20),e._uU(2,"Nodes Upgrading Status at Failure"),e.qZA(),e._UZ(3,"app-upgrade-domain-progress",21),e.qZA()),2&o){const a=e.oxw(2);e.xp6(3),e.Q6J("failed",!0)("upgradeDomain",a.upgradeProgress.raw.UpgradeDomainProgressAtFailure)}}function N(o,p){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"h5"),e._uU(4,"Upgrade Failure Overview"),e.qZA(),e.YNc(5,I,1,2,"app-essential-item",6),e.qZA(),e.YNc(6,A,4,2,"div",18),e.qZA()()),2&o){const a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.failedUpgradeItems),e.xp6(1),e.Q6J("ngIf",(null==a.upgradeProgress.raw.UpgradeDomainProgressAtFailure?null:a.upgradeProgress.raw.UpgradeDomainProgressAtFailure.NodeUpgradeProgressList.length)>0)}}function L(o,p){1&o&&e._UZ(0,"app-warning",22)}function H(o,p){if(1&o&&(e.TgZ(0,"div",23)(1,"h5"),e._uU(2),e.qZA(),e._UZ(3,"app-upgrade-progress",24),e.qZA()),2&o){const a=e.oxw();e.xp6(2),e.hij("",a.upgradeProgress.isUDUpgrade?"Upgrade Domain":"Node"," Progress"),e.xp6(1),e.Q6J("upgradeDomains",a.upgradeProgress.upgradeDomains)("showChart",!0)}}function V(o,p){1&o&&e._UZ(0,"app-essential-item",7),2&o&&e.Q6J("item",p.$implicit)("underline",!1)}function W(o,p){if(1&o&&e._UZ(0,"app-essential-item",25),2&o){const a=e.oxw();e.Q6J("item",a.upgradeDuration)}}function K(o,p){if(1&o&&(e.TgZ(0,"div",26),e._UZ(1,"app-display-duration",27),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.Q6J("topInMilliseconds",a.upgradeProgress.upgradeTime)("bottomHelpText",a.helpText)("bottomHelpTextLink",a.link)("bottomInMilliseconds",a.upgradeProgress.getUpgradeTimeout())}}function R(o,p){1&o&&e._UZ(0,"app-essential-item",7),2&o&&e.Q6J("item",p.$implicit)("underline",!1)}function Y(o,p){if(1&o&&(e.TgZ(0,"div",28)(1,"h5"),e._uU(2,"Current Domain"),e.qZA(),e.YNc(3,R,1,2,"app-essential-item",6),e.TgZ(4,"div",29),e._UZ(5,"app-display-duration",30),e.qZA()()),2&o){const a=e.oxw();e.xp6(3),e.Q6J("ngForOf",a.essentialItems2),e.xp6(2),e.Q6J("topInMilliseconds",a.upgradeProgress.currentDomainTime)("bottomHelpText",a.helpText)("bottomHelpTextLink",a.link)("bottomInMilliseconds",a.upgradeProgress.getUpgradeDomainTimeout())}}function q(o,p){1&o&&e._UZ(0,"app-essential-item",7),2&o&&e.Q6J("item",p.$implicit)("underline",!1)}function z(o,p){if(1&o&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Monitoring And Health Policies"),e.qZA(),e.YNc(3,q,1,2,"app-essential-item",6),e.qZA()),2&o){const a=e.oxw();e.xp6(3),e.Q6J("ngForOf",a.healthPolicy)}}function B(o,p){if(1&o&&(e.TgZ(0,"div",31)(1,"h5",20),e._uU(2,"Nodes status"),e.qZA(),e._UZ(3,"app-upgrade-domain-progress",32),e.qZA()),2&o){const a=e.oxw();e.xp6(3),e.Q6J("upgradeDomain",a.upgradeProgress.nodesInProgress)}}function $(o,p){if(1&o&&(e.TgZ(0,"div",33)(1,"h4"),e._uU(2,"Unhealthy Evaluations (Upgrade)"),e.qZA(),e._UZ(3,"app-detail-list",34),e.qZA()),2&o){const a=e.oxw();e.xp6(3),e.Q6J("list",a.upgradeProgress.unhealthyEvaluations)("listSettings",a.upgradeProgressUnhealthyEvaluationsListSettings)}}let j=(()=>{class o{constructor(a){this.settings=a,this.essentialItems=[],this.essentialItems2=[],this.failedUpgradeItems=[],this.healthPolicy=[],this.helpText="",this.link="https://docs.microsoft.com/azure/service-fabric/service-fabric-application-upgrade#rolling-upgrades-overview",this.failed=!1,this.manual=!1}ngOnInit(){this.upgradeProgressUnhealthyEvaluationsListSettings=this.settings.getNewOrExistingUnhealthyEvaluationsListSettings("clusterUpgradeProgressUnhealthyEvaluations")}ngOnChanges(){var a,s,k,E,S,F;if(this.manual="UnmonitoredManual"===this.upgradeProgress.raw.RollingUpgradeMode,this.failed="None"!==this.upgradeProgress.raw.FailureReason,this.failed){this.failedUpgradeItems=[{descriptionName:"Failure Reason",copyTextValue:this.upgradeProgress.raw.FailureReason,displayText:this.upgradeProgress.raw.FailureReason},{descriptionName:"Failure Timestamp",copyTextValue:this.upgradeProgress.raw.FailureTimestampUtc,displayText:this.upgradeProgress.raw.FailureTimestampUtc}];const f=this.upgradeProgress.raw.UpgradeDomainProgressAtFailure.DomainName;f&&this.failedUpgradeItems.push({descriptionName:"Failure Domain",copyTextValue:f,displayText:f})}const Z=null===(s=null===(a=this.upgradeProgress.raw)||void 0===a?void 0:a.UpgradeDescription)||void 0===s?void 0:s.MonitoringPolicy;if(Z){const f=t.I.getDuration(Z.HealthCheckRetryTimeoutInMilliseconds),U=t.I.getDuration(Z.HealthCheckStableDurationInMilliseconds),M=t.I.getDuration(Z.HealthCheckWaitDurationInMilliseconds);this.healthPolicy=[{descriptionName:"Health Check Wait Duration",copyTextValue:M,displayText:M},{descriptionName:"Health Check Stable Duration",copyTextValue:U,displayText:U},{descriptionName:"Health Check Retry Time Out",copyTextValue:f,displayText:f}]}let Q=[];if(this.upgradeProgress instanceof C.XI){Q=[{descriptionName:"Code Version",copyTextValue:this.upgradeProgress.raw.CodeVersion,displayText:this.upgradeProgress.raw.CodeVersion},{descriptionName:"Config Version",copyTextValue:this.upgradeProgress.raw.ConfigVersion,displayText:this.upgradeProgress.raw.ConfigVersion}];const f=null===(E=null===(k=this.upgradeProgress.raw)||void 0===k?void 0:k.UpgradeDescription)||void 0===E?void 0:E.ClusterHealthPolicy;if(f){const U=f.ConsiderWarningAsError,M=`${f.MaxPercentUnhealthyNodes}%`,J=`${f.MaxPercentUnhealthyApplications}%`;this.healthPolicy=this.healthPolicy.concat([{descriptionName:"Treat Warnings As Errors",copyTextValue:U.toString(),displayText:U.toString()},{descriptionName:"Max Unhealthy Nodes %",copyTextValue:M,displayText:M},{descriptionName:"Max Unhealthy Applications %",copyTextValue:J,displayText:J}])}}else if(this.upgradeProgress instanceof c.s6){Q=[{descriptionName:"Target Version",copyTextValue:this.upgradeProgress.raw.TargetApplicationTypeVersion,displayText:this.upgradeProgress.raw.TargetApplicationTypeVersion}];const f=null===(F=null===(S=this.upgradeProgress.raw)||void 0===S?void 0:S.UpgradeDescription)||void 0===F?void 0:F.ApplicationHealthPolicy;if(f){const U=f.ConsiderWarningAsError,M=`${f.MaxPercentUnhealthyDeployedApplications}%`;this.healthPolicy=this.healthPolicy.concat([{descriptionName:"Treat Warnings As Errors",copyTextValue:U.toString(),displayText:U.toString()},{descriptionName:"Max Unhealthy Deployed Applications %",copyTextValue:M,displayText:M}])}}this.essentialItems=Q.concat([{descriptionName:"Upgrade State",copyTextValue:this.upgradeProgress.raw.UpgradeState,displayText:this.upgradeProgress.raw.UpgradeState},{descriptionName:"Upgrade Mode",copyTextValue:this.upgradeProgress.raw.RollingUpgradeMode,displayText:this.upgradeProgress.raw.RollingUpgradeMode}]),this.startTimeEssentialItem={descriptionName:"Start Timestamp UTC",copyTextValue:this.upgradeProgress.startTimestampUtc,displayText:this.upgradeProgress.startTimestampUtc,displaySelector:!0},!this.upgradeProgress.isUDUpgrade&&this.upgradeProgress.isUpgrading&&this.essentialItems.push({descriptionName:"Upgrade Type",displayText:"Node by Node"}),this.upgradeProgress.isUpgrading&&this.upgradeProgress.isUDUpgrade?(this.essentialItems2=[{descriptionName:"Current Upgrade Domain",copyTextValue:this.upgradeProgress.raw.CurrentUpgradeDomainProgress.DomainName,displayText:this.upgradeProgress.raw.CurrentUpgradeDomainProgress.DomainName}],this.helpText="Failure Action : "+this.upgradeProgress.raw.UpgradeDescription.MonitoringPolicy.FailureAction):this.upgradeDuration={descriptionName:"Duration",copyTextValue:this.upgradeProgress.upgradeDuration,displayText:this.upgradeProgress.upgradeDuration},console.log(this)}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(n.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upgrade-info"]],inputs:{upgradeProgress:"upgradeProgress"},features:[e.TTD],decls:18,vars:13,consts:[[1,"detail-pane"],["data-cy","failedupgrade",4,"ngIf"],[1,"layout-container"],["data-cy","manualmode","description","Unmonitored manual mode needs manual intervention after every upgrade on an update domain,\n                                  to kick off the upgrade on the next update domain. No Service Fabric health checks are performed.\n                                  The administrator performs the health or status checks before starting the upgrade in the next update domain.",4,"ngIf"],["class","domain-container",4,"ngIf"],[1,"overview-container"],[3,"item","underline",4,"ngFor","ngForOf"],[3,"item","underline"],[3,"time"],[3,"item",4,"ngIf"],["class","duration","data-cy","upgrade-bar",4,"ngIf"],["data-cy","cud",4,"ngIf"],[4,"ngIf"],["data-cy","currentud","class","node-list",4,"ngIf"],["class","detail-pane","data-cy","upgradeHealthEvents","style","margin-top: 10px;",4,"ngIf"],["data-cy","failedupgrade"],[1,"layout-container","failed"],["data-cy","failureoverview",1,"overview-container"],["data-cy","failedud","class","node-list",4,"ngIf"],["data-cy","failedud",1,"node-list"],[2,"text-align","center"],[3,"failed","upgradeDomain"],["data-cy","manualmode","description","Unmonitored manual mode needs manual intervention after every upgrade on an update domain,\n                                  to kick off the upgrade on the next update domain. No Service Fabric health checks are performed.\n                                  The administrator performs the health or status checks before starting the upgrade in the next update domain."],[1,"domain-container"],[2,"align-self","center",3,"upgradeDomains","showChart"],[3,"item"],["data-cy","upgrade-bar",1,"duration"],["topText","Upgrade Duration","bottomText","Time Left Until Timeout",3,"topInMilliseconds","bottomHelpText","bottomHelpTextLink","bottomInMilliseconds"],["data-cy","cud"],["data-cy","upgrade-bar-domain",1,"duration"],["topText","Upgrade Domain Duration","bottomText","Time Left Until Timeout",3,"topInMilliseconds","bottomHelpText","bottomHelpTextLink","bottomInMilliseconds"],["data-cy","currentud",1,"node-list"],[3,"upgradeDomain"],["data-cy","upgradeHealthEvents",1,"detail-pane",2,"margin-top","10px"],[3,"list","listSettings"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e.YNc(1,N,7,2,"div",1),e.TgZ(2,"div",2),e.YNc(3,L,1,0,"app-warning",3),e.YNc(4,H,4,3,"div",4),e.TgZ(5,"div",5)(6,"div")(7,"h5"),e._uU(8,"Overview"),e.qZA(),e.YNc(9,V,1,2,"app-essential-item",6),e.TgZ(10,"app-essential-item",7),e._UZ(11,"app-display-time",8),e.qZA(),e.YNc(12,W,1,1,"app-essential-item",9),e.YNc(13,K,2,4,"div",10),e.qZA(),e.YNc(14,Y,6,5,"div",11),e.qZA(),e.YNc(15,z,4,1,"div",12),e.YNc(16,B,4,1,"div",13),e.qZA(),e.YNc(17,$,4,2,"div",14),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",s.failed),e.xp6(2),e.Q6J("ngIf",s.manual),e.xp6(1),e.Q6J("ngIf",s.upgradeProgress.upgradeDomains.length>0),e.xp6(5),e.Q6J("ngForOf",s.essentialItems),e.xp6(1),e.Q6J("item",s.startTimeEssentialItem)("underline",!1),e.xp6(1),e.Q6J("time",s.upgradeProgress.startTimestampUtc),e.xp6(1),e.Q6J("ngIf",!s.upgradeProgress.isUpgrading&&s.upgradeDuration),e.xp6(1),e.Q6J("ngIf",s.upgradeProgress.isUpgrading&&s.upgradeProgress.isUDUpgrade),e.xp6(1),e.Q6J("ngIf",s.upgradeProgress.isUpgrading&&s.upgradeProgress.isUDUpgrade),e.xp6(1),e.Q6J("ngIf",s.healthPolicy.length>0),e.xp6(1),e.Q6J("ngIf",s.upgradeProgress.isUpgrading&&(null==s.upgradeProgress.nodesInProgress?null:s.upgradeProgress.nodesInProgress.NodeUpgradeProgressList.length)>0),e.xp6(1),e.Q6J("ngIf",s.upgradeProgress.unhealthyEvaluations.length>0))},directives:[u.O5,u.sg,m._,O,D.a,r.S,h.h,g,b.m],styles:[".duration[_ngcontent-%COMP%]{margin-top:5px}h5[_ngcontent-%COMP%]{margin-bottom:0;text-align:center}.domain-container[_ngcontent-%COMP%]{-ms-flex:1;flex:1;max-width:350px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.overview-container[_ngcontent-%COMP%]{-ms-flex:1;flex:1;min-width:350px;max-width:400px;margin-right:10px;margin-left:10px}.layout-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;width:100%;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}.layout-container.failed[_ngcontent-%COMP%]{border:2px solid var(--badge-error);padding:10px;border-left:10px solid var(--badge-error);border-radius:5px;margin-bottom:10px}.node-list[_ngcontent-%COMP%]{-ms-flex:2;flex:2;min-width:500px}@media (max-width: 400px){.overview-container[_ngcontent-%COMP%]{min-width:0}}"]}),o})()},1997:(w,P,d)=>{d.d(P,{S:()=>D});var c=d(3470),t=d(2055),e=d(5053),n=d(5e3),u=d(9808),m=d(322);const x=["chart"];function T(r,h){if(1&r&&(n.TgZ(0,"div",5)(1,"div",6),n._uU(2),n.qZA()()),2&r){const i=h.$implicit;n.Q6J("ngbTooltip",i.name+" - "+i.stateName),n.xp6(1),n.Q6J("ngClass",i.badgeClass),n.xp6(1),n.Oqu(i.name)}}function y(r,h){if(1&r&&(n.TgZ(0,"div",3),n.YNc(1,T,3,3,"div",4),n.qZA()),2&r){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.upgradeDomains)}}function _(r,h){if(1&r&&(n.TgZ(0,"div",9),n._UZ(1,"div",10),n.TgZ(2,"div",11),n._uU(3),n.qZA(),n.TgZ(4,"div",12),n._uU(5),n.qZA()()),2&r){const i=h.$implicit;n.xp6(1),n.Q6J("ngClass",i.css),n.xp6(2),n.Oqu(i.name),n.xp6(2),n.Oqu(i.uds.length)}}function v(r,h){if(1&r&&(n.TgZ(0,"div")(1,"div",7),n.YNc(2,_,6,3,"div",8),n.qZA()()),2&r){const i=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",i.tiles)}}function O(r,h){if(1&r&&(n.TgZ(0,"div"),n.YNc(1,y,2,1,"div",2),n.YNc(2,v,3,1,"div",0),n.qZA()),2&r){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",i.upgradeDomains.length<15),n.xp6(1),n.Q6J("ngIf",i.upgradeDomains.length>14)}}let D=(()=>{class r{constructor(){this.showChart=!1,this.tiles=[],this.displayUd=[]}ngAfterViewInit(){if(this.showChart){const i=this.getDataSet();this.chart=(0,c.chart)(this.chartContainer.nativeElement,{chart:{type:"pie",width:350,height:300,backgroundColor:null,borderRadius:0},title:{text:"",verticalAlign:"middle",style:{color:"#1234",fontSize:"15pt"}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:2,innerSize:"50%",borderColor:"#262626"},series:{dataLabels:{enabled:!0,color:"white",borderColor:"white",inside:!0,textPath:{enabled:!1}}}},tooltip:{formatter:(()=>{const l=this;return function(g){return`${this.key} <br> ${l.upgradeDomains[this.point.index].stateName}`}})()},series:[{data:i}]})}}getDataSet(){const i={"badge-unknown":"gray","badge-ok":"#088105","badge-warning":"#0075c9","badge-error":"#E81123"};let l=[];if(this.upgradeDomains.length>30){const g=new t.A;this.upgradeDomains.forEach(b=>g.add(b.stateName+"---"+b.badgeClass)),l=g.entries().map(b=>{const I=b.key.toString().split("---");return{type:"pie",name:I[0]+" : "+b.value,y:b.value,color:i[I[1]],dataLabels:{style:{fontSize:"13px",fontColor:"#fff"}}}})}else l=this.upgradeDomains.map(g=>({type:"pie",name:g.prefix+g.name,y:1,color:i[g.badgeClass],dataLabels:{style:{fontSize:"13px",fontColor:"#fff"}}}));return l.every(g=>0===g.y)&&l.push({type:"pie",name:"",y:1,color:"gray",dataLabels:{style:{fontSize:"20px",fontColor:"#fff"}}}),l}ngOnChanges(){if(this.chart)this.chart.series[0].setData(this.getDataSet());else{const i={};i[e.TK.Pending]={name:e.TK.Pending,css:e.IU.BadgeUnknown,uds:[]},i[e.TK.InProgress]={name:e.TK.InProgress,css:e.IU.BadgeWarning,uds:[]},i[e.TK.Completed]={name:e.TK.Completed,css:e.IU.BadgeOK,uds:[]},i[e.TK.Failed]={name:e.TK.Failed,css:e.IU.BadgeError,uds:[]},this.tiles=[i[e.TK.Completed],i[e.TK.InProgress],i[e.TK.Pending],i[e.TK.Failed]],this.upgradeDomains.forEach(l=>{i[l.stateName].uds.push(l)})}}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-upgrade-progress"]],viewQuery:function(i,l){if(1&i&&n.Gf(x,5),2&i){let g;n.iGM(g=n.CRH())&&(l.chartContainer=g.first)}},inputs:{upgradeDomains:"upgradeDomains",showChart:"showChart"},features:[n.TTD],decls:3,vars:1,consts:[[4,"ngIf"],["chart",""],["class","upgrade-progress",4,"ngIf"],[1,"upgrade-progress"],["class","upgrade-domain-bar","tooltipClass","styled-tooltip",3,"ngbTooltip",4,"ngFor","ngForOf"],["tooltipClass","styled-tooltip",1,"upgrade-domain-bar",3,"ngbTooltip"],[1,"upgrade-domain-title",3,"ngClass"],[1,"dashboard-datapoints"],["class","dashboard-datapoint",4,"ngFor","ngForOf"],[1,"dashboard-datapoint"],[1,"dashboard-datapoint-leftbar",3,"ngClass"],[1,"dashboard-datapoint-title"],[1,"dashboard-datapoint-number"]],template:function(i,l){1&i&&(n.YNc(0,O,3,2,"div",0),n._UZ(1,"div",null,1)),2&i&&n.Q6J("ngIf",!l.showChart)},directives:[u.O5,u.sg,m._L,u.mk],styles:[".upgrade-progress[_ngcontent-%COMP%]{background-color:transparent;padding:1px;font-size:var(--font-size-small);margin:1px;border-spacing:0}.upgrade-progress[_ngcontent-%COMP%]   .upgrade-domain-bar[_ngcontent-%COMP%]{display:inline-block;color:#fff!important;padding:1px;text-align:center;vertical-align:middle}.upgrade-progress[_ngcontent-%COMP%]   .upgrade-domain-bar[_ngcontent-%COMP%]   .upgrade-domain-title[_ngcontent-%COMP%]{border:1px solid black;padding:1px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:32px;font-size:9pt;width:80px;height:35px;color:#fff!important}.badge-unknown[_ngcontent-%COMP%]{background-color:var(--badge-unknown)}.badge-ok[_ngcontent-%COMP%]{background-color:var(--badge-ok)}.badge-warning[_ngcontent-%COMP%]{background-color:var(--accent-darkblue)}.badge-error[_ngcontent-%COMP%]{background-color:var(--badge-error)}"],changeDetection:0}),r})()},3347:(w,P,d)=>{d.d(P,{p:()=>C});var c=d(5e3);let C=(()=>{class t{constructor(){this.manifestName="",this.manifest=""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-manifest-viewer"]],inputs:{manifestName:"manifestName",manifest:"manifest"},decls:6,vars:3,consts:[[1,"detail-pane","essen-pane"],["id","clusterManifestName"]],template:function(n,u){1&n&&(c.TgZ(0,"div",0)(1,"h4")(2,"span",1),c._uU(3),c.qZA()(),c.TgZ(4,"code"),c._uU(5),c.qZA()()),2&n&&(c.xp6(3),c.Oqu(u.manifestName),c.xp6(1),c.uIk("aria-label","manifest of "+u.manifestName),c.xp6(1),c.Oqu(u.manifest))},styles:["code[_ngcontent-%COMP%]{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;line-break:unset;word-break:break-word}"]}),t})()}}]);