"use strict";(self.webpackChunkSfxWeb=self.webpackChunkSfxWeb||[]).push([["src_app_views_partition_partition_module_ts"],{9049:(b,y,o)=>{o.d(y,{M:()=>l});var n=o(9808),_=o(3075),v=o(958),T=o(4466),I=o(8979),t=o(6461),c=o(5e3),u=o(1271),h=o(8833);let l=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=c.oAB({type:f}),f.\u0275inj=c.cJS({imports:[[n.ez,_.u5,T.m,_.UX,t.Q]]}),f})();c.B6R(v.N,[_._Y,_.JL,_.F,u.d],[]),c.B6R(I.E,[_._Y,_.JL,_.F,h.m],[])},1901:(b,y,o)=>{o.d(y,{c:()=>t});var n=o(9808),_=o(4466),v=o(322),T=o(6461),I=o(5e3);let t=(()=>{class c{}return c.\u0275fac=function(h){return new(h||c)},c.\u0275mod=I.oAB({type:c}),c.\u0275inj=I.cJS({imports:[[n.ez,_.m,v.HK,T.Q,v.Oz]]}),c})()},8952:(b,y,o)=>{o.d(y,{f:()=>c});var n=o(5e3),_=o(4333),v=o(322),T=o(8833);function I(u,h){if(1&u&&n._UZ(0,"app-detail-list",6),2&u){const l=n.oxw();n.Q6J("list",l.unhealthyEvaluations)("listSettings",l.unhealthyEvaluationsListSettings)}}function t(u,h){if(1&u&&n._UZ(0,"app-detail-list",6),2&u){const l=n.oxw();n.Q6J("list",l.healthyEvaluations)("listSettings",l.healthEventsListSettings)}}let c=(()=>{class u{constructor(l){this.settings=l}ngOnInit(){this.unhealthyEvaluationsListSettings=this.settings.getNewOrExistingUnhealthyEvaluationsListSettings(),this.healthEventsListSettings=this.settings.getNewOrExistingHealthEventsListSettings()}}return u.\u0275fac=function(l){return new(l||u)(n.Y36(_.g))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-health-viewer"]],inputs:{unhealthyEvaluations:"unhealthyEvaluations",healthyEvaluations:"healthyEvaluations"},decls:11,vars:1,consts:[["ngbNav","",1,"nav-wrapper"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"list","listSettings"]],template:function(l,f){if(1&l&&(n.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),n._uU(4,"Unhealthy"),n.qZA(),n.YNc(5,I,1,2,"ng-template",4),n.qZA(),n.TgZ(6,"div",2)(7,"a",3),n._uU(8,"All"),n.qZA(),n.YNc(9,t,1,2,"ng-template",4),n.qZA()(),n._UZ(10,"div",5)),2&l){const C=n.MAs(1);n.xp6(10),n.Q6J("ngbNavOutlet",C)}},directives:[v.Pz,v.nv,v.Vx,v.uN,T.m,v.tO],styles:[""]}),u})()},8285:(b,y,o)=>{o.d(y,{P:()=>C});var n=o(5e3),_=o(5664),v=o(9808),T=o(322);function I(d,R){if(1&d&&n._UZ(0,"button",5),2&d){const g=n.oxw();n.Gre("mif-2x status-icon ",g.collapsed?"mif-arrow-drop-down":"mif-arrow-drop-up",""),n.uIk("aria-label",g.displayText)("aria-expanded",!g.collapsed)}}function t(d,R){1&d&&(n.TgZ(0,"div"),n.Hsn(1,1),n.qZA())}function c(d,R){1&d&&(n.TgZ(0,"div"),n.Hsn(1,2),n.qZA())}const u=[[["","collapse-header",""]],[["","collapse-body",""]],[["","closed-body",""]]],h=function(d){return{"base-header":d}},l=function(d){return{"margin-left":d}},f=["[collapse-header]","[collapse-body]","[closed-body]"];let C=(()=>{class d{constructor(g){this.liveAnnouncer=g,this.collapsed=!1,this.disabled=!1,this.hideTooltip=!1,this.sectionName="this",this.tooltipSouth=!1,this.collapsedChange=new n.vpe,this.displayText=""}ngOnChanges(){this.setText()}ngOnInit(){this.setText()}changeCollapseState(){this.disabled||(this.liveAnnouncer.announce(this.sectionName+" Section has been "+this.collapsed?"Opened":"Closed"),this.collapsed=!this.collapsed,this.collapsedChange.emit(this.collapsed)),this.setText()}setText(){this.displayText=(this.collapsed?"Open ":"Close ")+this.sectionName+" Section"}}return d.\u0275fac=function(g){return new(g||d)(n.Y36(_.Kd))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-collapse-container"]],inputs:{collapsed:"collapsed",disabled:"disabled",hideTooltip:"hideTooltip",sectionName:"sectionName",tooltipSouth:"tooltipSouth"},outputs:{collapsedChange:"collapsedChange"},features:[n.TTD],ngContentSelectors:f,decls:7,vars:13,consts:[[2,"position","relative"],["tooltipClass","styled-tooltip",1,"flex-center",3,"ngClass","ngbTooltip","placement","disableTooltip","click"],["tabindex","0",3,"class",4,"ngIf"],[1,"header-wrapper",3,"ngStyle"],[4,"ngIf"],["tabindex","0"]],template:function(g,x){1&g&&(n.F$t(u),n.TgZ(0,"div",0)(1,"div",1),n.NdJ("click",function(){return x.changeCollapseState()}),n.YNc(2,I,1,5,"button",2),n.TgZ(3,"div",3),n.Hsn(4),n.qZA()(),n.YNc(5,t,2,0,"div",4),n.YNc(6,c,2,0,"div",4),n.qZA()),2&g&&(n.xp6(1),n.Q6J("ngClass",n.VKq(9,h,!x.disabled))("ngbTooltip",x.displayText)("placement",x.tooltipSouth?"bottom":"top")("disableTooltip",x.disabled||x.hideTooltip),n.uIk("aria-expanded",!x.collapsed),n.xp6(1),n.Q6J("ngIf",!x.disabled),n.xp6(1),n.Q6J("ngStyle",n.VKq(11,l,x.disabled?"25px":"")),n.xp6(2),n.Q6J("ngIf",!x.collapsed),n.xp6(1),n.Q6J("ngIf",x.collapsed))},directives:[v.mk,T._L,v.O5,v.PC],styles:[".base-header[_ngcontent-%COMP%]{border-radius:var(--primary-border-radius);cursor:pointer}.base-header[_ngcontent-%COMP%]:hover, .base-header[_ngcontent-%COMP%]:focus-within{filter:brightness(100%);background-color:#ffffff1a}.header-wrapper[_ngcontent-%COMP%]{width:calc(100% - 25px);display:inline-block}.status-icon[_ngcontent-%COMP%]{width:25px}button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:0px;color:#fff}"]}),d})()},9342:(b,y,o)=>{o.d(y,{_:()=>h});var n=o(5e3),_=o(9808),v=o(7191);function T(l,f){if(1&l&&(n.TgZ(0,"div",7),n._uU(1),n.qZA()),2&l){const C=n.oxw();n.xp6(1),n.hij(" ",C.item.descriptionName," ")}}function I(l,f){if(1&l&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&l){const C=n.oxw();n.xp6(1),n.hij(" ",C.item.displayText," ")}}function t(l,f){1&l&&(n.TgZ(0,"span"),n.Hsn(1),n.qZA())}function c(l,f){if(1&l&&n._UZ(0,"app-clip-board",8),2&l){const C=n.oxw();n.Q6J("text",C.item.copyTextValue)}}const u=["*"];let h=(()=>{class l{constructor(){this.underline=!1}}return l.\u0275fac=function(C){return new(C||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-essential-item"]],inputs:{item:"item",underline:"underline"},ngContentSelectors:u,decls:8,vars:5,consts:[[1,"essential-list-item","highlight-hover",3,"ngClass"],[1,"text-wrapper","tile-item"],["class","tile-list-entry left-text",4,"ngIf"],[1,"spacer"],[1,"middle-text"],[4,"ngIf"],[3,"text",4,"ngIf"],[1,"tile-list-entry","left-text"],[3,"text"]],template:function(C,d){1&C&&(n.F$t(),n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,T,2,1,"div",2),n._UZ(3,"div",3),n.TgZ(4,"div",4),n.YNc(5,I,2,1,"span",5),n.YNc(6,t,2,0,"span",5),n.qZA()(),n.YNc(7,c,1,1,"app-clip-board",6),n.qZA()),2&C&&(n.Q6J("ngClass",d.underline?"":"underline"),n.xp6(2),n.Q6J("ngIf",d.item.descriptionName),n.xp6(3),n.Q6J("ngIf",!d.item.displaySelector),n.xp6(1),n.Q6J("ngIf",d.item.displaySelector),n.xp6(1),n.Q6J("ngIf",d.item.copyTextValue))},directives:[_.mk,_.O5,v._],styles:[""]}),l})()},4385:(b,y,o)=>{o.r(y),o.d(y,{PartitionModule:()=>$t});var n=o(9808),_=o(8555),v=o(4850),T=o(4286),I=o(2165),t=o(5e3),c=o(3240);let u=(()=>{class i extends I.J{constructor(e,a){super(a),this.data=e}common(e){return this.data.getPartition(this.appId,this.serviceId,this.partitionId,!0,e).pipe((0,v.U)(a=>{this.partition=a}))}getParams(e){this.appTypeName=T.a.getAppTypeName(e),this.appId=T.a.getAppId(e),this.serviceId=T.a.getServiceId(e),this.partitionId=T.a.getPartitionId(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3))},i.\u0275dir=t.lG2({type:i,features:[t.qOj]}),i})();var h=o(5237),l=o(1086),f=o(5053),C=o(2261),d=o(8118);let R=(()=>{class i extends u{constructor(e,a,r){super(e,a),this.dataService=e,this.tree=r,this.tabs=[{name:"essentials",route:"./"},{name:"details",route:"./details"}]}setup(){this.dataService.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isEventStoreEnabled&&-1===this.tabs.indexOf(f.gT.EventsTab)&&(this.tabs=this.tabs.concat(f.gT.EventsTab)),this.dataService.clusterManifest.isBackupRestoreEnabled&&!this.tabs.some(e=>"backups"===e.name)&&(this.tabs=this.tabs.concat({name:"backups",route:"./backups"}))}),this.appTypeName===f.gT.SystemAppTypeName?this.tree.selectTreeNode([h.R.cluster(),h.R.systemAppGroup(),h.R.service(this.serviceId),h.R.partition(this.partitionId)]):this.tree.selectTreeNode([h.R.cluster(),h.R.appGroup(),h.R.appType(this.appTypeName),h.R.app(this.appId),h.R.service(this.serviceId),h.R.partition(this.partitionId)],!0)}refresh(e){return(this.partition.isStatelessService||"System"===this.partition.parent.parent.raw.TypeName)&&(this.tabs=this.tabs.filter(a=>"backups"!==a.name)),this.data.clusterManifest.ensureInitialized().subscribe(()=>{this.data.clusterManifest.isBackupRestoreEnabled||(this.tabs=this.tabs.filter(a=>"backups"!==a.name))}),(0,l.of)(null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3),t.Y36(C.r))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-base"]],features:[t.qOj],decls:4,vars:3,consts:[["type","Partition",3,"tabs","name","actions"],[1,"main-view"],[1,"flex-child"]],template:function(e,a){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&e&&t.Q6J("tabs",a.tabs)("name",a.partitionId)("actions",null==a.partition?null:a.partition.actions)},directives:[d.S,_.lC],styles:[""]}),i})();var g=o(6174),x=o(567),S=o(4333),A=o(4034),E=o(7895),Y=o(8855),F=o(8523),D=o(8285),V=o(8952),K=o(2055),U=o(2654);function q(i,s){if(1&i&&t._UZ(0,"app-essential-item",11),2&i){const a=s.last;t.Q6J("item",s.$implicit)("underline",a)}}function z(i,s){if(1&i&&t._UZ(0,"app-essential-item",11),2&i){const a=s.last;t.Q6J("item",s.$implicit)("underline",a)}}const H=function(i){return{"expanded-tall":i}};function W(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-replica-tile",12),t.NdJ("showReplicationChange",function(r){const B=t.CHM(e).$implicit;return t.oxw(2).expandedDict[B.name]=r}),t.qZA()}if(2&i){const e=s.$implicit,a=t.oxw(2);t.Q6J("ngClass",t.VKq(5,H,a.expandedDict[e.name]))("showReplication",a.expandedDict[e.name])("replica",e)("replicator",a.replicaDict[e.name])("replicatorHistory",a.cachedData[e.name])}}function j(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),t._uU(3,"Primary Replica Queue Status"),t.qZA(),t.YNc(4,q,1,2,"app-essential-item",4),t.TgZ(5,"app-collapse-container",5)(6,"div",6),t._uU(7," Replicator Status "),t.qZA(),t.TgZ(8,"div",7),t.YNc(9,z,1,2,"app-essential-item",4),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9),t.YNc(12,W,1,7,"app-replica-tile",10),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.overviewItems),t.xp6(5),t.Q6J("ngForOf",e.replicationStatus),t.xp6(3),t.Q6J("ngForOf",e.sortedReplicas)}}const X=(i,s)=>(i[s.ReplicaId]=s,i);let O=(()=>{class i{constructor(){this.sortedReplicas=[],this.replicaDict={},this.expandedDict={},this.cachedData={},this.overviewItems=[],this.replicationStatus=[],this.sub=new U.w}ngOnChanges(){this.replicas.forEach(e=>{"Primary"===e.raw.ReplicaRole&&(this.primaryReplica=e)}),this.primaryReplica&&this.sub.add(this.primaryReplica.detail.refresh().subscribe(()=>{const e=K.c.getFriendlyFileSize(+this.primaryReplica.detail.raw.ReplicatorStatus.ReplicationQueueStatus.QueueMemorySize),a=this.primaryReplica.detail.raw.ReplicatorStatus;this.replicaDict=a.RemoteReplicators.reduce(X,{}),a.RemoteReplicators.forEach(p=>{const B=Object.assign(Object.assign({},p),{date:new Date});this.cachedData[p.ReplicaId]||(this.cachedData[p.ReplicaId]=[]),this.cachedData[p.ReplicaId].length>20&&this.cachedData[p.ReplicaId].shift(),this.cachedData[p.ReplicaId].push(B)}),this.sortedReplicas=this.replicas.sort((p,B)=>p.replicaRoleSortPriority-B.replicaRoleSortPriority);const r=this.primaryReplica.detail.replicatorStatus.raw.ReplicationQueueStatus;this.overviewItems=[{descriptionName:"Queue Utilization Percentage",copyTextValue:r.QueueUtilizationPercentage,displayText:r.QueueUtilizationPercentage+"%"},{descriptionName:"Queue Memory Size",copyTextValue:e,displayText:e}],this.replicationStatus=[{descriptionName:"Last Sequence Number(LSN) ",copyTextValue:r.LastSequenceNumber,displayText:r.LastSequenceNumber},{descriptionName:"Completed Sequence Number",copyTextValue:r.CompletedSequenceNumber,displayText:r.CompletedSequenceNumber},{descriptionName:"Committed Sequence Number",copyTextValue:r.CommittedSequenceNumber,displayText:r.CommittedSequenceNumber}]}))}ngOnDestroy(){this.sub.unsubscribe()}trackByFn(e,a){return a.ReplicaId+e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replica-status-container"]],inputs:{replicas:"replicas"},features:[t.TTD],decls:1,vars:1,consts:[["class","overview-container",4,"ngIf"],[1,"overview-container"],["data-cy","essentials",1,"essen-pane",2,"width","330px"],[1,"underline-title"],[3,"item","underline",4,"ngFor","ngForOf"],["collapsed","true"],["collapse-header",""],["collapse-body",""],[2,"flex","auto","margin-left","20px"],[1,"replica-container"],["class","replica-tile tall",3,"ngClass","showReplication","replica","replicator","replicatorHistory","showReplicationChange",4,"ngFor","ngForOf"],[3,"item","underline"],[1,"replica-tile","tall",3,"ngClass","showReplication","replica","replicator","replicatorHistory","showReplicationChange"]],template:function(e,a){1&e&&t.YNc(0,j,13,3,"div",0),2&e&&t.Q6J("ngIf",a.primaryReplica&&a.primaryReplica.detail.raw)},styles:[".cell-wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.replica-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,125px);grid-gap:10px;grid-auto-rows:90px}.replica-tile[_ngcontent-%COMP%]{grid-column:span 2;grid-row:span 2}.expanded-tall[_ngcontent-%COMP%]{grid-row:span 4;grid-column:span 4}.long[_ngcontent-%COMP%]{grid-column:span 2}.overview-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-line-pack:start;align-content:flex-start;margin-bottom:20px}"]}),i})();var M=o(8833);function G(i,s){if(1&i&&t._UZ(0,"app-status-resolver",13),2&i){const e=t.oxw(3);t.Q6J("status",e.partition.raw.PartitionStatus)}}function $(i,s){if(1&i&&(t.TgZ(0,"app-essential-health-tile",11),t.YNc(1,G,1,1,"ng-template",12),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("healthState",null==e.partition?null:e.partition.healthState)("listItems",e.essentialItems)}}function tt(i,s){if(1&i&&(t.TgZ(0,"app-tile-wrapper"),t._UZ(1,"app-state-info",14),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("stateful",!e.partition.isStatelessService)("data",e.partition.raw)}}function et(i,s){if(1&i&&(t.TgZ(0,"div")(1,"app-collapse-container",15)(2,"div",5)(3,"h4"),t._uU(4,"Replicator Status"),t.qZA()(),t.TgZ(5,"div",6)(6,"div"),t._UZ(7,"app-replica-status-container",16),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(7),t.Q6J("replicas",e.partition.replicas.collection)}}function it(i,s){if(1&i&&t._UZ(0,"app-detail-list",17),2&i){const e=t.oxw(2);t.Q6J("list",e.partition.replicas.collection)("listSettings",e.listSettings)}}function at(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",1),t.YNc(2,$,2,2,"app-essential-health-tile",2),t.YNc(3,tt,2,2,"app-tile-wrapper",0),t.qZA(),t.TgZ(4,"div",3)(5,"app-collapse-container",4)(6,"div",5)(7,"h4"),t._uU(8,"Health Evaluations"),t.qZA()(),t.TgZ(9,"div",6),t._UZ(10,"app-health-viewer",7),t.qZA()()(),t.YNc(11,et,8,1,"div",0),t.TgZ(12,"div",8)(13,"app-collapse-container",9)(14,"div",5)(15,"h4"),t._uU(16),t.qZA()(),t.TgZ(17,"div",6),t.YNc(18,it,1,2,"app-detail-list",10),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.partition&&e.partition.isInitialized),t.xp6(1),t.Q6J("ngIf",null==e.partition?null:e.partition.raw),t.xp6(7),t.Q6J("healthyEvaluations",e.partition.health.healthEvents)("unhealthyEvaluations",e.partition.health.unhealthyEvaluations),t.xp6(1),t.Q6J("ngIf",e.partition.isStatefulService),t.xp6(2),t.Q6J("sectionName",e.partition.isStatelessService?"Instances":"Replicas"),t.xp6(3),t.Oqu(e.partition.isStatelessService?"Instances":"Replicas"),t.xp6(2),t.Q6J("ngIf",e.partition.replicas.isInitialized)}}let nt=(()=>{class i extends u{constructor(e,a,r){super(e,a),this.data=e,this.settings=r,this.hideReplicator=!0,this.essentialItems=[]}setup(){this.setEssentialData()}refresh(e){if(this.setEssentialData(),!this.listSettings){let a=["replicaRoleSortPriority","raw.NodeName"];const r=[new g.a7("id","Id",p=>p.viewPath),new g.NL("raw.NodeName","Node Name"),new g.v0("role","Replica Role",{sortPropertyPaths:a}),new g.Gp("healthState","Health State"),new g.v0("raw.ReplicaStatus","Status")];this.partition.isStatelessService&&(r.splice(2,1),a=["raw.NodeName"]),this.listSettings=this.settings.getNewOrExistingListSettings("replicas",a,r)}return(0,x.D)([this.partition.health.refresh(e),this.partition.replicas.refresh(e)])}setEssentialData(){var e;this.essentialItems=[],(null===(e=null==this?void 0:this.partition)||void 0===e?void 0:e.partitionInformation.isInitialized)&&(this.essentialItems=[{descriptionName:"Status",displayText:this.partition.raw.PartitionStatus,copyTextValue:this.partition.raw.PartitionStatus,selectorName:"status",displaySelector:!0},{descriptionName:"Partition Kind",displayText:this.partition.partitionInformation.raw.ServicePartitionKind,copyTextValue:this.partition.partitionInformation.raw.ServicePartitionKind}],this.partition.isStatefulService&&(this.partition.partitionInformation.isPartitionKindInt64Range&&(this.essentialItems.push({descriptionName:"High Key",displayText:this.partition.partitionInformation.raw.HighKey,copyTextValue:this.partition.partitionInformation.raw.HighKey}),this.essentialItems.push({descriptionName:"Low Key",displayText:this.partition.partitionInformation.raw.LowKey,copyTextValue:this.partition.partitionInformation.raw.LowKey})),this.partition.partitionInformation.isPartitionKindNamed&&this.essentialItems.push({descriptionName:"Name",displayText:this.partition.partitionInformation.raw.Name,copyTextValue:this.partition.partitionInformation.raw.Name})))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3),t.Y36(S.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-essentials"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"tile-container"],["class","long",3,"healthState","listItems",4,"ngIf"],["data-cy","health",1,"detail-pane","essen-pane"],["sectionName","Unhealthy Evaluations"],["collapse-header",""],["collapse-body",""],[3,"healthyEvaluations","unhealthyEvaluations"],["data-cy","replicas",1,"detail-pane","essen-pane"],[3,"sectionName"],[3,"list","listSettings",4,"ngIf"],[1,"long",3,"healthState","listItems"],["appEssentialTemplate","","id","status"],[3,"status"],[3,"stateful","data"],["sectionName","Replicator Status","data-cy","replicator"],[3,"replicas"],[3,"list","listSettings"]],template:function(e,a){1&e&&t.YNc(0,at,19,8,"div",0),2&e&&t.Q6J("ngIf",a.partition)},directives:[n.O5,A.Q,A.W,E.u,Y.B,F.H,D.P,V.f,O,M.m],styles:[".cell-wrapper[_ngcontent-%COMP%]{margin-bottom:10px}"]}),i})();var N=o(1271);function ot(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"h4"),t._uU(2,"Load Information"),t.qZA(),t._UZ(3,"app-detail-view-part",4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("data",e.partition.loadInformation.raw)("parent",e.partition.loadInformation)}}function st(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",1),t._UZ(2,"app-detail-view-part",2),t.qZA(),t.YNc(3,ot,4,2,"div",3),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("data",e.partition),t.xp6(1),t.Q6J("ngIf",e.partition.loadInformation&&e.partition.loadInformation.isValid)}}let rt=(()=>{class i extends u{constructor(e,a,r){super(e,a),this.data=e,this.settings=r}setup(){}refresh(e){return(0,x.D)([this.partition.loadInformation.refresh(e),this.partition.health.refresh(e),this.partition.replicas.refresh(e)])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3),t.Y36(S.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-details"]],features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"detail-pane","essen-pane"],[3,"data"],["class","detail-pane essen-pane",4,"ngIf"],[3,"data","parent"]],template:function(e,a){1&e&&t.YNc(0,st,4,2,"div",0),2&e&&t.Q6J("ngIf",a.partition)},directives:[n.O5,N.d],styles:[""]}),i})();var pt=o(7506),w=o(1136),P=o(1709),lt=o(7654),ct=o(8592),m=o(3075),Z=o(8966),J=o(2896);let dt=(()=>{class i{constructor(e,a,r,p){this.formBuilder=e,this.data=a,this.partition=r,this.dialogRef=p}ngOnInit(){this.form=this.formBuilder.group({BackupTimeout:["",[m.kI.required]]})}ok(){""===this.form.value.Storage.StorageKind&&(this.form.value.Storage=null),this.data.restClient.triggerPartitionBackup(this.partition.data,this.form.value.BackupTimeout,this.form.value.Storage).subscribe(()=>{this.cancel()},e=>console.log(e))}cancel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(c.D),t.Y36(Z.WI),t.Y36(Z.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-partition-trigger-back-up"]],decls:16,vars:4,consts:[[1,"action-modal",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"dl-horizontal"],["type","number","formControlName","BackupTimeout",1,"input-flat"],[3,"form","required"],[1,"modal-footer"],["type","submit",1,"solid-button","blue",3,"disabled","click"],["type","button",1,"flat-button",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h4",2),t._uU(3,"Trigger Partition Backup"),t.qZA()(),t.TgZ(4,"div",3)(5,"dl",4)(6,"dt"),t._uU(7,"BackupTimeout"),t.qZA(),t.TgZ(8,"dd"),t._UZ(9,"input",5),t.qZA()(),t._UZ(10,"app-storage-form",6),t.qZA(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return a.ok()}),t._uU(13,"Trigger Partition Backup"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return a.cancel()}),t._uU(15,"Cancel"),t.qZA()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(10),t.Q6J("form",a.form)("required",!1),t.xp6(2),t.Q6J("disabled",a.form.invalid))},directives:[m._Y,m.JL,m.sg,m.wV,m.Fj,m.JJ,m.u,J.a],styles:[""]}),i})(),ut=(()=>{class i{constructor(e,a,r,p){this.formBuilder=e,this.data=a,this.partition=r,this.dialogRef=p}ngOnInit(){this.form=this.formBuilder.group({BackupId:["",[m.kI.required]],BackupLocation:["",[m.kI.required]],RestoreTimeout:[""]})}ok(){""===this.form.value.Storage.StorageKind&&(this.form.value.Storage=null);const e=this.form.value;this.data.restClient.restorePartitionBackup(this.partition.data.id,e.Storage,e.RestoreTimeout,e.BackupId,e.BackupLocation).subscribe(()=>{this.cancel()},a=>console.log(a))}cancel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(c.D),t.Y36(Z.WI),t.Y36(Z.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-partition-restore-back-up"]],decls:24,vars:4,consts:[[1,"action-modal",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"dl-horizontal"],["type","text","formControlName","BackupId",1,"input-flat"],["type","text","formControlName","BackupLocation",1,"input-flat"],["type","number","formControlName","RestoreTimeout",1,"input-flat"],[3,"form","required"],[1,"modal-footer"],["type","submit",1,"solid-button","blue",3,"disabled","click"],["type","button",1,"flat-button",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h4",2),t._uU(3,"Restore Partition Backup"),t.qZA()(),t.TgZ(4,"div",3)(5,"dl",4)(6,"dt"),t._uU(7,"BackupId"),t.qZA(),t.TgZ(8,"dd"),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"dt"),t._uU(11,"BackupLocation"),t.qZA(),t.TgZ(12,"dd"),t._UZ(13,"input",6),t.qZA(),t.TgZ(14,"dt"),t._uU(15,"RestoreTimeout"),t.qZA(),t.TgZ(16,"dd"),t._UZ(17,"input",7),t.qZA()(),t._UZ(18,"app-storage-form",8),t.qZA(),t.TgZ(19,"div",9)(20,"button",10),t.NdJ("click",function(){return a.ok()}),t._uU(21,"Restore Partition Backup"),t.qZA(),t.TgZ(22,"button",11),t.NdJ("click",function(){return a.cancel()}),t._uU(23,"Cancel"),t.qZA()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(18),t.Q6J("form",a.form)("required",!1),t.xp6(2),t.Q6J("disabled",a.form.invalid))},directives:[m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,m.wV,J.a],styles:[""]}),i})();var mt=o(9079),ht=o(2999),ft=o(8055);function gt(i,s){if(1&i&&(t.TgZ(0,"div",2),t._UZ(1,"app-action-collection-drop-down",3),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("actionCollection",e.actions)}}function _t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"h4"),t._uU(2,"Latest Backup"),t.qZA(),t._UZ(3,"app-detail-view-part",6),t.TgZ(4,"div",7)(5,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).restore()}),t._uU(6,"Restore"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("data",e.partition.partitionBackupInfo.latestPartitionBackup.collection[0])}}function vt(i,s){if(1&i&&(t.TgZ(0,"div",5)(1,"h4"),t._uU(2,"Partition Backup Progress"),t.qZA(),t._UZ(3,"app-detail-view-part",6),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.Q6J("data",e.partition.partitionBackupInfo.partitionBackupProgress)}}function Ct(i,s){if(1&i&&(t.TgZ(0,"div",5)(1,"h4"),t._uU(2,"Partition Restore Progress"),t.qZA(),t._UZ(3,"app-detail-view-part",6),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.Q6J("data",e.partition.partitionBackupInfo.partitionRestoreProgress)}}function Tt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",5)(2,"h4"),t._uU(3,"Partition Backup Configuration"),t.qZA(),t._UZ(4,"app-detail-view-part",6),t.qZA(),t.YNc(5,vt,4,1,"div",4),t.YNc(6,Ct,4,1,"div",4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("data",e.partition.partitionBackupInfo.partitionBackupConfigurationInfo),t.xp6(1),t.Q6J("ngIf",e.partition.partitionBackupInfo.partitionBackupProgress.isInitialized&&e.partition.partitionBackupInfo.partitionBackupProgress.raw.TimeStampUtc),t.xp6(1),t.Q6J("ngIf",e.partition.partitionBackupInfo.partitionRestoreProgress.isInitialized&&e.partition.partitionBackupInfo.partitionRestoreProgress.raw.TimeStampUtc)}}function xt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"app-detail-list",9)(2,"app-dual-date-picker",10),t.NdJ("dateChanged",function(r){return t.CHM(e),t.oxw(2).setNewDates(r)}),t.TgZ(3,"div",11)(4,"input",12),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).startTime=r})("change",function(){return t.CHM(e),t.oxw(2).startTimeChange()}),t.qZA()(),t.TgZ(5,"div",13)(6,"input",12),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).endTime=r})("change",function(){return t.CHM(e),t.oxw(2).endTimeChange()}),t.qZA()()()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("list",e.backupList)("listSettings",e.partitionBackupListSettings),t.xp6(1),t.Q6J("minDate",e.minDate)("maxDate",e.maxDate)("currentStartDate",e.startDate)("currentEndDate",e.endDate),t.xp6(2),t.Q6J("ngModel",e.startTime),t.xp6(2),t.Q6J("ngModel",e.endTime)}}function yt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,_t,7,1,"div",4),t.YNc(2,Tt,7,3,"div",1),t.YNc(3,xt,7,8,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.partition.partitionBackupInfo.latestPartitionBackup.collection.length>0),t.xp6(1),t.Q6J("ngIf",e.partition&&e.partition.partitionBackupInfo),t.xp6(1),t.Q6J("ngIf",e.partition)}}let It=(()=>{class i extends u{constructor(e,a,r,p){super(e,a),this.data=e,this.settings=r,this.telemetry=p,this.startDate=new Date,this.endDate=new Date,this.minDate=new Date,this.maxDate=new Date}setup(){this.partitionBackupListSettings=this.settings.getNewOrExistingListSettings("partitionBackups",[null],[new g.NL("raw.BackupId","BackupId",{enableFilter:!1,getDisplayHtml:(e,a)=>`<span class="link">${a}</span>`,clickEvent:e=>e.action.run()}),new g.NL("raw.BackupType","BackupType"),new g.NL("raw.EpochOfLastBackupRecord.DataLossVersion","Data Loss Version"),new g.NL("raw.EpochOfLastBackupRecord.ConfigurationVersion","Configuration Version"),new g.NL("raw.LsnOfLastBackupRecord","Lsn of last Backup Record"),new g.NL("raw.CreationTimeUtc","Creation Time UTC")]),this.dateRefresh=!0,this.maxDate.setDate(this.endDate.getDate()+30),this.minDate.setDate(this.startDate.getDate()-30)}startTimeChange(){const e=this.startTime.split(":");this.startDate.setUTCHours(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),0),this.setNewPartitionBackupList(this.startDate,this.endDate)}endTimeChange(){const e=this.endTime.split(":");this.endDate.setUTCHours(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),0),this.setNewPartitionBackupList(this.startDate,this.endDate)}setNewPartitionBackupList(e,a){this.backupList=this.partition.partitionBackupInfo.partitionBackupList.collection,this.backupList=this.backupList.filter(r=>new Date(r.raw.CreationTimeUtc)>=e&&new Date(r.raw.CreationTimeUtc)<=a)}restore(){let e;e=this.partition.partitionBackupInfo.latestPartitionBackup.collection[0].raw,this.data.restClient.restorePartitionBackup(e.PartitionInformation.Id,null,null,this.partition.partitionBackupInfo.latestPartitionBackup.collection[0].raw.BackupId,this.partition.partitionBackupInfo.latestPartitionBackup.collection[0].raw.BackupLocation).subscribe(()=>{},a=>console.log(a))}refresh(e){if(this.data.actionsEnabled()&&this.attemptSetActions(),this.dateRefresh&&(this.backupList=this.partition.partitionBackupInfo.partitionBackupList.collection,0!==this.backupList.length)){const a=this.backupList.sort((r,p)=>r.CreationTimeUtc<p.CreationTimeUtc?-1:r.CreationTimeUtc>p.CreationTimeUtc?1:0);this.startDate=new Date(a[0].raw.CreationTimeUtc),this.endDate=new Date(a[a.length-1].raw.CreationTimeUtc),this.maxDate.setDate(this.endDate.getDate()+30),this.minDate.setDate(this.startDate.getDate()-30),this.startTime=a[0].raw.CreationTimeUtc.split("T")[1].split("Z")[0],this.endTime=a[a.length-1].raw.CreationTimeUtc.split("T")[1].split("Z")[0],this.dateRefresh=!1}try{this.subscriptions.add(this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.refresh(e).subscribe())}catch(a){}try{this.subscriptions.add(this.data.backupPolicies.refresh(e).subscribe())}catch(a){}try{this.subscriptions.add(this.partition.partitionBackupInfo.partitionBackupProgress.refresh(e).subscribe())}catch(a){}try{this.subscriptions.add(this.partition.partitionBackupInfo.partitionRestoreProgress.refresh(e).subscribe())}catch(a){}try{this.subscriptions.add(this.partition.partitionBackupInfo.latestPartitionBackup.refresh(e).subscribe())}catch(a){}return this.partition.partitionBackupInfo.partitionBackupList.refresh(e)}setNewDates(e){this.startDate=e.startDate,this.endDate=e.endDate,this.setNewPartitionBackupList(this.startDate,this.endDate)}attemptSetActions(){this.actions||(this.actions=new pt.w(this.telemetry),this.actions.add(new w.VJ(this.data.dialog,"enablePartitionBackup","Enable/Update Partition Backup","Enabling Partition Backup",{enable:e=>this.data.restClient.enablePartitionBackup(this.partition,e).pipe((0,P.zg)(()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.refresh())),data:this},ct.y,()=>!0)),this.actions.add(new w.VJ(this.data.dialog,"disablePartitionBackup","Disable Partition Backup","Disabling Partition Backup",{enable:e=>this.data.restClient.disablePartitionBackup(this.partition,e).pipe((0,P.zg)(()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.refresh())),data:this},lt.U,()=>!0)),this.actions.add(new w.et(this.data.dialog,"suspendPartitionBackup","Suspend Partition Backup","Suspending...",()=>this.data.restClient.suspendPartitionBackup(this.partition.id).pipe((0,P.zg)(()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.refresh())),()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw&&"Partition"===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.Kind&&"Partition"===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.PolicyInheritedFrom&&!1===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.SuspensionInfo.IsSuspended,"Confirm Partition Backup Suspension",`Suspend partition backup for ${this.partition.name} ?`,this.partition.name)),this.actions.add(new w.et(this.data.dialog,"resumePartitionBackup","Resume Partition Backup","Resuming...",()=>this.data.restClient.resumePartitionBackup(this.partition.id).pipe((0,P.zg)(()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.refresh())),()=>this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw&&"Partition"===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.Kind&&"Partition"===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.PolicyInheritedFrom&&!0===this.partition.partitionBackupInfo.partitionBackupConfigurationInfo.raw.SuspensionInfo.IsSuspended,"Confirm Partition Backup Resumption",`Resume partition backup for ${this.partition.name} ?`,this.partition.name)),this.actions.add(new w.VJ(this.data.dialog,"triggerPartitionBackup","Trigger Partition Backup","Triggering Partition Backup",this.partition,dt,()=>!0)),this.actions.add(new w.VJ(this.data.dialog,"restorePartitionBackup","Restore Partition Backup","Restoring Partition Backup",this.partition,ut,()=>!0)))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3),t.Y36(S.g),t.Y36(mt.y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-backups"]],features:[t.qOj],decls:2,vars:2,consts:[["style","height: 40px;",4,"ngIf"],[4,"ngIf"],[2,"height","40px"],["displayText","Backup Actions",2,"float","right",3,"actionCollection"],["class","detail-pane essen-pane",4,"ngIf"],[1,"detail-pane","essen-pane"],[3,"data"],[1,"text-right"],[1,"solid-button",3,"click"],[3,"list","listSettings"],[3,"minDate","maxDate","currentStartDate","currentEndDate","dateChanged"],["startTime",""],["type","time","placeholder","HH:mm:ss","ng-model-options","{ timezone: 'UTC' }",1,"input-flat","clear-disabled",3,"ngModel","ngModelChange","change"],["toTime",""]],template:function(e,a){1&e&&(t.YNc(0,gt,2,1,"div",0),t.YNc(1,yt,4,3,"div",1)),2&e&&(t.Q6J("ngIf",a.actions),t.xp6(1),t.Q6J("ngIf",a.partition))},directives:[n.O5,ht.b,N.d,M.m,ft.B,m.Fj,m.JJ,m.On],styles:[""]}),i})();var Rt=o(5893);const wt=[{path:"",component:R,children:[{path:"",component:nt},{path:"details",component:rt},{path:"backups",component:It},{path:"events",component:(()=>{class i extends u{constructor(e,a){super(e,a),this.data=e}setup(){this.listEventStoreData=[this.data.getPartitionEventData(this.partitionId)]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.D),t.Y36(t.zs3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-events"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"listEventStoreData"]],template:function(e,a){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-event-store",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("listEventStoreData",a.listEventStoreData))},directives:[Rt.h],styles:[""]}),i})()}]}];let bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.Bz.forChild(wt)],_.Bz]}),i})();var L=o(4466),Bt=o(6461),St=o(3308),Pt=o(9049),Zt=o(7498),Dt=o(7191),k=o(9342),Nt=o(3174),kt=o(3470),At=o(1715),Et=o(5597);const Ot=["chart"];let Mt=(()=>{class i{constructor(){this.showUTC=!1,this.fontColor={color:"#fff"},this.sub=new U.w}ngOnInit(){this.sub.add((0,At.F)(1e3).subscribe(()=>this.setData()))}ngOnDestroy(){this.sub.unsubscribe(),this.chart&&this.chart.destroy()}ngAfterViewInit(){this.chart=(0,kt.chart)(this.chartContainer.nativeElement,{chart:{backgroundColor:null,type:"area"},title:{text:""},credits:{enabled:!1},xAxis:{title:{style:this.fontColor},lineColor:"#fff",labels:{style:this.fontColor}},yAxis:{title:{text:"LSN / Sec",style:this.fontColor},lineColor:"#fff",labels:{style:this.fontColor}},legend:{enabled:!1},tooltip:{hideDelay:0,outside:!0,shared:!0},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{lineWidth:1}},marker:{radius:1,states:{hover:{radius:2}}}},column:{negativeColor:"#910000",borderColor:"silver"}},series:[{type:"area",data:[],color:"#0075c9"}]}),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)}ngOnChanges(){this.setData()}setData(){if(this.data&&this.data.length>1){const e=function Ut(i){return i.map((s,e)=>{if(e>0){const a=i[e-1],r=(s.date.getTime()-a.date.getTime())/1e3;return{delta:(+s.LastAppliedReplicationSequenceNumber-+a.LastAppliedReplicationSequenceNumber)/r,date:s.date}}return{delta:0,date:s.date}}).splice(1)}(this.data);if(this.chart){this.chart.series[0].setData(e.map(r=>r.delta));const a=new Date;a.setMilliseconds(0),this.chart.xAxis[0].setCategories(e.map(r=>{if(this.showUTC)return r.date.toUTCString();{r.date.setMilliseconds(0);const p=a.getTime()-r.date.getTime();return Et.I.getDuration(p)+" ago"}})),window.dispatchEvent(new Event("resize"))}}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replication-trend-line"]],viewQuery:function(e,a){if(1&e&&t.Gf(Ot,5),2&e){let r;t.iGM(r=t.CRH())&&(a.chartContainer=r.first)}},inputs:{data:"data",fullScreen:"fullScreen",showUTC:"showUTC"},features:[t.TTD],decls:2,vars:0,consts:[[2,"height","100%","min-height","100%","min-width","100%"],["chart",""]],template:function(e,a){1&e&&t._UZ(0,"div",0,1)},styles:[".highcharts-container[_ngcontent-%COMP%], .highcharts-root[_ngcontent-%COMP%]{width:100%!important}"]}),i})();function Jt(i,s){if(1&i&&t._UZ(0,"app-essential-item",10),2&i){const a=s.last;t.Q6J("item",s.$implicit)("underline",a)}}function Lt(i,s){if(1&i&&t._UZ(0,"app-essential-item",10),2&i){const a=s.last;t.Q6J("item",s.$implicit)("underline",a)}}function Qt(i,s){if(1&i&&t._UZ(0,"app-essential-item",10),2&i){const a=s.last;t.Q6J("item",s.$implicit)("underline",a)}}let Yt=(()=>{class i{constructor(){this.copyItems=[],this.replicationItems=[],this.lastItems=[],this.copy=!1}ngOnChanges(){const e=this.replicator.RemoteReplicatorAcknowledgementStatus.CopyStreamAcknowledgementDetail,a=this.replicator.RemoteReplicatorAcknowledgementStatus.ReplicationStreamAcknowledgementDetail;this.replicationItems=[{descriptionName:"Average Receive Duration",copyTextValue:a.AverageReceiveDuration,displayText:a.AverageReceiveDuration},{descriptionName:"Average Apply Duration",copyTextValue:a.AverageApplyDuration,displayText:a.AverageApplyDuration},{descriptionName:"Not Received Count",copyTextValue:a.NotReceivedCount,displayText:a.NotReceivedCount},{descriptionName:"Received And Not Applied",copyTextValue:a.ReceivedAndNotAppliedCount,displayText:a.ReceivedAndNotAppliedCount}],this.copyItems=[{descriptionName:"Average Receive Duration",copyTextValue:e.AverageReceiveDuration,displayText:e.AverageReceiveDuration},{descriptionName:"Average Apply Duration",copyTextValue:e.AverageApplyDuration,displayText:e.AverageApplyDuration},{descriptionName:"Not Received Count",copyTextValue:e.NotReceivedCount,displayText:e.NotReceivedCount},{descriptionName:"Received And Not Applied",copyTextValue:e.ReceivedAndNotAppliedCount,displayText:e.ReceivedAndNotAppliedCount},{descriptionName:"Last Received CSN",copyTextValue:this.replicator.LastReceivedCopySequenceNumber,displayText:this.replicator.LastReceivedCopySequenceNumber},{descriptionName:"Last Applied CSN",copyTextValue:this.replicator.LastAppliedCopySequenceNumber,displayText:this.replicator.LastAppliedCopySequenceNumber}],this.lastItems=[{descriptionName:"Last Received LSN ",copyTextValue:this.replicator.LastReceivedReplicationSequenceNumber,displayText:this.replicator.LastReceivedReplicationSequenceNumber},{descriptionName:"Last Applied LSN ",copyTextValue:this.replicator.LastAppliedReplicationSequenceNumber,displayText:this.replicator.LastAppliedReplicationSequenceNumber}]}handleCollapseChange(e){this.copy=!e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replica-status"]],inputs:{replicator:"replicator"},features:[t.TTD],decls:18,vars:5,consts:[[1,"flex-column",2,"justify-content","space-between","height","100%"],[2,"flex","1","min-height","0px","display","flex","flex-direction","column"],[1,"underline",2,"min-height","0px","overflow","auto"],["sectionName","Copy",3,"collapsed","collapsedChange"],["collapse-header","",1,"center-text"],["collapse-body",""],[3,"item","underline",4,"ngFor","ngForOf"],["sectionName","Replication",1,"underline",3,"collapsed","collapsedChange"],["collapsed","false","data-cy","current-state"],[1,"underline-title"],[3,"item","underline"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-collapse-container",3),t.NdJ("collapsedChange",function(p){return!(a.copy=p)})("collapsedChange",function(p){return a.handleCollapseChange(p)}),t.TgZ(4,"div",4),t._uU(5," Copy "),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,Jt,1,2,"app-essential-item",6),t.qZA()()(),t.TgZ(8,"app-collapse-container",7),t.NdJ("collapsedChange",function(p){return a.copy=p}),t.TgZ(9,"div",4),t._uU(10," Replication "),t.qZA(),t.TgZ(11,"div",5),t.YNc(12,Lt,1,2,"app-essential-item",6),t.qZA()()(),t.TgZ(13,"div",8)(14,"h4",9),t._uU(15,"Current State"),t.qZA(),t.TgZ(16,"div",5),t.YNc(17,Qt,1,2,"app-essential-item",6),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("collapsed",!a.copy),t.xp6(4),t.Q6J("ngForOf",a.copyItems),t.xp6(1),t.Q6J("collapsed",a.copy),t.xp6(4),t.Q6J("ngForOf",a.replicationItems),t.xp6(5),t.Q6J("ngForOf",a.lastItems))},directives:[D.P,n.sg,k._],styles:[".row-container[_ngcontent-%COMP%]{border-bottom:solid 2px white;border-top:solid 2px white}.replica-container[_ngcontent-%COMP%]{width:320px;display:inline-block;padding:10px;margin:5px;min-height:250px}.green-border[_ngcontent-%COMP%]{border-left:8px solid green}.blue-border[_ngcontent-%COMP%]{border-left:8px solid #0075c9;background-color:#202c34}.yellow[_ngcontent-%COMP%]{border-left:8px solid yellow}.field[_ngcontent-%COMP%]{color:#c9c9c9}"]}),i})();function Ft(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeReplication()}),t._UZ(1,"span",15),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",e.showReplication?"Close":"View"," Replication")}}function Vt(i,s){1&i&&t._UZ(0,"app-essential-item",10),2&i&&t.Q6J("item",s.$implicit)("underline",!1)}const Kt=function(i){return{fullscreen:i}};function qt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"h4",17),t._uU(2,"LSN's Replicated Per Second "),t.TgZ(3,"span",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeFullScreen()}),t.qZA()(),t.TgZ(4,"div",19)(5,"div",20),t._uU(6," (This information is only recorded on this tab and is cleared when left) "),t.qZA(),t.TgZ(7,"div",21),t._uU(8," UTC "),t.TgZ(9,"app-toggle",22),t.NdJ("stateChange",function(r){return t.CHM(e),t.oxw().showUTC=r}),t.qZA()()(),t.TgZ(10,"div",23),t._UZ(11,"app-replication-trend-line",24),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("ngClass",t.VKq(8,Kt,e.fullScreen)),t.xp6(3),t.Gre("link ",e.fullScreen?"mif-shrink":"mif-enlarge",""),t.xp6(6),t.Q6J("state",e.showUTC),t.xp6(2),t.Q6J("data",e.replicatorHistory)("showUTC",e.showUTC)("fullScreen",e.fullScreen)}}function zt(i,s){if(1&i&&(t.TgZ(0,"div",25),t._UZ(1,"app-replica-status",26),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("replicator",e.replicator)}}const Ht=function(i){return{"max-width":i}};let Wt=(()=>{class i{constructor(){this.showReplication=!1,this.showReplicationChange=new t.vpe,this.overviewItems=[],this.leftBannerColor="",this.fullScreen=!1,this.copyText="",this.showUTC=!1}ngOnChanges(){this.copyText=JSON.stringify(this.replica.raw,null,4),this.overviewItems=[{descriptionName:"ID",copyTextValue:this.replica.name,displayText:this.replica.name},{descriptionName:"Role",copyTextValue:this.replica.role,displayText:this.replica.role},{descriptionName:"Node",copyTextValue:this.replica.raw.NodeName,displayText:this.replica.raw.NodeName}],this.status={descriptionName:"Status",copyTextValue:this.replica.raw.HealthState,displaySelector:!0};let e="";e=this.replica.healthState.text===f.MQ.OK?"green":this.replica.healthState.text===f.MQ.Warning?"yellow":this.replica.healthState.text===f.MQ.Error?"red":"gray",this.leftBannerColor="banner-"+e}changeReplication(){this.showReplication=!this.showReplication,this.showReplicationChange.emit(this.showReplication)}changeFullScreen(){this.fullScreen=!this.fullScreen}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replica-tile"]],inputs:{replica:"replica",replicator:"replicator",replicatorHistory:"replicatorHistory",showReplication:"showReplication"},outputs:{showReplicationChange:"showReplicationChange"},features:[t.TTD],decls:14,vars:14,consts:[[1,"replica-container","essen-pane",3,"ngClass"],[1,"top-side"],["size","25px",3,"badgeClass"],["class","flat-button underline flex-center","style","height: 25px","data-cy","view-replication",3,"click",4,"ngIf"],[2,"float","right",3,"text"],[1,"flex-min",2,"display","flex","gap","10px"],[1,"flex-column",2,"flex","1",3,"ngStyle"],[1,"replica-header"],["data-cy","main-info",2,"width","100%"],[3,"item","underline",4,"ngFor","ngForOf"],[3,"item","underline"],[3,"status"],["class","flex-min show-replication",3,"ngClass",4,"ngIf"],["style","flex: 1;","data-cy","replicator-info",4,"ngIf"],["data-cy","view-replication",1,"flat-button","underline","flex-center",2,"height","25px",3,"click"],[1,"mif-2x","mif-arrow-drop-down","status-icon"],[1,"flex-min","show-replication",3,"ngClass"],[1,"underline-title",2,"margin","5px 5px 0px"],[2,"float","right",3,"click"],[1,"description-container"],[2,"margin","auto"],[1,"flex-column"],[3,"state","stateChange"],[1,"flex-min"],[3,"data","showUTC","fullScreen"],["data-cy","replicator-info",2,"flex","1"],[3,"replicator"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-health-badge",2),t.YNc(3,Ft,3,1,"button",3),t._UZ(4,"app-clip-board",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Vt,1,2,"app-essential-item",9),t.TgZ(10,"app-essential-item",10),t._UZ(11,"app-status-resolver",11),t.qZA()()(),t.YNc(12,qt,12,10,"div",12),t.qZA(),t.YNc(13,zt,2,1,"div",13),t.qZA()()),2&e&&(t.Q6J("ngClass",a.leftBannerColor),t.uIk("data-cy",a.replica.id),t.xp6(2),t.Q6J("badgeClass",a.replica.healthState.badgeClass),t.xp6(1),t.Q6J("ngIf",a.replicator),t.xp6(1),t.Q6J("text",a.copyText),t.xp6(2),t.Q6J("ngStyle",t.VKq(12,Ht,a.showReplication?"calc(50% - 5px)":"100%")),t.xp6(3),t.Q6J("ngForOf",a.overviewItems),t.xp6(1),t.Q6J("item",a.status)("underline",!0),t.xp6(1),t.Q6J("status",a.replica.raw.ReplicaStatus),t.xp6(1),t.Q6J("ngIf",a.showReplication),t.xp6(1),t.Q6J("ngIf",a.showReplication))},directives:[n.mk,Zt._,n.O5,Dt._,n.PC,n.sg,k._,E.u,Nt.n,Mt,Yt],styles:[".row-container[_ngcontent-%COMP%]{border-bottom:solid 2px white;border-top:solid 2px white}.replica-container[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px 10px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;position:relative}.left-side[_ngcontent-%COMP%]{width:250px}.top-side[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.banner-green[_ngcontent-%COMP%]{border-left:8px solid green}.banner-blue[_ngcontent-%COMP%]{border-left:8px solid #0075c9}.banner-yellow[_ngcontent-%COMP%]{border-left:8px solid yellow}.banner-red[_ngcontent-%COMP%]{border-left:8px solid red}.field[_ngcontent-%COMP%]{color:#c9c9c9}app-replication-trend-line[_ngcontent-%COMP%]{height:100%;width:100%;padding-bottom:-10px}.description-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;display:-ms-flexbox;display:flex}.fullscreen[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:0;background-color:#262626;z-index:2;margin-bottom:0!important}.fullscreen[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]{margin:10px}.flex-min[_ngcontent-%COMP%]{-ms-flex:1;flex:1;min-height:0px}.show-replication[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin-bottom:-20px}"]}),i})();var Q=o(7883);let jt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[n.ez,L.m,Q.m]]}),i})();t.B6R(O,[n.O5,n.sg,k._,D.P,Wt,n.mk],[]);var Xt=o(2107),Gt=o(1901);let $t=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[n.ez,bt,L.m,Bt.Q,St.e,Pt.M,m.UX,jt,m.u5,Q.m,Gt.c]]}),i})();t.B6R(Xt.z,[N.d],[])}}]);